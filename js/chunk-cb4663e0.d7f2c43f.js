(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb4663e0"],{"114f":function(t,e,a){"use strict";a("c780")},1261:function(t,e,a){},1278:function(t,e,a){},"12a9":function(t,e,a){"use strict";a("7197")},23200:function(t,e,a){"use strict";a("7a75")},"4ea9":function(t,e,a){"use strict";a("ce04")},"51b1":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"g",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return u}));a("99af");var s=a("41cb");function n(t){return Object(s["g"])().get("/api/team/my-team/".concat(t,"/manage/admin"))}function i(t,e){return Object(s["g"])().post("/api/team/my-team/".concat(t,"/manage/admin"),{user_id:e})}function r(t,e){return Object(s["g"])().delete("/api/team/my-team/".concat(t,"/manage/admin/").concat(e))}function o(t,e,a){return Object(s["g"])().put("/api/team/my-team/".concat(t,"/manage/admin/").concat(e),a)}function c(t){return Object(s["g"])().get("/api/team/info/".concat(t,"/managers"))}function l(t,e){return Object(s["g"])().delete("/api/team/relation/".concat(t,"/manage/role/").concat(e))}function u(t,e){return Object(s["g"])().delete("/api/team/relation/".concat(t,"/manage/user/").concat(e))}},"5f8b":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-team-namespace"},[e("el-divider",{attrs:{"content-position":"left"}},[e("i",{staticClass:"el-icon-postcard"}),t._v(" 绑定铭牌 ")]),t.isVerified?t._e():e("el-alert",{staticClass:"u-warning",attrs:{type:"warning","show-icon":""}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v(" 注册命名空间请先进行"),e("router-link",{attrs:{to:"/org/verify/"+t.team_id}},[t._v("团队认证")])],1)]),t.action?e("el-alert",{staticClass:"u-alert",attrs:{title:"因接口缓存原因，提交后需要等待10分钟后才会更新铭牌和对应状态，请耐心等待，并非提交失败。",type:"warning",effect:"dark"}}):t._e(),e("div",{staticClass:"m-team-other-block",class:{disabled:!t.isVerified}},[e("div",{staticClass:"u-desc"},[t._v("团队主页的中文快捷链接，请尽量与团队名称保持一致")]),e("div",{staticClass:"u-input"},[e("el-input",{attrs:{placeholder:"请输入唯一名称",clearable:"",disabled:!t.isVerified},model:{value:t.form.key,callback:function(e){t.$set(t.form,"key",e)},expression:"form.key"}},[e("template",{slot:"prepend"},[t._v("剑网3.com/")])],2),e("el-button",{attrs:{type:"primary",disabled:!t.ready},on:{click:t.submit}},[t._v("提交")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.available,expression:"!available"}],staticClass:"u-validate"},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 当前名称已被使用")]),e("div",{staticClass:"u-result"},[t.first?t._e():e("span",{staticClass:"u-status",class:"u-status-"+t.status},[0==t.status?e("span",[e("i",{staticClass:"el-icon-remove"}),t._v(" 审核中 ")]):1==t.status?e("span",[e("i",{staticClass:"el-icon-success"}),t._v(" 正常 ")]):2==t.status?e("span",[e("i",{staticClass:"el-icon-error"}),t._v(" 未通过审核 ")]):t._e()]),e("span",{staticClass:"u-url"},[e("em",[t._v("绑定网址")]),e("a",{attrs:{href:"https://剑网3.com/"+t.form.key,target:"_blank"}},[t._v("https://剑网3.com/"+t._s(t.form.key))])])])])],1)},n=[],i=a("5530"),r=(a("b0c0"),a("9911"),a("bd13")),o=a("41cb");function c(t){return Object(o["a"])().post("/api/cms/namespace/team",t)}function l(t,e){return Object(o["a"])().put("/api/cms/namespace/".concat(t),e)}function u(t){return Object(o["a"])().get("/api/cms/namespace/key",{params:{key:t}})}function d(t){return Object(o["a"])().get("/api/cms/namespace/team",{params:t})}var p=a("85e4"),f=a("2ef0"),m={ID:"",key:"",link:"",desc:"",source_id:""},h={name:"EditNamespace",props:[],data:function(){return{form:Object(f["cloneDeep"])(m),available:!0,first:!0,action:""}},computed:{isVerified:function(){return this.$store.state.team.status},key:function(){return this.form.key||""},ready:function(){return this.form.key&&this.available},mode:function(){return this.form.ID?"update":"create"},status:function(){return this.form.status},params:function(){return Object(i["a"])({},this.form)},team:function(){return this.$store.state.team},team_id:function(){return this.$route.params.id},team_desc:function(){return this.team&&this.team.name+"@"+this.team.server}},methods:{checkAvailable:function(){var t=this;this.form.key=Object(r["a"])(this.form.key).safe(),this.form.key=Object(r["a"])(this.form.key).removeSpace(),this.key?u(this.key).then((function(e){var a,s;null!==(a=e.data)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.key&&e.data.data.source_id!==t.team_id&&(t.available=!1)})):this.available=!0},submit:function(){var t=this;this.fullfilTeamInfo();var e=Object(f["pick"])(this.params,["key","link","desc"]);e.desc=this.team_desc;var a="create"==this.mode?c(Object(i["a"])(Object(i["a"])({},e),{},{source_id:this.team_id})):l(this.form.ID,e);a.then((function(e){t.getData(),t.$alert("因接口缓存原因，提交后需要等待10分钟后才会更新铭牌和对应状态，请耐心等待，并非提交失败。","提示",{confirmButtonText:"确定",callback:function(e){t.action=e,t.$message({type:"success",message:"提交成功，请等待审核"})}})}))},getData:function(){var t=this,e={source_id:this.team_id};this.team_id&&d(e).then((function(e){var a=e.data.data.list[0];a&&(t.first=!1,t.form=a||Object(f["cloneDeep"])(m))}))},fullfilTeamInfo:function(){this.form.source_id=this.team_id,this.form.link=Object(p["i"])("org",this.team_id)}},watch:{"form.key":function(){this.checkAvailable()}},mounted:function(){this.getData()},components:{}},b=h,v=(a("afee"),a("12a9"),a("2877")),_=Object(v["a"])(b,s,n,!1,null,null,null);e["a"]=_.exports},"5feb":function(t,e,a){"use strict";a.d(e,"f",(function(){return n})),a.d(e,"a",(function(){return p})),a.d(e,"i",(function(){return d})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return o})),a.d(e,"h",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"g",(function(){return c}));var s=a("41cb");function n(t){return Object(s["b"])({proxy:!0}).get("/api/item/search",{params:t})}function i(t){return Object(s["a"])().get("/api/cms/team/dkp/".concat(t))}function r(t,e){return Object(s["a"])().get("/api/cms/team/dkp/".concat(t,"/logs"),{params:e})}function o(t){return Object(s["a"])().get("/api/cms/team/dkp/".concat(t,"/my"))}function c(t,e){return Object(s["g"])().post("/api/team/snapshot/record/".concat(t,"/dkp"),e)}function l(t,e){return Object(s["a"])().put("/api/cms/team/dkp/".concat(t,"/records"),e)}function u(t){return Object(s["a"])().put("/api/cms/team/dkp/".concat(t,"/reset"))}function d(t,e){return Object(s["a"])().put("/api/cms/team/dkp/".concat(t,"/rule"),{rule:e})}function p(t){return Object(s["a"])().get("/api/cms/team/dkp/".concat(t,"/rule"))}},7197:function(t,e,a){},7932:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-permission-panel"},[t.status?e("div",{staticClass:"m-permission-box"},[e("div",{staticClass:"m-permission-header"},[e("el-button",{staticClass:"u-btn-add",attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:t.len>=t.limit},on:{click:t.openDialog}},[t._v("添加管理员 "),e("span",{staticClass:"u-limit",class:{limit:t.len>=t.limit}},[t._v("("+t._s(t.len)+"/"+t._s(t.limit)+")")])])],1),e("div",{staticClass:"m-permission-box"},[e("div",{staticClass:"m-permission-list"},[e("el-row",{staticClass:"m-permission-list-header",attrs:{gutter:10,type:"flex"}},[e("el-col",{staticClass:"u-leader",attrs:{span:2}},[t._v("用户")]),e("el-col",{attrs:{span:1}},[t._v("基础设置")]),e("el-col",{attrs:{span:1}},[t._v("权限管理")]),e("el-col",{attrs:{span:1}},[t._v("赛事报名")]),e("el-col",{attrs:{span:1}},[t._v("成员管理")]),e("el-col",{attrs:{span:1}},[t._v("团队快照")]),e("el-col",{attrs:{span:1}},[t._v("DKP管理")]),e("el-col",{attrs:{span:1}},[t._v("金团账目")]),e("el-col",{attrs:{span:1}},[t._v("团队活动")]),e("el-col",{attrs:{span:1}},[t._v("操作")])],1),t._l(t.data,(function(a,s){return e("el-row",{key:s,staticClass:"u-super",attrs:{gutter:10,type:"flex"}},[99==a.level?[e("el-col",{staticClass:"u-leader",attrs:{span:2}},[e("a",{staticClass:"u-leader-link",attrs:{href:t._f("authorLink")(a.user_id),target:"_blank"}},[e("img",{staticClass:"u-leader-img",attrs:{src:t._f("showAvatar")(a.user_avatar)}}),e("span",{staticClass:"u-leader-name"},[t._v(t._s(a.display_name))])])]),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{checked:"",disabled:""}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{checked:"",disabled:""}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{checked:"",disabled:""}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{checked:"",disabled:""}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{checked:"",disabled:""}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{checked:"",disabled:""}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{checked:"",disabled:""}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{checked:"",disabled:""}})],1),e("el-col",{attrs:{span:1}})]:[e("el-col",{staticClass:"u-leader",attrs:{span:2}},[e("div",[e("a",{staticClass:"u-leader-link",attrs:{href:t._f("authorLink")(a.user_id),target:"_blank"}},[e("img",{staticClass:"u-leader-img",attrs:{src:t._f("showAvatar")(a.user_avatar)}}),e("span",{staticClass:"u-leader-name"},[t._v(t._s(a.display_name))])])])]),e("el-col",{attrs:{span:1}}),e("el-col",{attrs:{span:1}}),e("el-col",{attrs:{span:1}}),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{"true-label":1,"false-label":0},on:{change:function(e){return t.updateLeader("r_member",a)}},model:{value:a.r_member,callback:function(e){t.$set(a,"r_member",e)},expression:"item.r_member"}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{"true-label":1,"false-label":0},on:{change:function(e){return t.updateLeader("r_snapshot",a)}},model:{value:a.r_snapshot,callback:function(e){t.$set(a,"r_snapshot",e)},expression:"item.r_snapshot"}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{"true-label":1,"false-label":0},on:{change:function(e){return t.updateLeader("r_dkp",a)}},model:{value:a.r_dkp,callback:function(e){t.$set(a,"r_dkp",e)},expression:"item.r_dkp"}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{"true-label":1,"false-label":0},on:{change:function(e){return t.updateLeader("r_drop",a)}},model:{value:a.r_drop,callback:function(e){t.$set(a,"r_drop",e)},expression:"item.r_drop"}})],1),e("el-col",{attrs:{span:1}},[e("el-checkbox",{attrs:{"true-label":1,"false-label":0},on:{change:function(e){return t.updateLeader("r_raid",a)}},model:{value:a.r_raid,callback:function(e){t.$set(a,"r_raid",e)},expression:"item.r_raid"}})],1),e("el-col",{attrs:{span:1}},[e("el-button",{attrs:{type:"info",icon:"el-icon-delete",size:"mini",plain:""},on:{click:function(e){return t.removeLeader(a)}}},[t._v("删除")])],1)]],2)}))],2)])]):e("div",{staticClass:"m-team-limit"},[e("p",{staticClass:"u-title"},[e("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("linearGradient",{attrs:{id:"a",gradientUnits:"userSpaceOnUse",x1:"127.721",y1:"296.405",x2:"709.501",y2:"-285.375",gradientTransform:"matrix(1.0039 0 0 -1.0039 .192 516.558)"}},[e("stop",{attrs:{offset:"0","stop-color":"#ffb92d"}}),e("stop",{attrs:{offset:"1","stop-color":"#f59500"}})],1),e("path",{attrs:{d:"M437.29 511.903H74.707c-55.464 0-91.538-58.369-66.734-107.977L189.264 41.341c27.496-54.992 105.972-54.992 133.468 0l181.291 362.584c24.806 49.609-11.268 107.978-66.733 107.978z",fill:"url(#a)"}}),e("linearGradient",{attrs:{id:"b",gradientUnits:"userSpaceOnUse",x1:"204.952",y1:"219.176",x2:"380.322",y2:"43.816",gradientTransform:"matrix(1.0039 0 0 -1.0039 .192 516.558)"}},[e("stop",{attrs:{offset:"0","stop-color":"#ffb92d"}}),e("stop",{attrs:{offset:"1","stop-color":"#f59500"}})],1),e("path",{attrs:{d:"M437.29 511.903H74.707c-55.464 0-91.538-58.369-66.734-107.977L189.264 41.341c27.496-54.992 105.972-54.992 133.468 0l181.291 362.584c24.806 49.609-11.268 107.978-66.733 107.978z",fill:"url(#b)"}}),e("linearGradient",{attrs:{id:"c",gradientUnits:"userSpaceOnUse",x1:"19.855",y1:"259.541",x2:"489.762",y2:"259.541",gradientTransform:"matrix(1.0039 0 0 -1.0039 .192 516.558)"}},[e("stop",{attrs:{offset:"0","stop-color":"#fff465"}}),e("stop",{attrs:{offset:"1","stop-color":"#ffe600"}})],1),e("path",{attrs:{d:"M486.065 412.904L304.774 50.32c-9.438-18.876-27.672-30.145-48.775-30.145s-39.337 11.269-48.775 30.145L25.932 412.904c-8.514 17.028-7.622 36.863 2.387 53.057 10.009 16.195 27.351 25.864 46.388 25.864h362.584c19.037 0 36.379-9.669 46.388-25.864 10.008-16.194 10.901-36.028 2.386-53.057zM466.6 455.405c-6.324 10.232-17.28 16.341-29.308 16.341H74.707c-12.028 0-22.985-6.109-29.308-16.341-6.324-10.231-6.888-22.763-1.508-33.522L225.182 59.3c6.052-12.104 17.283-19.046 30.816-19.046s24.765 6.942 30.816 19.046l181.291 362.584c5.381 10.758 4.818 23.29-1.505 33.521z",fill:"url(#c)"}}),e("linearGradient",{attrs:{id:"d",gradientUnits:"userSpaceOnUse",x1:"421.327",y1:"104.45",x2:"137.237",y2:"388.54",gradientTransform:"matrix(1.0039 0 0 -1.0039 .192 516.558)"}},[e("stop",{attrs:{offset:"0","stop-color":"#be3f45","stop-opacity":"0"}}),e("stop",{attrs:{offset:"1","stop-color":"#be3f45"}})],1),e("path",{attrs:{d:"M437.286 511.899h-28.551L243.701 346.865c-4.879-2.389-7.329-6.515-7.329-12.408 0-22.267-.914-38.149-2.741-88.546-1.827-50.387-2.741-60.737-2.741-83.004 0-7.108 2.419-12.589 7.258-16.454 4.829-3.875 11.093-5.803 18.783-5.803s13.342 2.008 16.936 6.034c.693.763 151.14 151.16 203.072 203.072l27.086 54.171c24.808 49.604-11.272 107.972-66.739 107.972z",fill:"url(#d)"}}),e("linearGradient",{attrs:{id:"e",gradientUnits:"userSpaceOnUse",x1:"329.339",y1:"33.293",x2:"236.669",y2:"125.973",gradientTransform:"matrix(1.0039 0 0 -1.0039 .192 516.558)"}},[e("stop",{attrs:{offset:"0","stop-color":"#be3f45","stop-opacity":"0"}}),e("stop",{attrs:{offset:"1","stop-color":"#be3f45"}})],1),e("path",{attrs:{d:"M396.969 511.899h-74.671l-85.604-85.604c-5.692-5.02-8.543-10.872-8.543-17.569 0-6.977 2.851-12.91 8.543-17.789 5.692-4.879 12.609-7.319 20.741-7.319 7.158 0 13.352 2.44 18.572 7.319l120.962 120.962z",fill:"url(#e)"}}),e("path",{attrs:{d:"M228.154 408.722c0-6.977 2.846-12.903 8.537-17.781 5.692-4.88 12.61-7.326 20.741-7.326 7.161 0 13.351 2.446 18.571 7.326 5.221 4.878 7.84 10.804 7.84 17.781 0 6.696-2.617 12.553-7.84 17.573-5.22 5.022-11.411 7.532-18.571 7.532-8.132 0-15.049-2.511-20.741-7.532-5.691-5.02-8.537-10.876-8.537-17.573zm2.739-245.814c0-7.105 2.417-12.593 7.254-16.459 4.835-3.866 11.097-5.801 18.786-5.801s13.338 2.013 16.94 6.035c3.601 4.022 5.406 9.429 5.406 16.225 0 22.269-.386 32.613-1.141 83.008-.763 50.397-1.14 66.277-1.14 88.537 0 4.645-2.175 8.281-6.519 10.905-4.351 2.625-8.866 3.939-13.545 3.939-13.707 0-20.562-4.944-20.562-14.844 0-22.26-.914-38.14-2.739-88.537-1.828-50.396-2.74-60.74-2.74-83.008z",fill:"#fff"}})],1),t._v(" 权限不足 ")]),t._m(0),t._m(1)]),e("userpop",{staticClass:"m-team-leader-dialog",attrs:{title:"添加管理员",data:t.leader},on:{confirm:t.addLeader},model:{value:t.user_pop_status,callback:function(e){t.user_pop_status=e},expression:"user_pop_status"}},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 用户UID可在用户主页查看")])],1)},n=[function(){var t=this,e=t._self._c;return e("div",[t._v(" 该功能仅对"),e("a",{attrs:{href:"/vip/premium?from=team_permission",target:"_blank"}},[t._v("专业版")]),t._v("账号开放，用于添加团队的管理员及详细权限设置。 ")])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"u-buy el-button el-button--primary",attrs:{href:"/vip/premium?from=team_permission",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 升级专业版账号")])}],i=a("ade3"),r=(a("caad"),a("14d9"),a("b0c0"),a("e9f5"),a("7d54"),a("d3b7"),a("2532"),a("159b"),a("98d0")),o=a("85e4"),c=a("c9d2"),l=a("51b1"),u={name:"EditPermission",props:[],data:function(){return{status:!1,leader:"",user_pop_status:!1,data:[],founder:{user_id:c["a"].getInfo().uid,user_avatar:c["a"].getInfo().avatar,user_name:c["a"].getInfo().name},limit:20}},computed:{id:function(){return~~this.$route.params.id},len:function(){return~~this.data.length},leaders:function(){var t=[];return this.data.forEach((function(e){t.push(e.user_id)})),t}},methods:{openDialog:function(){this.user_pop_status=!0},addLeader:function(t){var e=this;this.leader=t,!this.leader||isNaN(this.leader)||this.leaders.includes(this.leader)?this.$alert("用户已存在","提醒",{confirmButtonText:"确定"}):Object(l["a"])(this.id,t).then((function(t){e.$notify({title:"成功",message:"管理员添加成功",type:"success"}),location.reload()}))},removeLeader:function(t){var e=this;this.$alert("确定取消".concat(t.display_name,"的管理员身份吗？"),"提醒",{confirmButtonText:"确定",callback:function(a){"confirm"==a&&Object(l["b"])(e.id,t.user_id).then((function(t){e.$notify({title:"成功",message:t.data.msg,type:"success"}),location.reload()}))}})},updateLeader:function(t,e){var a=this,s=e[t];Object(l["g"])(this.id,e.user_id,Object(i["a"])({},t,s)).then((function(){a.$notify({title:"用户权限已更新",message:s?"授权成功":"取消授权成功",type:"success"})}))},loadLeaders:function(){var t=this;this.id&&Object(l["c"])(this.id).then((function(e){t.data=e.data.data.list||[]}))}},filters:{authorLink:o["a"],showAvatar:function(t){return Object(o["t"])(t,52)}},mounted:function(){var t=this;c["a"].isPRO().then((function(e){t.status=e,t.status&&t.loadLeaders()}))},components:{userpop:r["a"]}},d=u,p=(a("7a9b"),a("2877")),f=Object(p["a"])(d,s,n,!1,null,null,null);e["a"]=f.exports},"7a75":function(t,e,a){},"7a9b":function(t,e,a){"use strict";a("1278")},"87d0":function(t,e,a){},"8c74":function(t,e,a){},"98d0":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"m-team-userpop",attrs:{title:t.title,visible:t.visible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.visible=e}}},[e("div",{staticClass:"u-tip"},[t._t("default")],2),e("div",{staticClass:"u-input"},[e("el-input",{attrs:{placeholder:"请输入UID（数字）"},model:{value:t.uid,callback:function(e){t.uid=t._n(e)},expression:"uid"}})],1),e("div",{staticClass:"u-preview"},[e("img",{staticClass:"u-avatar",attrs:{src:t._f("showAvatar")(t.userdata.user_avatar)}}),e("span",{staticClass:"u-name"},[t._v(t._s(t.userdata.display_name||"-"))])]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)])},n=[],i=a("85e4"),r=a("8194"),o={name:"userpop",props:["title","data","show"],data:function(){return{visible:!1,uid:"",userdata:{name:"",avatar:""},status:!1}},model:{prop:"show",event:"switchUserPop"},watch:{data:function(t){this.uid=t},uid:function(t){var e=this;Object(r["d"])(t).then((function(t){t.data.data?(e.status=!0,e.userdata=t.data.data):(e.status=!1,e.userdata={name:"",avatar:""})}))},show:function(t){this.visible=t},visible:function(t){this.$emit("switchUserPop",t)}},filters:{showAvatar:function(t){return Object(i["t"])(t,"l")}},computed:{},methods:{confirm:function(){this.status?(this.visible=!1,this.$emit("confirm",this.uid)):this.$alert("用户不存在 或 UID不正确","提醒",{confirmButtonText:"确定"})}},mounted:function(){},components:{}},c=o,l=(a("a17b"),a("2877")),u=Object(l["a"])(c,s,n,!1,null,null,null);e["a"]=u.exports},a17b:function(t,e,a){"use strict";a("8c74")},acdd:function(t){t.exports=JSON.parse('{"douyu":"斗鱼","bilibili":"B站","huya":"虎牙"}')},afee:function(t,e,a){"use strict";a("f08e")},b41e:function(t,e,a){"use strict";a("87d0")},b4e4:function(t,e,a){},bb7d:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-team-snapshot-password"},[e("el-divider",{attrs:{"content-position":"left"}},[e("i",{staticClass:"el-icon-camera"}),t._v(" 快照密码 ")]),e("div",{staticClass:"u-password-box"},[e("el-alert",{attrs:{title:"上传团队快照需先设置团队快照密码，密码为6个数字组成",type:"warning","show-icon":""}}),e("div",{staticClass:"u-password"},[e("el-input",{staticClass:"u-input",attrs:{type:"text",maxlength:6,"show-word-limit":"","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("el-button",{staticClass:"u-btn",attrs:{type:"primary",disabled:!t.ready},on:{click:t.onSubmit}},[t._v("设置密码")])],1)],1)],1)},n=[],i=(a("ac1f"),a("00b4"),a("681e")),r={name:"editPassword",props:["id"],data:function(){return{password:""}},computed:{ready:function(){var t=/\d{6}/g,e=t.test(this.password);return e}},methods:{onSubmit:function(){var t=this;Object(i["u"])(this.id,this.password).then((function(){t.password="",t.$notify({title:"设置密码成功",type:"success"})}))}}},o=r,c=(a("f9b9"),a("2877")),l=Object(c["a"])(o,s,n,!1,null,"57eafbea",null);e["a"]=l.exports},bbee:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"v-org-add"},[e("h1",{staticClass:"m-title"},[e("i",{staticClass:"el-icon-setting"}),e("span",{staticClass:"u-txt"},[t._v("团队设置")]),t.id?e("router-link",{staticClass:"u-homepage",attrs:{to:"/org/"+t.id,target:"_blank"}},[e("i",{staticClass:"el-icon-s-home"}),e("span",[t._v("团队主页")])]):t._e(),e("div",{staticClass:"u-op"},[e("el-button",{staticClass:"u-transform",attrs:{type:"warning",size:"mini",icon:"el-icon-sort"},on:{click:t.transformTeam}},[t._v("移交团队")]),t.id?e("el-button",{staticClass:"u-delete",attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:t.deleteTeam},slot:"reference"},[t._v("删除团队")]):t._e()],1)],1),e("el-tabs",{attrs:{type:"card"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e("el-tab-pane",{attrs:{label:"基本信息",name:"setting",lazy:""}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-team-form"},[t.done?e("el-alert",{staticClass:"u-done",class:{on:t.done},attrs:{type:"success","show-icon":""}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v("更新成功，"),t.id?e("router-link",{attrs:{to:"/org/"+t.id,target:"_blank"}},[t._v("点击查看 ")]):t._e()],1)]):t._e(),e("teamform",{ref:"teamForm",attrs:{data:t.form,btn_txt:"更新",processing:t.processing},on:{submit:t.submit}})],1)]),e("el-tab-pane",{attrs:{label:"权限管理",name:"permission",lazy:""}},[e("EditPermission")],1),e("el-tab-pane",{attrs:{label:"高级设置",name:"config",lazy:""}},[e("EditOrgConfig",{attrs:{"team-info":t.form}})],1),e("el-tab-pane",{attrs:{label:"其它功能",name:"other",lazy:""}},[e("EditOrgOther")],1)],1),e("userpop",{staticClass:"m-team-transform",attrs:{title:"移交团队",data:t.to_uid},on:{confirm:t.confirmTransform},model:{value:t.openTransformDialog,callback:function(e){t.openTransformDialog=e},expression:"openTransformDialog"}},[e("div",{staticClass:"u-warning el-alert el-alert--warning is-light"},[e("i",{staticClass:"el-icon-warning"}),t._v("当对方没有团队时，可以直接移交。如果对方已有团队， 对方为"),e("a",{attrs:{href:"/vip/premium?from=team_transform",target:"_blank"}},[t._v("专业版账号")]),t._v("时方可使用本功能 ")]),t._v(" 请输入需要移交的用户UID: ")])],1)},n=[],i=(a("14d9"),a("d3b7"),a("681e")),r=a("ff5f"),o=a("98d0"),c=a("c9d2"),l=a("7932"),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"v-team-other"},[e("Namespace")],1)},d=[],p=a("5f8b"),f={name:"",props:[],data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{Namespace:p["a"]}},m=f,h=(a("4ea9"),a("2877")),b=Object(h["a"])(m,u,d,!1,null,null,null),v=b.exports,_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"v-team-config"},[e("snapshot-password",{attrs:{id:t.id}}),e("team-banner",{attrs:{"team-info":t.teamInfo}}),e("dkp-rule")],1)},g=[],y=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-team-dkp-rule"},[e("el-divider",{attrs:{"content-position":"left"}},[e("i",{staticClass:"el-icon-document"}),t._v(" DKP制度 ")]),e("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),e("el-button",{staticClass:"u-btn",attrs:{type:"primary"},on:{click:t.handleSubmitDkpRule}},[t._v("提交")])],1)},k=[],C=(a("ac1f"),a("5319"),a("5feb")),x={name:"dkpRule",props:[],components:{},data:function(){return{data:"",loading:!1}},computed:{id:function(){return~~this.$route.params.id}},methods:{init:function(){this.getDkpRule(this.id)},handleSubmitDkpRule:function(){var t=this;return""===this.data.replace(/[\ \n]/g,"")?(this.$message({message:"DKP制度不能为空",type:"warning"}),!1):(this.loading=!0,Object(C["i"])(this.id,this.data).then((function(e){t.$message({message:"DKP制度更新成功",type:"success"})})).finally((function(){t.loading=!1})))},getDkpRule:function(t){var e=this;return this.loading=!0,Object(C["a"])(t).then((function(t){e.data=t.data.data?t.data.data.rule:""})).finally((function(){e.loading=!1}))}},filters:{},created:function(){},mounted:function(){this.init()}},w=x,O=(a("c2c1"),Object(h["a"])(w,y,k,!1,null,"3b6e02c3",null)),j=O.exports,$=a("bb7d"),z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-team-banner"},[e("el-divider",{attrs:{"content-position":"left"}},[e("i",{staticClass:"el-icon-picture-outline"}),t._v(" 团队海报 ")]),e("uploadImage",{attrs:{info:"团队海报推荐尺寸为1125*630，用于微信小程序团队主页与活动等作为主题展示。"},model:{value:t.banner,callback:function(e){t.banner=e},expression:"banner"}}),e("el-button",{staticClass:"u-submit-btn",attrs:{type:"primary",size:"mini",icon:"el-icon-upload"},on:{click:t.submitBanner}},[t._v("提交海报")])],1)},D=[],I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-upload-banner"},[e("el-alert",{staticClass:"u-tip",attrs:{title:t.info,type:"info","show-icon":""}}),t.data?e("div",{staticClass:"u-upload",style:t.uploadStyle},[e("img",{attrs:{src:t.preview}}),e("i",{staticClass:"u-upload-mask"}),e("i",{staticClass:"u-upload-delete el-icon-delete",attrs:{title:"移除"},on:{click:t.remove}})]):e("div",{staticClass:"u-upload el-upload el-upload--picture-card",on:{click:t.select}},[e("i",{staticClass:"el-icon-plus"})]),e("input",{ref:"uploadInput",staticClass:"u-upload-input",attrs:{type:"file",accept:".jpg, .jpeg, .png, .gif, .bmp,.webp"},on:{change:t.upload}})],1)},T=[],L=(a("a9e3"),a("85e4")),S=a("1509"),U={name:"upload-banner",props:{content:{type:String,default:""},info:{type:String,default:"用于展示tips"},size:{type:[Array,Number],default:148},maxSize:{type:Number,default:10}},data:function(){return{data:this.content||""}},model:{prop:"content",event:"input"},watch:{content:function(t){this.data=t},data:function(t){this.$emit("input",t)}},computed:{fileInput:function(){return this.$refs.uploadInput},preview:function(){var t=Array.isArray(this.size)?this.size:[this.size,this.size];return Object(L["l"])(this.data,t,!0)},uploadStyle:function(){var t=Array.isArray(this.size)?this.size:[this.size,this.size];return{width:t[0]+"px",height:t[1]+"px"}}},methods:{select:function(){this.fileInput.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))},upload:function(){var t=this,e=this.fileInput.files[0];if(e)if(e.size>1024*this.maxSize*1024)this.$message.error("图片大小不能超过"+this.maxSize+"M");else{var a=new FormData;a.append("file",e),Object(S["j"])(a).then((function(e){t.data=e.data.data[0],t.$message({message:"上传成功",type:"success"})}))}},remove:function(){this.data=""}}},A=U,E=(a("23200"),Object(h["a"])(A,I,T,!1,null,null,null)),N=E.exports,P={name:"team_banner",components:{uploadImage:N},props:{teamInfo:{type:Object,default:function(){return{}}}},data:function(){return{banner:this.data}},computed:{id:function(){return~~this.$route.params.id}},watch:{teamInfo:{deep:!0,immediate:!0,handler:function(t){this.banner=t.banner}}},methods:{submitBanner:function(){var t=this;Object(i["x"])(this.id,{banner:this.banner}).then((function(){t.$message.success("海报上传成功")}))}}},B=P,M=(a("b41e"),Object(h["a"])(B,z,D,!1,null,null,null)),R=M.exports,V={name:"",props:["teamInfo"],components:{"dkp-rule":j,"snapshot-password":$["a"],"team-banner":R},data:function(){return{password:""}},computed:{id:function(){return~~this.$route.params.id}},methods:{onSubmit:function(){}},filters:{},created:function(){},mounted:function(){}},G=V,q=Object(h["a"])(G,_,g,!1,null,null,null),K=q.exports,F={name:"EditOrg",props:[],data:function(){return{isVerified:!1,form:{name:"",server:"",logo:"",desc:"",recruit:"",tv_type:"",tv:"",v_member:0,v_dkp:0,v_activity:0,v_comment:0,yy_channel:"",qq_group:"",tags:[],wiki:""},done:!1,loading:!1,processing:!1,to_uid:"",openTransformDialog:!1,tab:"setting"}},computed:{id:function(){return~~this.$route.params.id}},methods:{loadData:function(){var t=this;this.loading=!0,Object(i["m"])(this.id).then((function(e){e.data.data.super!=c["a"].getInfo().uid&&c["a"].getInfo().group<128?t.$message.error("没有操作权限"):(t.form=e.data.data,t.isVerified=e.data.data.status,t.$store.state.team=e.data.data)})).finally((function(){t.loading=!1}))},submit:function(){var t=this;this.processing=!0,this.done=!1,Object(i["w"])(this.id,this.form).then((function(e){var a;t.$message({message:"更新成功",type:"success"}),t.form=e.data.data,t.done=!0,null===(a=t.$refs.teamForm)||void 0===a||a.submitTv()})).finally((function(){t.processing=!1}))},deleteTeam:function(){var t=this;this.$alert("确定删除团队的所有数据吗？该操作不可恢复！","提醒",{confirmButtonText:"确定",callback:function(e){"confirm"==e&&Object(i["f"])(t.id).then((function(e){e.data.data.effect?(t.$notify({title:"成功",message:"删除成功",type:"success"}),t.$router.push("/")):t.$notify({title:"失败",message:"操作失败",type:"error"})}))}})},transformTeam:function(){this.openTransformDialog=!0},confirmTransform:function(t){var e=this;this.to_uid=t,this.to_uid!=c["a"].getInfo().uid?Object(i["v"])(this.id,this.to_uid).then((function(t){e.$message({message:"移交成功",type:"success"})})):this.$notify.error({title:"错误",message:"不能转交给自己"})}},watch:{tab:function(t){this.$router.push({query:{tab:t}})}},mounted:function(){this.tab=this.$route.query.tab||"setting",this.loadData()},components:{teamform:r["a"],userpop:o["a"],EditPermission:l["a"],EditOrgConfig:K,EditOrgOther:v}},H=F,J=(a("114f"),Object(h["a"])(H,s,n,!1,null,null,null));e["default"]=J.exports},c2c1:function(t,e,a){"use strict";a("1261")},c780:function(t,e,a){},ce04:function(t,e,a){},f08e:function(t,e,a){},f9b9:function(t,e,a){"use strict";a("b4e4")}}]);