(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b70413d"],{"31de":function(e,t,s){"use strict";var a=s("2ef0"),i=s.n(a),n=s("1157"),c=s.n(n),l=s("65c2");const{__iconPath:o,__dataPath:r}=l;class d{constructor(e){return this._default={version:"v20200522",container:".qx-container",xf:"其它",sq:"1,1,1,1,1,1,1,1,1,1,1,1",editable:!1,client:"std"},e&&"wujie"==e.client&&!e.sq&&(e.sq="1,1,1,1"),e||(e=this._default),this._resetData(e),this._img_path=o+"icon/",this._item_attr_list=["icon","name","desc","order","pos","is_skill","meta","extend"],this._data={},this.isQQBrowser=window.navigator.userAgent.includes("QQBrowser"),this.txt=new Array(this._total_levels),this.code={version:"",xf:"",sq:"",client:e.client},this.overview=[],this._init(e)}_init(e){return this._structureViewBox(e),this._build(e)}_getTalentData(e){return new Promise((t,s)=>{c.a.ajax({url:this._qixue_url+e.version+".json",dataType:"json",success:function(e){t(e)},error:function(e){s(e)}})})}async _build(e){return void 0==e?e=this._default:(e=i.a.extend(this._default,e),e=this._checkParam(e)),e.version!=this.version&&(this._data=await this._getTalentData(e)),this._setConfig(e),this._renderViewBox(),this.editable&&this._buildEditBox(),this}_checkParam(e){let t=this._checkParamType(e),s=this._checkParamsValue(t);return s}_checkParamType(e){let t={};if(i.a.isObject(e)&&(t=e),i.a.isString(e))if(e.includes("{"))try{t=JSON.parse(e)}catch(s){console.error("[checkParamType]无法解析字符串为合适对象")}else if(e.includes(","))try{let s=e.split(",");t.xf=s[0],t.sq=s[1].split("").join(",");let a=function(e){return"true"==e||"1"==e||"false"!=e&&"0"!=e&&void 0};t.editable=a(s[2])}catch(s){console.error("[checkParamType]无法解析字符串参数")}else console.error("[checkParamType]无法解析参数");return t}_checkParamsValue(e){let t=e;return e.sq&&(t.sq=this._checkParamSQ(e.sq)),e.editable&&(t.editable=this._checkParamEditable(e.editable)),t}_checkParamEditable(e){let t=Boolean(e);return t}_checkParamSQ(e){let t=e.split(",");if(t.length!=this._total_levels)throw`[checkParams]:奇穴应为${this._total_levels}重,请检查`;return e}_setConfig(e){this.version=e.version,this.xf=e.xf,this.map=this._data[e.xf],this.sq=e.sq.split(","),this.editable=e.editable,this.code={version:e.version,xf:e.xf,sq:e.sq,client:e.client},this.overview=this._buildTalentOutputData(this.sq,this.map)}_buildTalentOutputData(e,t){let s=[];return e.forEach((e,a)=>{let i=t[a+1][e];s.push({id:~~i.id,icon:~~i.icon,name:i.name})}),s}_structureViewBox(e){if(void 0==e.container)this.container=c()(this._default.container);else{if(0==c()(e.container).length)throw"[checkParams]:指定容器不存在,请检查";this.container=c()(e.container)}this.container.empty(),this.container.append(`\n            <div class="w-qixue-box ${this.isQQBrowser&&"isQQBrowser"}">\n                <div class="w-qixue-xf">奇穴</div>\n                <ul class="w-qixue-clist"></ul>\n                <div class="w-qixue-obox"></div>\n            </div>\n        `),this._box=this.container.children(".w-qixue-box"),this._xfbox=this._box.children(".w-qixue-xf"),this._clist=this._box.children(".w-qixue-clist"),this._obox=this._box.children(".w-qixue-obox");let t='\n            <li class="w-qixue-clist-item">\n                <span class="u-pic"><img src="" alt=""/></span>\n                <span class="u-title"></span>\n            </li>\n        '.repeat(this._total_levels);this._clist.append(t),this._citems=this._clist.children(".w-qixue-clist-item")}_renderViewBox(){let e=this,t=this._citems;this._xfbox.text(this.xf),c.a.each(e.sq,(function(s,a){let i=e.map[s+1],n=i[a];c.a.each(e._item_attr_list,(function(e,a){t.eq(s).attr("data-"+a,n[a])}));let l=e._img_path+n["icon"]+".png";t.eq(s).find("img").attr("src",""+l),t.eq(s).find("img").attr("alt",n["name"]),t.eq(s).find(".u-title").text(n["name"]),parseInt(n["is_skill"])?t.eq(s).addClass("w-qixue-is_skill"):t.eq(s).removeClass("w-qixue-is_skill"),e.txt[s]=n["name"]})),this._loadMetaEvent(this._clist)}_buildEditBox(){this._box.addClass("w-qixue-editable");let e='\n            <ul class="w-qixue-olist"></ul>\n        '.repeat(this._total_levels);this._obox.html(e),this._olist=this._obox.children(".w-qixue-olist");let t=this;c.a.each(t.map,(function(e,s){c.a.each(s,(function(s,a){t._olist.eq(e-1).append(`\n                    <li class="w-qixue-olist-item" \n                        data-id="${a["id"]}" \n                        data-icon="${a["icon"]}" \n                        data-name="${a["name"]}"\n                        data-desc="${a["desc"]}"\n                        data-order="${a["order"]}"\n                        data-pos="${a["pos"]}"\n                        data-is_skill="${a["is_skill"]}"\n                        data-meta="${a["meta"]}"\n                        data-extend="${a["extend"]}"\n                    >\n                        <span class="u-pic"><img src="${t._img_path+a["icon"]}.png" alt="${a["name"]}"/></span>\n                        <span class="u-title">${a["name"]}</span>\n                    </li>\n                `)}))})),this._olist.find(".w-qixue-olist-item").each((function(e,t){parseInt(c()(this).attr("data-is_skill"))&&c()(this).addClass("w-qixue-is_skill")})),this._bindEvent()}_bindEvent(){this._foldListEvent(),this._loadMetaEvent(this._olist),this._changeEvent()}_foldListEvent(){let e=this;this._clist.off("click","li").on("click","li",(function(t){t.stopPropagation();let s=c()(this).index();c()(this).siblings("li").removeClass("on"),c()(this).toggleClass("on"),e._clist.find(".on").length?e._obox.addClass("on"):e._obox.removeClass("on"),e._olist.removeClass("on"),c()(this).hasClass("on")&&e._olist.eq(s).addClass("on")})),c()("body").on("click",(function(){e._clist.children("li").removeClass("on"),e._obox.removeClass("on"),e._olist.removeClass("on")}))}_loadMetaEvent(e){c()(e).on("mouseenter","li",(function(){let e=c()(this).attr("data-name"),t=c()(this).attr("data-meta"),s=Boolean(parseInt(c()(this).attr("data-is_skill"))),a=s?"主动招式":"被动招式",i=c()(this).attr("data-desc"),n=c()(this).attr("data-extend"),l=0==c()(this).children(".w-qixue-item-pop").length,o=`<b class="u-name">${e}</b>`;if(o+=`<b class="u-skill">${a}</b>`,s&&"null"!=t&&void 0!=t&&(o+=`<em class="u-meta">${t}</em>`),o+=`<span class="u-desc">${i}</span>`,s&&"null"!=n&&void 0!=t&&(o+=`<em class="u-extend">${n}</em>`),l){let e='<span class="w-qixue-item-pop">',t="</span>";c()(this).append(e+o+t)}else c()(this).children(".w-qixue-item-pop").html(o)})),c()(e).on("mouseenter","li",(function(){c()(this).children(".w-qixue-item-pop").addClass("on")})),c()(e).on("mouseleave","li",(function(){c()(this).children(".w-qixue-item-pop").removeClass("on")}))}_changeEvent(){let e=this;this._olist.on("click","li",(function(){let t=c()(this),s=t.parent("ul").index(),a=e._citems.eq(s);c.a.each(e._item_attr_list,(function(e,s){a.attr("data-"+s,t.attr("data-"+s))})),a.find("img").attr("src",e._img_path+t.attr("data-icon")+".png"),a.find("img").attr("alt",t.attr("data-name")),a.find(".u-title").text(t.attr("data-name")),parseInt(t.attr("data-is_skill"))?a.addClass("w-qixue-is_skill"):a.removeClass("w-qixue-is_skill"),e.sq[s]=t.attr("data-pos"),e.txt[s]=t.attr("data-name"),e.code.sq=e.sq.toString(),e.overview[s]={id:~~t.attr("data-id"),icon:~~t.attr("data-icon"),name:t.attr("data-name")},c()(document).trigger("JX3_QIXUE_Change",e)}))}_resetData(e){this._qixue_url=r+"talent/"+e.client+"/",this._total_levels="wujie"==e.client?4:12}load(e){if(void 0==e)return;let t={};return e.sq||(e.sq="wujie"==e.client?"1,1,1,1":"1,1,1,1,1,1,1,1,1,1,1,1"),this._resetData(e),t=this._checkParam(e),this._structureViewBox(t),this._build(t).then(e=>(c()(document).trigger("JX3_QIXUE_Change",this),e))}}t["a"]=d},"5bd8":function(e){e.exports=JSON.parse('{"傲血战意":[{"name":"劲风单体","desc":"PVE","sq":"2,1,1,1,2,2,2,4,4,3,3,1"},{"name":"驰骋单体","desc":"PVE","sq":"2,1,1,1,3,2,2,4,4,3,3,1"}],"北傲诀":[{"name":"砺锋七刀","desc":"PVE","sq":"3,1,2,2,1,1,3,1,1,1,3,1"},{"name":"逐鹿七刀","desc":"PVE","sq":"3,1,2,2,1,3,3,1,1,1,3,1"}],"冰心诀":[{"name":"广陵月流","desc":"PVE","sq":"2,2,2,1,1,4,1,1,1,1,4,1"}],"补天诀":[{"name":"团队刷血","desc":"PVE","sq":"1,2,2,2,3,4,2,4,4,3,1,4"}],"毒经":[{"name":"浪客行","desc":"PVE","sq":"1,2,3,1,3,1,1,3,2,4,1,2"}],"分山劲":[{"name":"浪客行","desc":"PVE","sq":"1,3,1,1,3,4,2,1,2,1,1,1"},{"name":"割裂斩绝绝","desc":"PVE","sq":"1,3,1,4,1,1,1,1,1,1,1,1"},{"name":"减伤斩绝绝","desc":"PVE","sq":"1,3,1,4,1,3,1,1,1,1,1,1"},{"name":"打断斩绝绝","desc":"PVE","sq":"1,3,1,4,1,4,1,1,1,1,1,1"},{"name":"吃鸡","desc":"PVP","sq":"1,3,1,4,3,1,2,1,1,2,4,4"},{"name":"竞技场组排","desc":"PVP","sq":"1,3,1,4,4,2,2,1,1,2,1,4"}],"焚影圣诀":[{"name":"竞技场带奶","desc":"PVP","sq":"2,2,1,3,1,1,4,1,1,1,4,4"},{"name":"竞技场花毒","desc":"PVP","sq":"2,2,1,3,1,1,4,4,1,1,4,4"},{"name":"竞技场气蓬","desc":"PVP","sq":"2,2,1,3,2,1,4,4,4,1,4,4"},{"name":"驱夷单体","desc":"PVE","sq":"2,2,3,1,1,1,2,1,1,3,4,2"},{"name":"驱夷群体","desc":"PVE","sq":"2,3,3,1,1,1,2,4,1,3,4,2"},{"name":"苟鸡","desc":"PVP","sq":"3,2,1,3,4,2,3,3,4,1,4,4"},{"name":"浪客行","desc":"PVE","sq":"3,2,3,1,1,1,2,1,1,3,4,2"},{"name":"吃鸡组排","desc":"PVP","sq":"3,2,3,3,3,2,2,1,4,1,4,4"}],"花间游":[{"name":"副本常用","desc":"PVE","sq":"2,1,3,2,1,1,2,2,1,1,1,1"}],"惊羽诀":[{"name":"百里追魂流","desc":"PVE","sq":"2,2,2,2,1,4,3,2,2,1,1,4"}],"离经易道":[{"name":"寒遥刷团流","desc":"PVE","sq":"1,1,2,3,4,1,1,2,3,1,1,4"},{"name":"寒砚刷团流","desc":"PVE","sq":"1,1,2,3,4,1,1,2,3,1,2,4"},{"name":"南柯保T","desc":"PVE","sq":"1,2,1,3,3,1,1,2,1,1,1,4"},{"name":"五二刷团流","desc":"PVE","sq":"1,2,2,3,4,1,1,2,1,1,2,4"},{"name":"竞技场抗压","desc":"PVP","sq":"2,1,1,2,3,4,2,3,4,3,3,4"}],"凌海诀":[{"name":"吃鸡","desc":"PVP","sq":"1,2,2,2,1,3,2,3,3,1,3,1"},{"name":"副本常用","desc":"PVE","sq":"3,2,1,1,3,1,4,1,1,1,1,2"},{"name":"吃鸡组排","desc":"PVP","sq":"3,2,2,2,4,3,3,3,1,2,3,4"}],"明尊琉璃体":[{"name":"刷朝奇穴","desc":"PVE","sq":"2,1,2,4,3,4,4,3,4,1,1,1"},{"name":"正常明尊","desc":"PVE","sq":"2,2,1,4,1,4,1,3,4,1,1,4"},{"name":"常规主T","desc":"PVE","sq":"2,2,1,4,2,4,1,3,4,1,1,4"},{"name":"闪避流","desc":"PVE","sq":"2,2,2,4,2,3,1,2,3,3,4,4"},{"name":"群拉仇恨","desc":"PVE","sq":"2,2,2,4,3,3,1,3,4,1,1,4"},{"name":"仇恨群拉","desc":"PVE","sq":"2,2,4,4,2,3,1,3,4,4,3,1"}],"莫问":[{"name":"单体大徵","desc":"PVE","sq":"2,1,1,1,1,1,1,3,4,4,1,2"},{"name":"高山鹿鸣","desc":"PVE","sq":"2,3,3,3,2,1,4,3,2,4,2,1"},{"name":"清绝剑宫","desc":"PVE","sq":"2,3,4,2,4,4,3,3,1,4,1,1"}],"太虚剑意":[{"name":"副本常用","desc":"PVE","sq":"2,2,4,1,2,3,3,1,1,1,1,3"}],"天罗诡道":[{"name":"神机千算流","desc":"PVE","sq":"1,2,1,2,3,1,4,1,2,1,1,1"},{"name":"聚精凝神流","desc":"PVE","sq":"1,2,1,2,3,2,4,1,2,1,1,1"},{"name":"攻防团战","desc":"PVP","sq":"1,2,4,2,3,1,4,1,2,1,1,4"},{"name":"竞技场单体","desc":"PVP","sq":"1,3,4,2,2,2,1,2,2,4,1,1"},{"name":"抗压兼具","desc":"PVP","sq":"1,3,4,3,2,2,4,1,2,4,2,4"},{"name":"吃鸡奇穴","desc":"PVP","sq":"1,3,4,3,2,4,2,1,3,4,2,4"},{"name":"雷甲流","desc":"PVE","sq":"2,2,1,2,3,2,4,1,2,1,1,1"},{"name":"暴雨雷甲流","desc":"PVE","sq":"2,2,3,2,3,2,4,1,2,1,1,1"},{"name":"千秋群怪流","desc":"PVE","sq":"2,2,3,2,3,2,4,1,2,1,1,4"}],"铁骨衣":[{"name":"万能单刷","desc":"PVE","sq":"2,1,4,3,4,1,1,4,1,4,2,1"},{"name":"万能T本","desc":"PVE","sq":"2,2,1,3,4,3,1,1,1,4,2,1"},{"name":"高内防流","desc":"PVE","sq":"2,3,3,3,1,3,1,1,3,1,2,4"}],"铁牢律":[{"name":"副本群仇","desc":"PVE","sq":"3,1,2,3,1,4,4,4,3,2,4,4"},{"name":"铁牢主T","desc":"PVE","sq":"3,1,3,3,2,4,4,4,2,4,4,4"}],"问水诀":[{"name":"景行映波流","desc":"PVE","sq":"2,2,1,1,1,3,1,4,3,2,1,4"},{"name":"造化碧归流","desc":"PVE","sq":"2,2,1,1,4,3,1,4,3,1,1,4"},{"name":"造化残雪流","desc":"PVE","sq":"2,2,1,1,4,3,1,4,3,2,1,4"}],"洗髓经":[{"name":"大明主T","desc":"PVE","sq":"2,1,1,4,2,4,1,1,1,4,4,4"},{"name":"取法主T","desc":"PVE","sq":"2,3,1,4,2,4,1,1,1,4,4,4"},{"name":"天龙音回血","desc":"PVE","sq":"2,3,1,4,2,4,3,1,1,4,4,4"},{"name":"打断辅助","desc":"PVE","sq":"2,3,4,4,2,4,3,1,1,3,4,4"}],"相知":[{"name":"洞天血歌流","desc":"PVE","sq":"2,2,3,3,1,1,1,3,2,1,1,2"},{"name":"枕流盾歌流","desc":"PVE","sq":"2,3,1,4,2,1,3,3,2,4,1,3"},{"name":"高山血歌流","desc":"PVE","sq":"3,2,1,3,1,1,1,3,2,1,1,1"},{"name":"梅花盾歌流","desc":"PVE","sq":"3,2,1,3,4,4,3,2,2,4,1,3"},{"name":"争簇血歌流","desc":"PVE","sq":"3,2,2,3,1,1,1,3,2,1,1,2"},{"name":"谪仙盾歌流","desc":"PVE","sq":"3,2,2,4,1,4,3,2,2,4,1,3"}],"笑尘诀":[{"name":"坚冰群怪流","desc":"PVE","sq":"2,1,3,2,2,4,1,2,2,2,1,1"},{"name":"双元一掌流","desc":"PVE","sq":"2,2,3,2,2,4,1,2,2,2,1,1"},{"name":"追远回蓝流","desc":"PVE","sq":"2,3,3,2,2,4,1,2,2,2,1,1"},{"name":"竞技场常用","desc":"PVP","sq":"3,2,1,4,1,4,1,2,2,4,4,3"}],"易筋经":[{"name":"涅果六识流","desc":"PVE","sq":"1,1,1,1,1,4,1,3,2,3,3,4"},{"name":"幻身明澈流","desc":"PVE","sq":"1,2,2,1,1,2,1,3,2,3,1,4"},{"name":"清心非梵流","desc":"PVP","sq":"1,3,4,4,4,1,3,4,3,1,2,1"},{"name":"普心群体","desc":"PVE","sq":"2,1,3,3,2,4,3,3,2,1,3,4"},{"name":"静色明王身","desc":"PVP","sq":"2,3,4,4,3,1,3,1,3,1,2,4"},{"name":"明澈试炼","desc":"PVE","sq":"3,1,1,1,1,4,1,3,2,2,1,4"},{"name":"佛果试炼","desc":"PVE","sq":"3,1,1,1,1,4,1,3,2,2,3,4"},{"name":"明法六识流","desc":"PVE","sq":"3,1,1,1,1,4,1,3,2,3,3,4"},{"name":"明法幻身流","desc":"PVE","sq":"3,2,1,1,1,4,1,3,2,3,3,4"}],"隐龙诀":[{"name":"归鸿北阙流","desc":"PVE","sq":"1,3,3,1,2,1,1,1,1,4,3,4"},{"name":"折意重霄流","desc":"PVE","sq":"1,3,4,1,1,1,1,1,1,4,3,4"},{"name":"折意北阙流","desc":"PVE","sq":"1,3,4,1,2,1,1,1,1,4,3,4"}],"云裳心经":[{"name":"香蕊刷团流","desc":"PVE","sq":"1,1,2,2,1,2,1,2,1,1,2,4"},{"name":"回蓝刷团流","desc":"PVE","sq":"3,1,2,2,1,2,1,2,1,1,2,4"},{"name":"单体刷血","desc":"PVE","sq":"3,2,1,2,1,1,2,2,1,1,2,4"}],"紫霞功":[{"name":"自化流","desc":"PVE","sq":"2,2,3,2,2,2,3,1,2,1,4,2"},{"name":"吃鸡抗揍","desc":"PVP","sq":"2,3,1,4,4,3,4,2,3,2,4,3"}]}')},"6cf7":function(e,t,s){"use strict";s.r(t);s("b0c0");var a=function(){var e=this,t=e._self._c;return t("app-layout",{attrs:{slug:"talent"}},[t("div",{staticClass:"m-talent"},[t("div",{staticClass:"m-talent-header"},[t("h1",{staticClass:"m-talent-title"},[e._v("奇穴模拟器")]),t("div",{staticClass:"m-talent-panel"},[t("el-radio-group",{model:{value:e.finalClient,callback:function(t){e.finalClient=t},expression:"finalClient"}},[t("el-radio-button",{attrs:{label:"std"}},[e._v("旗舰")]),t("el-radio-button",{attrs:{label:"wujie"}},[e._v("无界")])],1),t("div",{staticClass:"m-talent-version"},[t("span",{staticClass:"u-label"},[e._v("选择版本")]),t("el-select",{attrs:{placeholder:"请选择游戏版本","popper-class":"m-talent__pop"},on:{change:e.reload},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}},e._l(e.versions,(function(s){return t("el-option",{key:s.version,attrs:{label:s.name,value:s.version}},[t("div",{staticClass:"m-talent__option"},[t("span",{staticClass:"u-label"},[e._v(e._s(s.name))]),t("span",{staticClass:"u-version"},[e._v(e._s(s.version))])])])})),1)],1),e.isLogin?t("div",{staticClass:"u-toolbar"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-setting",size:"small"},on:{click:function(t){e.drawer=!0}}},[e._v("我的预设")])],1):e._e()],1)]),t("div",{staticClass:"m-talent-wrapper"},[t("h2",{staticClass:"m-talent-subtitle"},[e._v("选择心法")]),t("div",{staticClass:"m-talent-xf"},e._l(e.xfMaps,(function(s,a){return t("el-radio",{key:a,attrs:{label:s.name},on:{change:e.reload},model:{value:e.xf,callback:function(t){e.xf=t},expression:"xf"}},[t("img",{staticClass:"u-pic",attrs:{src:e.xficon(s.id),alt:s.name}}),t("span",{staticClass:"u-txt"},[e._v(e._s(s.name))])])})),1),t("div",{staticClass:"m-xf-select"},[t("div",{staticClass:"m-talent-version"},[t("span",{staticClass:"u-label"},[e._v("选择心法")]),t("el-select",{attrs:{placeholder:"请选择心法","popper-class":"m-talent__pop"},on:{change:e.reload},model:{value:e.xf,callback:function(t){e.xf=t},expression:"xf"}},e._l(e.xfMaps,(function(s,a){return t("el-option",{key:a,attrs:{label:s.name,value:s.name}},[t("div",{staticClass:"m-talent__option"},[t("img",{staticClass:"u-pic",attrs:{src:e.xficon(s.id),alt:s.name}}),t("span",{staticClass:"u-txt"},[e._v(e._s(s.name))])])])})),1)],1)]),t("h2",{staticClass:"m-talent-subtitle"},[e._v("配置奇穴")]),t("div",{staticClass:"qx-container"}),t("h2",{staticClass:"m-talent-subtitle"},[e._v("奇穴编码")]),t("div",{staticClass:"m-talent-code"},[t("el-input",{attrs:{placeholder:"粘贴编码亦可自动解析奇穴"},on:{change:e.parseSchema},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[t("span",{staticClass:"u-copy",attrs:{slot:"prepend"},on:{click:function(t){return e.copy(e.code)}},slot:"prepend"},[t("i",{staticClass:"el-icon-document-copy"}),e._v(" 点击复制 ")])])],1),e.isEditor?t("div",{staticClass:"m-talent-code"},[t("h2",{staticClass:"m-talent-subtitle"},[e._v("配装编码")]),t("el-input",{attrs:{placeholder:"配装器编码"},model:{value:e.pzcode,callback:function(t){e.pzcode=t},expression:"pzcode"}},[t("span",{staticClass:"u-copy",attrs:{slot:"prepend"},on:{click:function(t){return e.copy(e.pzcode)}},slot:"prepend"},[t("i",{staticClass:"el-icon-document-copy"}),e._v(" 点击复制 ")])])],1):e._e(),e.isLogin?t("div",{staticClass:"m-talent-op"},[t("el-button",{attrs:{type:"primary",icon:e.currentSchema?"el-icon-check":"el-icon-document-add"},on:{click:e.save}},[e._v(e._s(e.currentSchema?"保存":"保存为预设"))]),e.isEditing?t("el-button",{staticClass:"u-btn",attrs:{type:"success",icon:"el-icon-document-add",plain:""},on:{click:e.saveAs}},[e._v("另存为")]):e._e()],1):e._e()]),e.isLogin?t("talent-drawer",{attrs:{drawer:e.drawer},on:{"update-drawer":e.updateDrawer,use:e.use}}):e._e()],1)])},i=[],n=s("5530"),c=(s("a15b"),s("e9c4"),s("b64b"),s("46d4")),l=s("65c2"),o=s("31de"),r=s("1157"),d=s.n(r),u=s("5bd8"),m=s("0644"),h=s.n(m),p=s("4566"),_=s("c9d2"),f=s("161f"),v=s("f71e"),q=s("c27f"),P={name:"Talent",props:[],data:function(){return{activeName:"common",xf:"其它",sq:"1,1,1,1,1,1,1,1,1,1,1,1",driver:"",code:"",pzcode:"",version:"",versions:[],schemas:u,isLogin:_["a"].isLogin(),isEditor:!1,showList:!1,drawer:!1,currentSchema:"",finalClient:"std"}},computed:{schema_group:function(){return u[this.xf]},mount:function(){var e;return null===(e=c[this.xf])||void 0===e?void 0:e.id},params:function(){var e=this.mount,t=this.version,s=this.code,a=this.pzcode,i=this.xf;return{client:"std",type:"talent",mount:e,version:t,code:JSON.parse(s),pzcode:JSON.parse(a),xf:i}},xfMaps:function(){var e=h()(c);return delete e["山居剑意"],delete e["通用"],e},isEditing:function(){return!!this.currentSchema}},methods:{updateDrawer:function(e){this.drawer=e},parseSchema:function(){var e=this;this.driver.then((function(t){if(e.code){var s={};try{s=JSON.parse(e.code),t.load(s),e.$message({message:"编码解析成功",type:"success"})}catch(a){e.$message.error("编码格式错误")}}}))},reload:function(e){var t=this;this.currentSchema="",this.driver.then((function(e){e.load({version:t.version,xf:t.xf,sq:t.sq,editable:!0,client:t.finalClient})}))},copy:function(e){e&&Object(v["a"])(e,{success_message:"复制奇穴编码成功"})},save:function(){var e=this;this.mount?this.isEditing?Object(p["d"])(this.currentSchema.id,Object(n["a"])({},this.params)).then((function(){e.$notify({type:"success",title:"成功",message:"修改成功"})})):this.$prompt("请输入方案名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"输入不能为空",inputValidator:function(e){if(!e)return"输入不能为空"}}).then((function(t){var s=t.value;Object(p["a"])(Object(n["a"])(Object(n["a"])({},e.params),{},{name:s})).then((function(){e.$notify({type:"success",title:"成功",message:"保存成功"})}))})):this.$notify({type:"warning",title:"提醒",message:"暂未选择心法，请先选择心法"})},saveAs:function(){var e,t=this;this.$prompt("方案另存为","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"输入不能为空",inputValue:null===(e=this.currentSchema)||void 0===e?void 0:e.name,inputValidator:function(e){if(!e)return"输入不能为空"}}).then((function(e){var s=e.value;Object(p["a"])(Object(n["a"])(Object(n["a"])({},t.params),{},{name:s})).then((function(){t.$notify({type:"success",title:"成功",message:"保存成功"})}))}))},use:function(e){this.code=JSON.stringify(e.code),this.pzcode=JSON.stringify(e.pzcode);var t=JSON.parse(this.code);this.xf=t.xf,this.currentSchema=e,this.parseSchema()},init:function(){var e=this;Object(p["b"])(this.finalClient).then((function(t){e.versions=t.data,e.version=e.versions&&e.versions.length&&e.versions[0]["version"],e.driver=new o["a"]({version:e.version,editable:!0,client:e.finalClient});var s=e;d()(document).on("JX3_QIXUE_Change",(function(e,t){var a={};a.version=t.version,a.xf=t.xf,a.sq=t.sq.join(","),s.code=JSON.stringify(t.code),s.pzcode=JSON.stringify(t.overview)}))}))},xficon:function(e){return l["__imgPath"]+"image/xf/"+e+".png"}},mounted:function(){this.init(),this.isEditor=_["a"].isEditor()},watch:{page:function(){this.isLogin&&this.loadList()},finalClient:function(e){this.pzcode="",this.code="",this.xf="其它","std"==e&&(this.sq="1,1,1,1,1,1,1,1,1,1,1,1"),"wujie"==e&&(this.sq="1,1,1,1"),this.init()}},components:{talentDrawer:f["a"],AppLayout:q["a"]}},x=P,V=(s("aa88"),s("2877")),E=Object(V["a"])(x,a,i,!1,null,null,null);t["default"]=E.exports},aa88:function(e,t,s){"use strict";s("fd9e")},fd9e:function(e,t,s){}}]);