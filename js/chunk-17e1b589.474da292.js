(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17e1b589"],{"0f42":function(t,s,a){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{ref:"chart",staticClass:"m-vpk-chart"})},n=[],e=a("2909"),c=(a("a630"),a("d81d"),a("e9f5"),a("ab43"),a("a9e3"),a("d3b7"),a("3ca3"),a("313e")),r=a("5a0c"),u=a.n(r),o={name:"VpkChart",props:{data:{type:Array,default:function(){return[]}},day:{type:Number,default:30}},components:{},data:function(){this.chart=null;var t=Array.from({length:this.day},(function(t,s){return u()().subtract(s,"day").format("MM-DD")})).reverse();return{options:{visualMap:{show:!1,type:"continuous",seriesIndex:1,dimension:0,min:0,max:t.length-1},xAxis:{type:"category",data:t,show:!1},yAxis:{type:"value",show:!1},series:[{data:this.data,type:"line",symbol:"none",lineStyle:{width:1}}],grid:{bottom:4}}}},computed:{},watch:{data:{handler:function(t){var s=Math.max.apply(Math,Object(e["a"])(t)),a=Math.min.apply(Math,Object(e["a"])(t)),i=s-a,n=t.map((function(t){return isNaN((t-a)/i*100)?0:(t-a)/i*100}));this.options.series[0].data=n,this.initChart()},deep:!0,immediate:!0}},methods:{initChart:function(){var t=this;this.$nextTick((function(){t.chart||(t.chart=c["b"](t.$refs.chart)),t.chart.setOption(t.options)}))}},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)}},l=o,p=(a("db5b"),a("2877")),d=Object(p["a"])(l,i,n,!1,null,null,null);s["a"]=d.exports},1635:function(t,s,a){},"232c":function(t,s,a){},"26b9":function(t,s,a){"use strict";a("2c3e");var i=function(){var t=this,s=t._self._c;return t.noMarker?t._e():s("div",{staticClass:"m-vpk-marker"},["public_list"==t.mode&&t.vpk.sticky?s("i",{staticClass:"u-status u-sticky"},[s("i",{staticClass:"el-icon-download"}),s("span",{staticClass:"u-tiny-text"},[t._v("置顶")])]):t._e(),0==t.vpk.status?s("i",{staticClass:"u-status u-status--pending"},[s("i",{staticClass:"el-icon-lock"}),s("span",{staticClass:"u-tiny-text"},[t._v("审核中")])]):t._e(),-1==t.vpk.status?s("i",{staticClass:"u-status u-status--deleted"},[s("i",{staticClass:"el-icon-close"}),s("span",{staticClass:"u-tiny-text"},[t._v("未通过")])]):t._e(),-2==t.vpk.status?s("i",{staticClass:"u-status u-status--draft"},[s("i",{staticClass:"el-icon-edit"}),s("span",{staticClass:"u-tiny-text"},[t._v("草稿")])]):t._e(),"public_list"==t.mode||"public_single"==t.mode?[t.vpk.is_official?s("i",{staticClass:"u-status u-star"},[s("i",{staticClass:"el-icon-cpu"}),s("span",{staticClass:"u-tiny-text"},[t._v("官方")])]):t._e(),t.vpk.star?s("i",{staticClass:"u-status u-star"},[s("i",{staticClass:"el-icon-star-off"}),s("span",{staticClass:"u-tiny-text"},[t._v("精选")])]):t._e()]:t._e()],2)},n=[],e={name:"VpkMarker",props:["vpk","mode"],components:{},data:function(){return{}},computed:{noMarker:function(){return"public_list"==this.mode&&!this.vpk.sticky&&!this.vpk.is_official&&!this.vpk.star}},watch:{},methods:{},created:function(){},mounted:function(){}},c=e,r=(a("5646"),a("2877")),u=Object(r["a"])(c,i,n,!1,null,null,null);s["a"]=u.exports},"2a9a":function(t,s,a){},"498a":function(t,s,a){"use strict";var i=a("23e7"),n=a("58a8").trim,e=a("c8d2");i({target:"String",proto:!0,forced:e("trim")},{trim:function(){return n(this)}})},5646:function(t,s,a){"use strict";a("232c")},"5df9":function(t,s,a){"use strict";a("2a9a")},b8d2:function(t,s,a){"use strict";var i=function(){var t=this,s=t._self._c;return t.list&&t.list.length?s("div",{staticClass:"m-vpk-list m-pkg-rank__table",class:"m-vpk-list--".concat(t.mode)},t._l(t.list,(function(a){return s("div",{key:a.uuid,staticClass:"m-vpk-item",on:{click:function(s){return t.viewVpk(a)}}},[s("Avatar",{staticClass:"u-avatar",attrs:{uid:a.user_id,url:t.getUserMeta(a,"avatar"),frame:t.getUserMeta(a,"user_avatar_frame"),size:"xs"},on:{click:function(t){t.stopPropagation()}}}),s("div",{staticClass:"m-vpk-item__content"},[s("span",{staticClass:"u-id"},[s("i",{staticClass:"u-type-label"},[t._v("UUID")]),s("i",{staticClass:"u-type-value"},[t._v(" "+t._s(a.uuid)+" ")])]),s("span",{staticClass:"m-vpk-item__title"},[s("span",{staticClass:"u-title"},[t._v(t._s(a.title||"未命名")+" ")])]),s("div",{staticClass:"u-meta"},[s("span",{staticClass:"u-stat"},[s("VpkMarker",{staticClass:"u-marker",attrs:{vpk:a,mode:t.mode}}),s("span",{staticClass:"u-count u-status"},[s("i",{staticClass:"el-icon-microphone u-icon"}),s("span",{staticClass:"u-value"},[t._v(t._s(a.voices_count)+"/160")])]),s("span",{staticClass:"u-status i-client u-mark",class:"i-client-".concat(a.client||"std")},[s("span",{staticClass:"u-tiny-text"},[t._v(t._s(t.showClient(a)))])]),t._l(a.tags,(function(a){return s("div",{key:a,staticClass:"u-tag u-label u-status",on:{click:function(s){return s.stopPropagation(),t.onTagClick(a)}}},[s("span",{staticClass:"u-value"},[t._v(t._s(a))])])}))],2)])]),"mine_list"===t.mode?s("div",{staticClass:"m-vpk-action",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"small"},on:{click:function(s){return t.editVpk(a)}}},[t._v("编辑")]),s("el-dropdown",{attrs:{trigger:"click"}},[s("el-button",{attrs:{plain:"",size:"small"}},[t._v(" 更多"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(s){return t.deleteVpk(a)}}},[s("i",{staticClass:"el-icon-remove-outline"}),t._v("删除")])],1)],1)],1):s("div",{staticClass:"m-vpk-item__misc"},[t.isPhone?t._e():s("chartVue",{attrs:{data:a.download_trend}}),s("span",{staticClass:"u-misc"},[s("time",{staticClass:"u-time"},[s("i",{staticClass:"el-icon-time"}),t._v("Updated at "+t._s(t.showTime(a.updated_at)))]),s("span",{staticClass:"u-author"},[t._v("By "),s("a",{attrs:{href:t.authorLink(a.user_id),target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(t.getUserMeta(a,"display_name")||"匿名"))])])])],1)],1)})),0):t._e()},n=[],e=(a("14d9"),a("ac1f"),a("5319"),a("8f3d")),c=a("26b9"),r=a("4297"),u=a("5a0c"),o=a.n(u),l=a("85e4"),p=a("65c2"),d=a("0f42"),v={name:"VpkList",props:{list:{type:Array,default:function(){return[]}},mode:{type:String,default:"public_list"}},components:{Avatar:e["a"],VpkMarker:c["a"],chartVue:d["a"]},data:function(){return{isPhone:window.innerWidth<768}},computed:{},watch:{},methods:{showClient:function(t){var s=t.client||"std";return p["__clients"][s]},nl2br:function(t){return t.replace(/\n/g,"<br />")},getUserMeta:function(t,s){var a;return(null===t||void 0===t||null===(a=t.user)||void 0===a?void 0:a[s])||""},editVpk:function(t){this.$router.push({name:"update_vpk",params:{id:t.id}})},deleteVpk:function(t){var s=this;this.$alert("你确定要删除这个语音包吗？该操作不可恢复。","删除确认",{confirmButtonText:"确定",type:"warning",callback:function(a){"confirm"==a&&Object(r["d"])(t.id).then((function(t){s.$notify({title:"删除成功",type:"success"}),s.$emit("reload")}))}})},showTime:function(t){return o()(t).format("YYYY-MM-DD HH:mm")},authorLink:l["a"],getVpkStat:function(t,s){var a;return null===(a=t.link_ext_info)||void 0===a?void 0:a[s]},onTagClick:function(t){this.$router.push({name:"vpk",query:{tag:t}})},getVpkUrl:function(t){var s={public_list:"public_view_vpk",mine_list:"mine_view_vpk",manage_list:"manage_view_vpk"}[this.mode];return{name:s,params:{id:t.id}}},viewVpk:function(t){var s=this.$router.resolve(this.getVpkUrl(t));window.open(s.href,"_blank")}},created:function(){},mounted:function(){}},m=v,f=(a("5df9"),a("2877")),_=Object(f["a"])(m,i,n,!1,null,null,null);s["a"]=_.exports},c8d2:function(t,s,a){"use strict";var i=a("5e77").PROPER,n=a("d039"),e=a("5899"),c="​᠎";t.exports=function(t){return n((function(){return!!e[t]()||c[t]()!==c||i&&e[t].name!==t}))}},db5b:function(t,s,a){"use strict";a("1635")}}]);