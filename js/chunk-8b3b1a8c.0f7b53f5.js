(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b3b1a8c"],{"36cc":function(t,e,i){},"621f":function(t,e,i){"use strict";i.r(e);i("caad"),i("b0c0"),i("2532");var l=function(){var t=this,e=t._self._c;return e("Wrapper",[e("div",{staticClass:"m-pz-setting"},[e("h2",{staticClass:"m-pz-title"},[e("i",{staticClass:"el-icon-setting"}),t._v(" 偏好设置")]),e("div",{staticClass:"m-setting-box"},[e("el-form",{ref:"form",attrs:{model:t.globalSetting,"label-width":"140px","label-position":"left"}},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("扩展功能")]),e("el-form-item",{attrs:{label:"是否自动保存"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.globalSetting.autosave,callback:function(e){t.$set(t.globalSetting,"autosave",e)},expression:"globalSetting.autosave"}}),e("span",{staticClass:"u-tip"},[t._v("（2分钟自动保存一次）")])],1),e("el-divider",{attrs:{"content-position":"left"}},[t._v("默认设置")]),e("el-form-item",{attrs:{label:"默认精炼等级"}},[e("div",{staticClass:"u-setting-val"},[e("el-input-number",{staticStyle:{width:"200px"},attrs:{min:0,max:6,size:"small"},model:{value:t.globalSetting.strength,callback:function(e){t.$set(t.globalSetting,"strength",e)},expression:"globalSetting.strength"}})],1)]),e("el-form-item",{attrs:{label:"默认镶嵌等级"}},[e("div",{staticClass:"u-setting-val"},[e("el-input-number",{staticStyle:{width:"200px"},attrs:{min:0,max:8,size:"small"},model:{value:t.globalSetting.embedding,callback:function(e){t.$set(t.globalSetting,"embedding",e)},expression:"globalSetting.embedding"}})],1)]),e("el-form-item",{attrs:{label:"筛选范围"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 筛选范围 "),e("span",{staticClass:"u-tip"},[t._v("(重制)")])]),e("div",{staticClass:"u-setting-val"},[e("el-input-number",{staticStyle:{width:"160px"},attrs:{size:"small",min:t.SETTINGS.std_level_lower_edge,max:t.SETTINGS.std_level_upper_edge},model:{value:t.globalSetting.std_min_level,callback:function(e){t.$set(t.globalSetting,"std_min_level",e)},expression:"globalSetting.std_min_level"}}),t._v(" 至 "),e("el-input-number",{staticStyle:{width:"160px"},attrs:{size:"small",min:t.SETTINGS.std_level_lower_edge,max:t.SETTINGS.std_level_upper_edge},model:{value:t.globalSetting.std_max_level,callback:function(e){t.$set(t.globalSetting,"std_max_level",e)},expression:"globalSetting.std_max_level"}}),e("span",{staticClass:"u-tip"},[t._v("品质等级")])],1)]),e("el-form-item",{attrs:{label:"筛选范围"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 筛选范围 "),e("span",{staticClass:"u-tip"},[t._v("(缘起)")])]),e("div",{staticClass:"u-setting-val"},[e("el-input-number",{staticStyle:{width:"160px"},attrs:{size:"small",min:t.SETTINGS.origin_level_lower_edge,max:t.SETTINGS.origin_level_upper_edge},model:{value:t.globalSetting.origin_min_level,callback:function(e){t.$set(t.globalSetting,"origin_min_level",e)},expression:"globalSetting.origin_min_level"}}),t._v(" 至 "),e("el-input-number",{staticStyle:{width:"160px"},attrs:{size:"small",min:t.SETTINGS.origin_level_lower_edge,max:t.SETTINGS.origin_level_upper_edge},model:{value:t.globalSetting.origin_max_level,callback:function(e){t.$set(t.globalSetting,"origin_max_level",e)},expression:"globalSetting.origin_max_level"}}),e("span",{staticClass:"u-tip"},[t._v("品质等级")])],1)]),e("el-form-item",{attrs:{label:"关注心法"}},[e("div",{staticClass:"u-setting-val"},[e("div",{staticClass:"m-pz-xf u-setting-xf"},[t._l(t.globalSetting.star_mounts,(function(i,l){return e("el-radio",{key:l,attrs:{label:String(i)}},[e("img",{staticClass:"u-pic",attrs:{src:t._f("showMountIcon")(i),alt:i.name}})])})),e("el-popover",{attrs:{"popper-class":"m-raid-members-xfbox",placement:"top",trigger:"click","popper-options":{boundariesElement:"body"}}},[e("div",{staticClass:"u-xf-content"},t._l(t.xfMaps,(function(i){return e("span",{key:i.id,on:{click:function(e){return t.starMount(i.id)}}},[e("img",{staticClass:"u-member-icon",class:{"u-selected-member-icon":t.globalSetting.star_mounts.includes(i.id)},attrs:{src:t._f("showMountIcon")(i.id),alt:i.name,title:i.name}})])})),0),e("el-button",{attrs:{slot:"reference",size:"mini",type:"primary",icon:"el-icon-star-on"},slot:"reference"},[t._v("选择心法"),e("span",{staticClass:"u-star-mount"},[t._v(t._s(t.star_mounts_count)+"/3")])])],1)],2)])]),e("el-form-item",{attrs:{label:"快捷按键"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.globalSetting.key_shortcut,callback:function(e){t.$set(t.globalSetting,"key_shortcut",e)},expression:"globalSetting.key_shortcut"}}),e("span",{staticClass:"u-tip"},[t._v("（可以使用 Ctrl + Alt + E 快捷获取数据版）")])],1),e("el-form-item",{attrs:{"label-width":"0"}},[e("el-button",{staticClass:"u-btn",attrs:{type:"primary",loading:t.processing},on:{click:function(e){return t.submit()}}},[t._v("保存")])],1)],1)],1)])])},n=[],s=i("5530"),a=(i("4de4"),i("c740"),i("14d9"),i("a434"),i("e9f5"),i("7d54"),i("e9c4"),i("d3b7"),i("07ac"),i("159b"),i("2af8")),o=i("57bc"),r=i("29ba"),c=i("46d4"),g=i("2ef0"),u={autosave:0,strength:6,embedding:6,std_min_level:r.std_min_level,std_max_level:r.std_max_level,origin_min_level:r.origin_min_level,origin_max_level:r.origin_max_level,star_mounts:[],key_shortcut:0},_={name:"Setting",props:[],components:{Wrapper:a["a"]},data:function(){return{globalSetting:Object(g["cloneDeep"])(u),processing:!1,SETTINGS:r,sync:!1,xf_map:c}},computed:{isLogin:function(){return this.$store.state.is_login},xfMaps:function(){var t=[];return Object.values(c).forEach((function(e){e.id&&t.push(e)})),t.filter((function(t){return 10145!==t.id}))},star_mounts_count:function(){return this.globalSetting.star_mounts.length||0}},methods:{submit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.processing=!0,Object(o["i"])(this.globalSetting).then((function(){t.$store.commit("SET_STATE",{key:"setting",value:t.globalSetting}),sessionStorage.setItem("pz_setting",JSON.stringify(t.globalSetting)),e||t.$notify.success({title:"成功",message:"全局设置保存成功"})})).finally((function(){t.processing=!1}))},init:function(){var t=this;this.isLogin&&Object(o["b"])().then((function(e){var i=e.data.data;t.globalSetting=Object(s["a"])(Object(s["a"])({},Object(g["cloneDeep"])(u)),Object(g["pickBy"])(i,(function(t,e){return null!==t&&void 0!==u[e]}))),t.globalSetting.star_mounts||(t.globalSetting.star_mounts=[]),t.$store.commit("SET_STATE",{key:"setting",value:i}),sessionStorage.setItem("pz_setting",JSON.stringify(i)),t.sync||t.checkSetting(t.globalSetting)}))},checkSetting:function(t){var e=this;(t["std_min_level"]<r["std_min_level"]||t["std_max_level"]<r["std_min_level"])&&(this.globalSetting["std_min_level"]=r["std_min_level"],this.globalSetting["std_max_level"]=r["std_max_level"]),(t["origin_min_level"]<r["origin_min_level"]||t["origin_max_level"]<r["origin_min_level"])&&(this.globalSetting["origin_min_level"]=r["origin_min_level"],this.globalSetting["origin_max_level"]=r["origin_max_level"]),this.submit(!0).then((function(){e.sync=!0,sessionStorage.setItem("pz_setting_sync",1)}))},starMount:function(t){var e=this.globalSetting.star_mounts;if(e.includes(t)){var i=e.findIndex((function(e){return e===t}));e.splice(i,1)}else e.length<3&&e.unshift(t)}},filters:{},created:function(){this.sync=!!~~sessionStorage.getItem("pz_setting_sync")},mounted:function(){this.init()}},m=_,v=(i("f6f6"),i("2877")),d=Object(v["a"])(m,l,n,!1,null,null,null);e["default"]=d.exports},c740:function(t,e,i){"use strict";var l=i("23e7"),n=i("b727").findIndex,s=i("44d2"),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),l({target:"Array",proto:!0,forced:o},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s(a)},f6f6:function(t,e,i){"use strict";i("36cc")}}]);