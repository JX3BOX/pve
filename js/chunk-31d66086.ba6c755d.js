(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31d66086"],{"0f42":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{ref:"chart",staticClass:"m-vpk-chart"})},s=[],a=i("2909"),c=(i("a630"),i("d81d"),i("e9f5"),i("ab43"),i("a9e3"),i("d3b7"),i("3ca3"),i("313e")),r=i("5a0c"),o=i.n(r),u={name:"VpkChart",props:{data:{type:Array,default:function(){return[]}},day:{type:Number,default:30}},components:{},data:function(){this.chart=null;var t=Array.from({length:this.day},(function(t,e){return o()().subtract(e,"day").format("MM-DD")})).reverse();return{options:{visualMap:{show:!1,type:"continuous",seriesIndex:1,dimension:0,min:0,max:t.length-1},xAxis:{type:"category",data:t,show:!1},yAxis:{type:"value",show:!1},series:[{data:this.data,type:"line",symbol:"none",lineStyle:{width:1}}],grid:{bottom:4}}}},computed:{},watch:{data:{handler:function(t){var e=Math.max.apply(Math,Object(a["a"])(t)),i=Math.min.apply(Math,Object(a["a"])(t)),n=e-i,s=t.map((function(t){return isNaN((t-i)/n*100)?0:(t-i)/n*100}));this.options.series[0].data=s,this.initChart()},deep:!0,immediate:!0}},methods:{initChart:function(){var t=this;this.$nextTick((function(){t.chart||(t.chart=c["b"](t.$refs.chart)),t.chart.setOption(t.options)}))}},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)}},l=u,d=(i("db5b"),i("2877")),m=Object(d["a"])(l,n,s,!1,null,null,null);e["a"]=m.exports},1635:function(t,e,i){},"174d":function(t,e,i){"use strict";i("3117")},"23f6":function(t,e,i){"use strict";i("a2c5")},3117:function(t,e,i){},"480d":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-pkg-list"},t._l(t.data,(function(i){return e("pkg-list-item",{key:i.id,attrs:{item:i,selecting:t.selecting},on:{update:t.onUpdate}})})),1)},s=[],a=(i("a15b"),i("fb6a"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-list-item m-pkg-list__item",class:{"is-selecting":t.selecting,"is-selected":t.selecting&&t.isSelected,"is-raw-pkg":t.item.is_raw},on:{click:t.onClick}},[e("div",{staticClass:"m-item-main"},[e("Avatar",{staticClass:"u-avatar",attrs:{uid:t.item.user_id,url:t.getUserMeta(t.item,"user_avatar"),frame:t.getUserMeta(t.item,"user_avatar_frame"),size:"xs"},on:{click:function(t){t.stopPropagation()}}}),e("div",{staticClass:"m-item-main__content"},[e("div",{staticClass:"m-detail-meta"},[e("span",{staticClass:"u-head u-feed"},[e("i",{staticClass:"u-type-label",class:"type-"+t.item.type},[t._v(t._s(t.typeName))]),e("i",{staticClass:"u-type-value",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.copy(t.item.key)}}},[t._v(" "+t._s(t.item.key||"-")+" ")]),t.item.head?e("i",{staticClass:"u-type-value u-uuid",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.copy(t.item.head)}}},[t._v(" "+t._s(t.item.head||"-")+" ")]):t._e()])]),e("div",{staticClass:"m-item-detail"},[t.isMine?[t.item.status?e("span",{staticClass:"u-mark u-status"},[e("i",{staticClass:"el-icon-lock"}),t._v(" "),e("span",{staticClass:"u-tiny-text"},[t._v("私有")])]):t._e(),t.item.is_important?e("span",{staticClass:"u-mark u-sticky"},[e("i",{staticClass:"el-icon-download"}),e("span",{staticClass:"u-tiny-text"})]):t._e()]:t._e(),e("span",{staticClass:"u-title"},[t._v(t._s(t.item.title))])],2),e("div",{staticClass:"m-item-extend"},[t.item.is_sticky?e("span",{staticClass:"u-sticky u-mark"},[e("i",{staticClass:"el-icon-download"}),e("span",{staticClass:"u-tiny-text"},[t._v("置顶")])]):t._e(),t.getExtendMeta(t.item,"star")?e("span",{staticClass:"u-star u-mark"},[e("i",{staticClass:"el-icon-star-off"}),t._v(" "),e("span",{staticClass:"u-tiny-text"},[t._v("精选")])]):t._e(),t.item.is_jx3box?e("span",{staticClass:"u-star u-mark"},[e("i",{staticClass:"el-icon-cpu"}),t._v(" "),e("span",{staticClass:"u-tiny-text"},[t._v("官方")])]):t._e(),t.showLang?t._e():e("span",{staticClass:"u-client i-client u-mark",class:"i-client-".concat(t.item.client)},[e("span",{staticClass:"u-tiny-text"},[t._v(t._s(t.showClient))])]),t.showLang?e("span",{staticClass:"u-client i-client u-mark i-client-tr"},[e("span",{staticClass:"u-tiny-text"},[t._v(t._s(t.showLang))])]):t._e(),e("span",{staticClass:"u-mode u-mark"},[e("span",{staticClass:"u-tiny-text"},[t._v(t._s(t.showMode))])]),t.item.pkg_tag&&t.item.pkg_tag.length?e("span",{staticClass:"u-tags",attrs:{title:"标签:".concat(t.getPkgTags(t.item.pkg_tag).join(","))}},[3!=t.item.type?t._l(t.uniqData(t.item.pkg_tag).slice(0,10),(function(i){return e("span",{key:i.tag_name,staticClass:"u-tag u-mark"},[e("span",{staticClass:"u-tiny-text"},[t._v(t._s(i.tag_name))])])})):t._l(t.uniqData(t.item.pkg_tag).slice(0,10),(function(i){return e("span",{key:i.tag_name,staticClass:"u-tag u-mark"},[e("span",{staticClass:"u-tiny-text"},[t._v(t._s(t.mapIndex[i.tag_name]))])])}))],2):t._e()])])],1),t.isMine&&!t.selecting?e("div",{staticClass:"m-pkg-action",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"small"},on:{click:t.onEdit}},[t._v("编辑")]),e("el-dropdown",{attrs:{trigger:"click"}},[e("el-button",{attrs:{plain:"",size:"small"}},[t._v(" 更多"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.setImportant.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-top"}),t._v(t._s(t.item.is_important?"取消置顶":"置顶")+" ")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.setPublic.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-view"}),t._v(t._s(t.item.status?"设为公开":"设为私有")+" ")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.clearPkg.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-circle-close"}),t._v("清空")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.deletePkg.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-remove-outline"}),t._v("删除")])],1)],1)],1):t.selecting?t._e():e("div",{staticClass:"m-item-meta"},[e("chartVue",{attrs:{data:t.item.trend}}),e("span",{staticClass:"u-misc"},[e("time",{staticClass:"u-time"},[e("i",{staticClass:"el-icon-time"}),t._v("Updated at "+t._s(t.showTime(t.item.updated_at)))]),e("span",{staticClass:"u-author"},[t._v("By "),e("a",{attrs:{href:t.authorLink(t.item.user_id),target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(t.getUserMeta(t.item,"display_name")||"匿名"))])])])],1)])}),c=[],r=i("c7eb"),o=i("1da1"),u=i("5530"),l=(i("7db0"),i("d81d"),i("14d9"),i("b0c0"),i("e9f5"),i("f665"),i("ab43"),i("d3b7"),i("65c2")),d=i("1f7f"),m=i("d669"),p=i("85e4"),f=i("2ef0"),h=i("0f42"),_=i("8f3d"),g=i("c9d2"),v=i("2f62"),k=i("c375"),y={name:"PkgListItem",components:{chartVue:h["a"],Avatar:_["a"]},props:{item:{type:Object,default:function(){}},selecting:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(u["a"])(Object(u["a"])({},Object(v["c"])({pkg_selected:function(t){return t.pkg_selected},mapIndex:function(t){return t.mapIndex}})),{},{isSelected:function(){var t=this;return this.pkg_selected.find((function(e){return e.id==t.item.id}))},isMine:function(){return"pkg_mine"==this.$route.name},isAuthor:function(){return this.item.user_id==g["a"].getInfo().uid},toLink:function(){return this.isMine||this.isAuthor?"/pkg/".concat(this.item.id,"/raw"):"/pkg/".concat(this.item.id)},showClient:function(){return l["__clients"][this.item.client]},showMode:function(){return 0==this.item.is_raw?"云数据":"本地数据"},showLang:function(){return"cn"!=this.item.lang&&"繁體"},typeName:function(){return k["pkg_types"][this.item.type]}}),methods:{copy:function(t){navigator.clipboard.writeText(t),this.$notify.success({title:"复制成功",message:t})},showTime:m["c"],authorLink:p["a"],uniqData:function(t){return Object(f["uniqBy"])(t,"tag_name")},getPkgTags:function(t){return this.uniqData(t).map((function(t){return t.tag_name}))},getUserMeta:function(t,e){var i;return(null===t||void 0===t||null===(i=t.pkg_user)||void 0===i?void 0:i[e])||""},getExtendMeta:function(t,e){var i;return(null===t||void 0===t||null===(i=t.pkg_extend)||void 0===i?void 0:i[e])||""},setImportant:function(){var t=this,e={is_important:~~!this.item.is_important};Object(d["I"])(this.item.id,e).then((function(e){t.$message.success("操作成功"),t.$emit("update")}))},onEdit:function(){var t,e={1:"pkg_edit",2:"target_edit",3:"mark_edit"}[null===(t=this.item)||void 0===t?void 0:t.type];this.$router.push({name:e,params:{id:this.item.id}})},deletePkg:function(){var t=this;this.item.id&&this.$alert("确定永久删除「".concat(this.item.title,"」么？该操作无法撤销。"),"消息",{confirmButtonText:"确定",type:"warning",callback:function(e){"confirm"==e&&Object(d["f"])(t.item.id).then(Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$message({message:"删除成功！",type:"success"}),t.$emit("update"),e.next=4,Object(d["C"])(t.item.key);case 4:case"end":return e.stop()}}),e)})))).catch((function(t){console.log(t)}))}})},clearPkg:function(){var t=this;this.item.id&&this.$alert("确定清空「".concat(this.item.title,"」么？该操作无法撤销。"),"消息",{confirmButtonText:"确定",type:"warning",callback:function(e){"confirm"==e&&Object(d["e"])(t.item.id).then(Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$message({message:"清空成功！",type:"success"}),t.$emit("update");case 2:case"end":return e.stop()}}),e)})))).catch((function(t){console.log(t)}))}})},onClick:function(){if(this.selecting)this.item.is_raw||this.togglePkgSelected();else{var t=this.$router.resolve(this.toLink);window.open(t.href,"_blank")}},togglePkgSelected:function(){this.$store.commit("TOGGLE_PKG_SELECT",this.item)},setPublic:function(){var t=this,e={status:~~!this.item.status};Object(d["H"])(this.item.id,e).then((function(){t.$message.success("操作成功"),t.$emit("update")}))}}},b=y,C=(i("5788"),i("2877")),w=Object(C["a"])(b,a,c,!1,null,null,null),x=w.exports,O={name:"pkg-list",props:{data:{type:Array,default:function(){return[]}},selecting:{type:Boolean,default:!1}},components:{PkgListItem:x},data:function(){return{}},computed:{},watch:{},methods:{onUpdate:function(){this.$emit("update")}},created:function(){},mounted:function(){}},j=O,P=(i("174d"),Object(C["a"])(j,n,s,!1,null,null,null));e["a"]=P.exports},"498a":function(t,e,i){"use strict";var n=i("23e7"),s=i("58a8").trim,a=i("c8d2");n({target:"String",proto:!0,forced:a("trim")},{trim:function(){return s(this)}})},5788:function(t,e,i){"use strict";i("71b5")},"71b5":function(t,e,i){},9449:function(t,e,i){"use strict";i("4de4"),i("e9f5"),i("910d"),i("d3b7");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-filter-client"},[e("ul",t._l(t.clients,(function(i,n){return e("li",{key:n,staticClass:"u-client",class:{on:t.client==n},on:{click:function(e){return t.filter(n)}}},[t._v(t._s(i))])})),0)])},s=[],a={all:"全部版本",std:"重制",origin:"缘起"},c={name:"clientBy",props:{modelValue:{type:String,default:"all"}},model:{prop:"modelValue",event:"filter"},data:function(){return{client:"",clients:a}},watch:{modelValue:{immediate:!0,handler:function(t){this.client=t}}},methods:{filter:function(t){this.client=t,this.$emit("filter",t),this.$forceUpdate()}}},r=c,o=(i("23f6"),i("2877")),u=Object(o["a"])(r,n,s,!1,null,null,null);e["a"]=u.exports},a2c5:function(t,e,i){},c8d2:function(t,e,i){"use strict";var n=i("5e77").PROPER,s=i("d039"),a=i("5899"),c="​᠎";t.exports=function(t){return s((function(){return!!a[t]()||c[t]()!==c||n&&a[t].name!==t}))}},db5b:function(t,e,i){"use strict";i("1635")},dd42:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("e9f5"),i("7d54"),i("b64b"),i("d3b7"),i("159b");var n=function(t){var e={};return Object.keys(t).forEach((function(i){void 0!==t[i]&&null!==t[i]&&""!==t[i]&&(e[i]=t[i])})),e}}}]);