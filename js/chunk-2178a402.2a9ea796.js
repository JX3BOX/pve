(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2178a402"],{4989:function(t,a,e){},"653c":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"p-review"},[a("el-tabs",{model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[a("el-tab-pane",{attrs:{name:"vpk"},scopedSlots:t._u([{key:"label",fn:function(){return[a("i",{staticClass:"el-icon-headset"}),t._v(" 语音包审核 ")]},proxy:!0}])}),a("el-tab-pane",{attrs:{name:"voice"},scopedSlots:t._u([{key:"label",fn:function(){return[a("i",{staticClass:"el-icon-microphone"}),t._v(" 语音审核 ")]},proxy:!0}])})],1),"vpk"===t.active?a("ReviewVpk"):t._e(),"voice"===t.active?a("ReviewVoice"):t._e()],1)},n=[],i=(e("ac1f"),e("5319"),e("841c"),e("498a"),function(){var t=this,a=t._self._c;return a("div",{staticClass:"p-vpk-public p-vpk-list"},[a("div",{staticClass:"m-archive-search"},[a("el-select",{model:{value:t.status,callback:function(a){t.status=a},expression:"status"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"待审核",value:0}}),a("el-option",{attrs:{label:"已通过",value:1}}),a("el-option",{attrs:{label:"未通过",value:-1}})],1),a("el-input",{attrs:{placeholder:"请输入搜索内容",clearable:""},on:{clear:t.onSearchChange},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.onSearchChange.apply(null,arguments)}},model:{value:t.search,callback:function(a){t.search="string"===typeof a?a.trim():a},expression:"search"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",{staticClass:"u-search"},[t._v("关键词")])]),a("el-button",{staticClass:"u-btn",attrs:{slot:"append",icon:"el-icon-position"},on:{click:t.onSearchChange},slot:"append"})],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-vpk-review__list"},[t.list&&t.list.length?[a("VpkList",{attrs:{list:t.list,mode:"manage_list"},on:{reload:t.loadData}}),a("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(a){t.page=a},"update:current-page":function(a){t.page=a},"current-change":t.loadData}})]:[a("el-empty",{staticClass:"m-vpk-null",attrs:{description:"暂无数据","image-size":120}})]],2)])}),l=[],o=(e("d3b7"),e("4297")),r=e("b8d2"),u=e("dd42"),c={name:"PublicVpk",components:{VpkList:r["a"]},props:[],data:function(){return{search:"",status:0,per:10,total:0,page:1,list:[],loading:!1}},computed:{params:function(){return{pageIndex:this.page,pageSize:this.per,status:this.status}}},watch:{"$route.query":{deep:!0,handler:function(t){null!==t&&void 0!==t&&t.tag&&(this.tag=t.tag)}},status:function(){this.page=1,this.loadData()}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;this.loading=!0;var a=Object(u["a"])(this.params);""!==this.status&&(a.status=this.status),Object(o["f"])(a).then((function(a){t.list=a.data.data.list,t.total=a.data.data.page.total})).finally((function(){t.loading=!1}))},setTag:function(t){this.tag=this.tag===t?"":t},onSearchChange:function(){this.page=1,this.loadData()}}},d=c,p=(e("d9ff"),e("2877")),v=Object(p["a"])(d,i,l,!1,null,null,null),f=v.exports,g=function(){var t=this,a=t._self._c;return a("div",{staticClass:"p-vpk-public p-vpk-list p-vpk-voice"},[a("div",{staticClass:"m-archive-search m-voice-filter"},[a("el-select",{model:{value:t.status,callback:function(a){t.status=a},expression:"status"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"待审核",value:0}}),a("el-option",{attrs:{label:"已通过",value:1}}),a("el-option",{attrs:{label:"未通过",value:-1}})],1),a("el-input",{model:{value:t.vpk_id,callback:function(a){t.vpk_id=a},expression:"vpk_id"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("语音包ID")])]),a("el-select",{staticClass:"u-type",model:{value:t.is_upgrade,callback:function(a){t.is_upgrade=a},expression:"is_upgrade"}},[a("span",{attrs:{slot:"prefix"},slot:"prefix"},[t._v("类型")]),a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"全新",value:0}}),a("el-option",{attrs:{label:"迭代",value:1}})],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-vpk-review__list"},[t.list&&t.list.length?[a("el-table",{attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",{staticClass:"u-voice-status",class:t.getVoiceStatusClass(s)},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 428 428","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[a("path",{attrs:{d:"M8 181.2a8 8 0 00-8 8v49.6a8 8 0 0016 0v-49.6a8 8 0 00-8-8zM39.68 140.8a8 8 0 00-8 8v130.4a8 8 0 0016 0V148.8a8 8 0 00-8-8zM71.36 154.8a8 8 0 00-8 8v102.4a8 8 0 0016 0V162.8a8 8 0 00-8-8zM103.04 181.2a8 8 0 00-8 8v49.6a8 8 0 0016 0v-49.6a8 8 0 00-8-8zM134.8 111.52a8 8 0 00-8 8v188.96a8 8 0 0016 0V119.52a8 8 0 00-8-8zM166.48 150.56a8 8 0 00-8 8v110.88a8 8 0 0016 0V158.56a8 8 0 00-8-8zM198 163.92a8 8 0 00-8 8v84.16a8 8 0 0016 0v-84.16a8 8 0 00-8-8zM230 181.2a8 8 0 00-8 8v49.6a8 8 0 0016 0v-49.6a8 8 0 00-8-8zM261.52 163.92a8 8 0 00-8 8v84.16a8 8 0 0016 0v-84.16a8 8 0 00-8-8zM293.2 150.56a8 8 0 00-8 8v110.88a8 8 0 0016 0V158.56a8 8 0 00-8-8zM324.96 111.52a8 8 0 00-8 8v188.96a8 8 0 0016 0V119.52a8 8 0 00-8-8zM356.64 154.8a8 8 0 00-8 8v102.4a8 8 0 0016 0V162.8a8 8 0 00-8-8zM388.32 181.2a8 8 0 00-8 8v49.6a8 8 0 0016 0v-49.6a8 8 0 00-8-8zM420 181.2a8 8 0 00-8 8v49.6a8 8 0 0016 0v-49.6a8 8 0 00-8-8z"}})]),t._v(" （"+t._s(t.getVoiceStatus(s))+"） ")])]}}],null,!1,2517564582)}),a("el-table-column",{attrs:{label:"试听",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[s?[a("el-button",{attrs:{type:"primary",size:"small",icon:s.isPlaying?"el-icon-video-pause":"el-icon-video-play",disabled:!!t.currentId&&t.currentId!==s.id},on:{click:function(a){return t.play(s)}}},[t._v(t._s(s["isPlaying"]?"停止":"试听"))])]:t._e()]}}],null,!1,998683706)}),a("el-table-column",{attrs:{label:"标识符"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.row;return[t._v(" "+t._s(t.getSlugMeta(e,"remark"))+" ")]}}],null,!1,296204216)}),a("el-table-column",{attrs:{label:"用户备注"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.row;return[t._v(" "+t._s(e.remark)+" ")]}}],null,!1,3780610973)}),a("el-table-column",{attrs:{label:"所属语音包"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("a",{attrs:{href:"/dbm/vpk/manage/".concat(s.vpk_id),target:"_blank"}},[a("el-tag",[t._v("语音包 : "+t._s(s.vpk_id))])],1)]}}],null,!1,2760413657)}),a("el-table-column",{attrs:{label:"类型"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[s.replace_target?a("el-tag",{attrs:{type:"warning"}},[t._v("迭代")]):a("el-tag",{attrs:{type:"success"}},[t._v("全新")])]}}],null,!1,3147517475)}),a("el-table-column",{attrs:{label:"上次处理人"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[s.assessor?a("div",{staticClass:"u-assessor"},[a("Avatar",{staticClass:"u-avatar",attrs:{uid:s.assessor.id,url:s.assessor.avatar,size:"xxs"}}),t._v(" "+t._s(s.assessor.display_name)+" ")],1):t._e()]}}],null,!1,3325496898)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",{staticClass:"u-voice-op"},[a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check"},on:{click:function(a){return t.onAudit(s,"pass")}}},[t._v("通过")]),a("el-button",{attrs:{plain:"",size:"small",icon:"el-icon-circle-close"},on:{click:function(a){return t.onAudit(s,"refuse")}}},[t._v("拒绝")])],1)]}}],null,!1,2350477326)})],1),a("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(a){t.page=a},"update:current-page":function(a){t.page=a},"current-change":t.loadData}})]:[a("el-empty",{staticClass:"m-vpk-null",attrs:{description:"暂无数据","image-size":120}})]],2),a("audioPlayerVue",{ref:"player",on:{ended:t.onEnded}})],1)},h=[],m=e("5530"),b=(e("4de4"),e("7db0"),e("d81d"),e("13d5"),e("e9f5"),e("910d"),e("f665"),e("ab43"),e("9485"),e("584f")),_=e("de76"),k=e("fda2"),y=e("32e7"),w={name:"ReviewVoice",components:{audioPlayerVue:_["a"]},data:function(){return{status:0,vpk_id:"",is_upgrade:1,page:1,per:10,total:0,list:[],loading:!1,currentId:"",slugs:{}}},computed:{params:function(){var t={pageIndex:this.page,pageSize:this.per,status:this.status,vpk_id:this.vpk_id,is_upgrade:this.is_upgrade};return Object(u["a"])(t)},resetParams:function(){return[this.status,this.vpk_id,this.is_upgrade,this.pageSize]}},watch:{params:{immediate:!0,deep:!0,handler:function(){this.loadData()}},resetParams:{immediate:!0,deep:!0,handler:function(){this.page=1}}},mounted:function(){this.loadSlug()},methods:{getUserMeta:function(t,a){var e;return(null===t||void 0===t||null===(e=t.assessor)||void 0===e?void 0:e[a])||""},loadData:function(){var t=this;this.loading=!0,Object(b["c"])(this.params).then((function(a){var e;t.list=((null===(e=a.data.data)||void 0===e?void 0:e.list)||[]).map((function(t){return Object(m["a"])(Object(m["a"])({},t),{},{isPlaying:!1})})),t.total=a.data.data.page.total,t.currentId=""})).finally((function(){t.loading=!1}))},loadSlug:function(){var t=this;this.slugLoading=!0,Object(y["a"])().then((function(a){var e;t.slugs=null===(e=a.data.data)||void 0===e?void 0:e.reduce((function(t,a){return t[a.slug]={group_name:a.group_name,remark:a.remark,slug:a.slug},t}),{})})).finally((function(){t.slugLoading=!1}))},getVoiceStatus:function(t){var a={"-1":"未通过",0:"审核中",1:"已通过"};return(null===t||void 0===t?void 0:t.filename)&&a[t.status]||"未设置"},getVoiceStatusClass:function(t){var a={"-1":"isReject",0:"isChecking",1:"isReady"};return(null===t||void 0===t?void 0:t.filename)&&a[t.status]||""},getSlugMeta:function(t,a){var e;return(null===(e=this.slugs[t.slug])||void 0===e?void 0:e[a])||""},play:function(t){this.currentId=t.id;var a=t.isPlaying;a?(this.$refs.player.pause(),t.isPlaying=!1):(t.isPlaying=!0,this.playSrc=Object(k["b"])(t["filename"]),this.$refs.player.play(this.playSrc))},onEnded:function(){var t=this,a=this.list.find((function(a){return a.id===t.currentId}));a.isPlaying=!1,this.currentId=""},onAudit:function(t,a){var e=this;Object(b["a"])(null===t||void 0===t?void 0:t.vpk_id,null===t||void 0===t?void 0:t.id,a).then((function(a){e.$message.success("操作成功"),""!==e.status&&(e.list=e.list.filter((function(a){return a.id!==t.id})))}))}}},C=w,S=(e("7b08"),Object(p["a"])(C,g,h,!1,null,null,null)),x=S.exports,z={name:"Manage",components:{ReviewVpk:f,ReviewVoice:x},data:function(){return{active:"vpk"}},watch:{"$route.query.tab":{handler:function(t){t&&(this.active=t)},immediate:!0},active:{handler:function(t){this.$router.replace({query:{tab:t}})},immediate:!0}},methods:{changeTab:function(){}}},V=z,M=Object(p["a"])(V,s,n,!1,null,null,null);a["default"]=M.exports},"7b08":function(t,a,e){"use strict";e("9cc7")},"9cc7":function(t,a,e){},d9ff:function(t,a,e){"use strict";e("4989")},dd42:function(t,a,e){"use strict";e.d(a,"a",(function(){return s}));e("e9f5"),e("7d54"),e("b64b"),e("d3b7"),e("159b");var s=function(t){var a={};return Object.keys(t).forEach((function(e){void 0!==t[e]&&null!==t[e]&&""!==t[e]&&(a[e]=t[e])})),a}}}]);