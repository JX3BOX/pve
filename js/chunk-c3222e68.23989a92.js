(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3222e68"],{"13d5":function(t,o,e){"use strict";var n=e("23e7"),i=e("d58f").left,s=e("a640"),r=e("1212"),a=e("9adc"),l=!a&&r>79&&r<83,c=l||!s("reduce");n({target:"Array",proto:!0,forced:c},{reduce:function(t){var o=arguments.length;return i(this,t,o,o>1?arguments[1]:void 0)}})},"164d":function(t,o,e){},"2dad":function(t,o,e){"use strict";e("164d")},3164:function(t,o,e){"use strict";e.d(o,"b",(function(){return i})),e.d(o,"a",(function(){return s}));var n=e("41cb");function i(t){var o={type:"fb"};return t&&(o=Object.assign(o,t)),Object(n["a"])().get("/api/cms/posts",{params:o})}function s(t){return Object(n["a"])().get("/api/cms/post/".concat(t))}},4933:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t._self._c;return o("SingleLayout",[o("single",{attrs:{id:t.id}})],1)},i=[],s=function(){var t=this,o=t._self._c;return o("singlebox",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{post:t.post,stat:t.stat},on:{extendUpdate:t.updateExtend}},[o("div",{staticClass:"u-meta u-sub-block",attrs:{slot:"single-header"},slot:"single-header"},[o("em",{staticClass:"u-label"},[t._v("副本")]),o("span",{staticClass:"u-value"},[t._v(" "+t._s(t.post_subtype)+" ")])])])},r=[],a=(e("d3b7"),function(){var t=this,o=t._self._c;return o("div",{staticClass:"m-single-box"},[o("PostHeader",{attrs:{post:t.post,stat:t.stat}},[t._t("single-header")],2),o("div",{staticClass:"m-single-prepend"},[o("Creators",{staticClass:"m-single-creators",attrs:{postId:t.id,postType:t.post_type},on:{"load-authors":t.loadAuthors}}),o("Collection",{staticClass:"m-single-collection",attrs:{id:t.collection_id,defaultVisible:t.collection_collapse},on:{collectionUpdate:t.updateCollection}}),t._t("single-prepend")],2),t.visible?o("div",{staticClass:"m-single-post"},[o("el-divider",{attrs:{"content-position":"left"}},[t._v("JX3BOX")]),o("div",{staticClass:"m-single-content"},[t._t("default"),t.isMarkdown?o("ArticleMarkdown",{attrs:{content:t.post_content},on:{directoryRendered:t.updateDirectory}}):o("Article",{attrs:{content:t.post_content},on:{directoryRendered:t.updateDirectory}})],2)],1):o("div",{staticClass:"m-single-null"},[o("el-alert",{attrs:{title:t.null_tip,type:"warning","show-icon":""}})],1),o("div",{staticClass:"m-single-append"},[t._t("single-append"),o("PostGuide",{attrs:{post:t.post}}),o("Thx",{staticClass:"m-single-thx",attrs:{postId:t.id,postType:t.post_type,postTitle:t.post_title,userId:t.author_id,adminBoxcoinEnable:!0,userBoxcoinEnable:!0,authors:t.authors,client:t.post_client,allowGift:t.allow_gift,showRss:"","author-id":t.author_id,banner:t.banner}}),o("div",{ref:"commentView",staticClass:"m-single-comment"},[o("el-divider",{attrs:{"content-position":"left"}},[t._v("评论")]),t.id&&t.allow_comment?o("Comment",{attrs:{id:t.id,category:"post"}}):o("el-alert",{attrs:{title:"作者没有开启评论功能",type:"warning","show-icon":""}})],1)],2),o("footer",{staticClass:"m-single-footer"},[t._t("single-footer")],2),o("right-affix",{attrs:{postId:t.id,postType:t.post_type,postTitle:t.post_title,showComment:t.id&&t.allow_comment},on:{toComment:function(o){return t.toComment(o)}}})],1)}),l=[],c=e("2909"),u=(e("99af"),e("caad"),e("2532"),e("0cf2")),d=e("0016"),p=e("18e2"),h=e("2e26"),f=e("443c"),v=e("a974"),_=e("f305"),m=e("23d8"),b=e("a119"),g=e("65c2"),y=e("85e4"),w=e("c9d2"),C={name:"cms-single",components:{PostHeader:u["a"],Creators:d["a"],Collection:p["a"],Thx:h["a"],Article:v["a"],ArticleMarkdown:_["a"],Comment:m["a"],RightAffix:f["a"],PostGuide:b["a"]},props:["post","stat"],data:function(){return{collection_data:"",directory:!1,other_authors:[],super_author:""}},computed:{id:function(){var t;return~~(null===(t=this.post)||void 0===t?void 0:t.ID)||0},app_type:function(){return Object(y["h"])()},post_type:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.post_type},post_title:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.post_title},author_id:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.post_author},collection_id:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.post_collection},collection_collapse:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.collection_collapse},visible:function(){var t;return!(null===(t=this.post)||void 0===t||!t._check)},null_tip:function(){var t,o="作者设置了【";return o+=g["__visibleMap"][null===(t=this.post)||void 0===t?void 0:t.visible],o+="】",o},post_content:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.post_content)||""},post_mode:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.post_mode)||"tinymce"},isMarkdown:function(){return"markdown"==this.post_mode},allow_comment:function(){var t;return!(null!==(t=this.post)&&void 0!==t&&t.comment)},extend_data:function(){return{collection_data:this.collection_data,directory:this.directory}},authors:function(){return this.other_authors&&this.other_authors.length?[this.super_author].concat(Object(c["a"])(this.other_authors)):[]},post_client:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.client)||"all"},allow_gift:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.allow_gift},isEditor:function(){return w["a"].isEditor()},showComment:function(){var t,o;return null===(t=this.post)||void 0===t||!t.comment_visible||((null===(o=w["a"].getInfo())||void 0===o?void 0:o.uid)==this.author_id||this.isEditor)},community_id:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.community_id)||0},banner:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.post_banner)||""}},methods:{updateCollection:function(t){this.collection_data=t},updateDirectory:function(t){this.directory=t},loadAuthors:function(t){var o=t.super_author,e=t.other_authors;this.super_author=o,this.other_authors=e},toComment:function(){this.$refs.commentView.scrollIntoView({block:"center",behavior:"auto"})}},watch:{extend_data:{deep:!0,immediate:!0,handler:function(t){this.$emit("extendUpdate",t)}},post_type:{deep:!0,immediate:!0,handler:function(t){location.host.includes("localhost")||t&&t!==this.app_type&&(location.href="/".concat(t,"/").concat(this.id))}},community_id:{immediate:!0,handler:function(t){if(t&&0!=t){if(location.href.includes("/community/".concat(t)))return;location.href="/community/".concat(t)}}}}},x=C,O=(e("990e"),e("2877")),j=Object(O["a"])(x,a,l,!1,null,null,null),k=j.exports,I=e("3164"),A=e("9616"),E="fb",T={name:"single",props:["id"],data:function(){return{loading:!1,post:{},stat:{}}},computed:{post_subtype:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.post_subtype)||"其它"}},methods:{updateExtend:function(t){this.$store.state.extend=t}},mounted:function(){var t=this;this.id&&(this.loading=!0,Object(I["a"])(this.id).then((function(o){var e;t.post=t.$store.state.post=o.data.data,t.$store.state.id=t.id,t.$store.state.user_id=null===(e=t.post)||void 0===e?void 0:e.post_author,document.title=t.post.post_title,w["a"].isLogin()&&(Object(A["b"])({source_type:E,source_id:~~t.id,link:location.href,title:t.post.post_title,author_id:t.post.post_author,banner:t.post.post_banner}),t.post.visible>1&&Object(A["c"])({id:t.id,category:"posts",subcategory:"default",visible_type:t.post.visible,author_id:t.post.post_author,banner:t.post.post_banner}))})).finally((function(){t.loading=!1})),Object(A["a"])(E,this.id).then((function(o){t.stat=t.$store.state.stat=o.data})),Object(A["d"])(E,this.id))},components:{singlebox:k}},R=T,$=(e("2dad"),Object(O["a"])(R,s,r,!1,null,null,null)),S=$.exports,D={name:"Single",props:[],components:{single:S},data:function(){return{id:Object(y["f"])()}},computed:{user_id:function(){return this.$store.state.user_id}},methods:{getAppIcon:y["g"]}},M=D,P=Object(O["a"])(M,n,i,!1,null,null,null);o["default"]=P.exports},8111:function(t,o,e){},9485:function(t,o,e){"use strict";var n=e("23e7"),i=e("2266"),s=e("59ed"),r=e("825a"),a=e("46c4"),l=TypeError;n({target:"Iterator",proto:!0,real:!0},{reduce:function(t){r(this),s(t);var o=a(this),e=arguments.length<2,n=e?void 0:arguments[1],c=0;if(i(o,(function(o){e?(e=!1,n=o):n=t(n,o,c),c++}),{IS_RECORD:!0}),e)throw new l("Reduce of empty iterator with no initial value");return n}})},"990e":function(t,o,e){"use strict";e("8111")},b85c:function(t,o,e){"use strict";e.d(o,"a",(function(){return i}));e("a4d3"),e("e01a"),e("d28b"),e("d9e2"),e("d3b7"),e("3ca3"),e("ddb0");var n=e("06c5");function i(t,o){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Object(n["a"])(t))||o&&t&&"number"==typeof t.length){e&&(t=e);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,l=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){l=!0,r=t},f:function(){try{a||null==e["return"]||e["return"]()}finally{if(l)throw r}}}}},d58f:function(t,o,e){"use strict";var n=e("59ed"),i=e("7b0b"),s=e("44ad"),r=e("07fa"),a=TypeError,l="Reduce of empty array with no initial value",c=function(t){return function(o,e,c,u){var d=i(o),p=s(d),h=r(d);if(n(e),0===h&&c<2)throw new a(l);var f=t?h-1:0,v=t?-1:1;if(c<2)while(1){if(f in p){u=p[f],f+=v;break}if(f+=v,t?f<0:h<=f)throw new a(l)}for(;t?f>=0:h>f;f+=v)f in p&&(u=e(u,p[f],f,d));return u}};t.exports={left:c(!1),right:c(!0)}}}]);