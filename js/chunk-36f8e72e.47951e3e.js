(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36f8e72e"],{2746:function(t,a,e){"use strict";e.d(a,"a",(function(){return s})),e.d(a,"c",(function(){return n})),e.d(a,"b",(function(){return o}));var i=e("41cb");function s(t){return Object(i["a"])().get("/api/cms/team/exist",{params:{name:t}})}function n(t,a){return Object(i["a"])().post("/api/cms/team/".concat(t,"/verify"),a)}function o(t,a){return Object(i["a"])().get("/api/cms/team/".concat(t,"/verify"),{params:a})}},4413:function(t,a,e){},"44b1":function(t,a,e){"use strict";e("c97a5")},6761:function(t,a,e){},acdd:function(t){t.exports=JSON.parse('{"douyu":"斗鱼","bilibili":"B站","huya":"虎牙"}')},b623:function(t,a,e){"use strict";e("c7db")},c740:function(t,a,e){"use strict";var i=e("23e7"),s=e("b727").findIndex,n=e("44d2"),o="findIndex",r=!0;o in[]&&Array(1)[o]((function(){r=!1})),i({target:"Array",proto:!0,forced:r},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(o)},c7db:function(t,a,e){},c858:function(t,a,e){"use strict";e("6761")},c97a5:function(t,a,e){},e795:function(t,a,e){"use strict";e("4413")},ebdf:function(t,a,e){"use strict";e("b0c0");var i=function(){var t=this,a=t._self._c;return t.data?a("div",{staticClass:"m-team-info"},[a("router-link",{staticClass:"u-logo",attrs:{to:"/org/"+t.id,target:"_blank"}},[t.isRaid?[a("router-link",{attrs:{to:"/org/"+t.id,target:"_blank"}},[t.data.logo?a("img",{attrs:{src:t.showTeamLogo(t.data.logo),alt:t.data.name}}):a("img",{attrs:{src:e("ff54")}})])]:[t.data.logo?a("img",{attrs:{src:t.showTeamLogo(t.data.logo),alt:t.data.name}}):a("img",{attrs:{src:e("ff54")}})],a("span",{staticClass:"u-id"},[t._v("ID : "+t._s(t.info.ID))])],2),a("h1",{staticClass:"u-title"},[a("router-link",{attrs:{to:"/org/"+t.id,target:"_blank"}},[t._v(" "+t._s(t.limitName(t.data.name))+" ")]),a("i",{staticClass:"u-icons"},[1==t.data.status?a("i",{staticClass:"u-status isVerified",attrs:{title:"已认证"}},[a("svg",{attrs:{height:"512",viewBox:"0 0 511.375 511.375",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[a("path",{attrs:{d:"M511.375 255.688l-57.89-64.273 9.064-86.046-84.651-17.92-43.18-75.012-79.03 35.321-10.667 207.93 10.667 207.929 79.031 35.321 43.179-75.011 84.651-17.921-9.064-86.046z",fill:"#0ed678"}}),a("path",{attrs:{d:"M176.656 12.437l-43.179 75.012-84.651 17.921 9.064 86.045L0 255.688l57.89 64.272-9.064 86.046 84.651 17.921 43.18 75.011 79.031-35.321V47.758z",fill:"#04eb84"}}),a("g",[a("path",{attrs:{d:"M362.878 199.702l-22.381-19.977-84.809 95.016-10.667 23.613 10.667 21.439z",fill:"#f7f0eb"}}),a("path",{attrs:{d:"M166.56 233.095l-21.212 21.213 89.185 89.186 21.155-23.701v-45.052l-22.393 25.088z",fill:"#fffbf5"}})])]),t._v(" 已认证 ")]):[t.isTeamSuper?a("router-link",{staticClass:"u-status isNotVerified",attrs:{title:"前往认证",to:"/org/verify/"+t.id}},[a("svg",{attrs:{height:"512",viewBox:"0 0 511.375 511.375",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[a("g",{attrs:{fill:"#999"}},[a("path",{attrs:{d:"M511.375 255.688l-57.89-64.273 9.064-86.046-84.651-17.92-43.18-75.012-79.03 35.321-10.667 207.93 10.667 207.929 79.031 35.321 43.179-75.011 84.651-17.921-9.064-86.046z"}}),a("path",{attrs:{d:"M176.656 12.437l-43.179 75.012-84.651 17.921 9.064 86.045L0 255.688l57.89 64.272-9.064 86.046 84.651 17.921 43.18 75.011 79.031-35.321V47.758z"}})]),a("g",{attrs:{fill:"#fff"}},[a("path",{attrs:{d:"M362.878 199.702l-22.381-19.977-84.809 95.016-10.667 23.613 10.667 21.439z"}}),a("path",{attrs:{d:"M166.56 233.095l-21.212 21.213 89.185 89.186 21.155-23.701v-45.052l-22.393 25.088z"}})])]),t._v(" 未认证 ")]):a("i",{staticClass:"u-status isNotVerified"},[a("svg",{attrs:{height:"512",viewBox:"0 0 511.375 511.375",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[a("g",{attrs:{fill:"#999"}},[a("path",{attrs:{d:"M511.375 255.688l-57.89-64.273 9.064-86.046-84.651-17.92-43.18-75.012-79.03 35.321-10.667 207.93 10.667 207.929 79.031 35.321 43.179-75.011 84.651-17.921-9.064-86.046z"}}),a("path",{attrs:{d:"M176.656 12.437l-43.179 75.012-84.651 17.921 9.064 86.045L0 255.688l57.89 64.272-9.064 86.046 84.651 17.921 43.18 75.011 79.031-35.321V47.758z"}})]),a("g",{attrs:{fill:"#fff"}},[a("path",{attrs:{d:"M362.878 199.702l-22.381-19.977-84.809 95.016-10.667 23.613 10.667 21.439z"}}),a("path",{attrs:{d:"M166.56 233.095l-21.212 21.213 89.185 89.186 21.155-23.701v-45.052l-22.393 25.088z"}})])]),t._v(" 未认证 ")])]],2)],1),a("div",{staticClass:"u-meta"},[a("span",{staticClass:"u-meta-item"},[a("em",[t._v("服务器")]),t._v(" "+t._s(t.data.server)+" ")]),a("span",{staticClass:"u-meta-item"},[a("em",[t._v("团长")]),a("a",{attrs:{href:t.authorLink(t.data.super),target:"_blank"}},[t._v(" "+t._s(t.leaderName)+" ")])]),t.data.wiki?a("span",{staticClass:"u-meta-item"},[a("em",[t._v("百科")]),a("a",{attrs:{href:t.wikiLink(t.data.wiki),target:"_blank"}},[a("i",{staticClass:"el-icon-link"}),t._v(" 点击查看 ")])]):t._e(),t.namespace?a("span",{staticClass:"u-meta-item"},[a("em",[t._v("铭牌")]),a("a",{staticClass:"u-namespace",attrs:{href:t.namespaceLink(t.namespace),target:"_blank"}},[t._v("剑网3.com/"+t._s(t.namespace))])]):t._e()]),a("div",{staticClass:"u-meta"},[t.tv?a("span",{staticClass:"u-meta-item"},[t._m(0),a("a",{attrs:{href:t.tv,target:"_blank"}},[t._v(" "+t._s(t.tvmap[t.data.tv_type]+"·"+t.data.tv)+" ")])]):t._e(),t.data.yy_channel?a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.data.yy_channel,expression:"data.yy_channel",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"u-meta-item u-meta-yy"},[t._m(1),t._v(" "+t._s(t.data.yy_channel)+" ")]):t._e(),t.data.qq_group?a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.data.qq_group,expression:"data.qq_group",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"u-meta-item u-meta-qq"},[t._m(2),t._v(" "+t._s(t.data.qq_group)+" ")]):t._e()]),t.isTeamSuper?t._e():a("team-panel",{attrs:{team:t.info,isRaid:t.isRaid,team_id:t.id}})],1):t._e()},s=[function(){var t=this,a=t._self._c;return a("em",[a("i",{staticClass:"el-icon-video-camera"}),t._v(" 直播间 ")])},function(){var t=this,a=t._self._c;return a("em",[a("i",{staticClass:"el-icon-document-copy"}),t._v(" YY频道")])},function(){var t=this,a=t._self._c;return a("em",[a("i",{staticClass:"el-icon-document-copy"}),t._v(" QQ群")])}],n=(e("fb6a"),{douyu:function(t){return"https://www.douyu.com/"+t},bilibili:function(t){return"https://live.bilibili.com/"+t},huya:function(t){return"https://www.huya.com/"+t}}),o=n,r=e("acdd"),c=e("65c2"),l=e("85e4"),u=function(){var t=this,a=t._self._c;return a("div",{staticClass:"m-team-admin"},[a("div",{staticClass:"u-feeling"},[t.isRaid?t._e():a("Good",{staticClass:"u-like",attrs:{mode:"heart",txt:"好评",showCount:!0,team_id:t.team_id,count:t.likes}}),t.isAdmin&&!t.isRaid?[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"m-admin-assessor"},[a("i",{staticClass:"el-icon-s-custom"}),t._v(" 团队认证员： "),a("a",{attrs:{href:t._f("authorLink")(t.assessor.uid),target:"_blank"}},[t._v(t._s(t.assessor.display_name))])])]),t.status?a("el-button",{attrs:{type:"info",icon:"el-icon-circle-check",size:"mini"},on:{click:function(a){return t.verifyTeam(0)}}},[t._v("取消认证")]):a("el-button",{attrs:{type:"success",icon:"el-icon-circle-check",size:"mini"},on:{click:function(a){return t.verifyTeam(1)}}},[t._v("通过认证")])],1)]:t._e()],2),a("div",{staticClass:"u-panel"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-right",size:"mini"},on:{click:t.openPop}},[t._v("加入团队")]),t.isRaid?t._e():[t.isLeader||t.isSuperAdmin?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",size:"mini"},on:{click:t.editTeam}},[t._v("编辑团队")]):t._e()]],2),a("joinpop",{attrs:{title:"加入团队",team_id:t.team_id},model:{value:t.join_pop_visible,callback:function(a){t.join_pop_visible=a},expression:"join_pop_visible"}})],1)},d=[],m=(e("14d9"),e("c9d2")),p=function(){var t=this,a=t._self._c;return a("div",{staticClass:"w-like-heart",on:{click:t.blast}},[a("span",{ref:"likeheart",staticClass:"w-heart"}),a("span",{staticClass:"u-text"},[t._v(t._s(t.txt||"喜欢"))]),t.showCount?a("span",{staticClass:"u-count"},[t._v(t._s(t.total))]):t._e()])},h=[],f=e("681e"),v={name:"Good",props:["mode","txt","showCount","count","team_id"],data:function(){return{status:!1,clicks:0,total:0}},computed:{id:function(){return this.team_id}},watch:{count:function(t){this.total=t||0}},methods:{doLike:function(){this.status=!this.status,this.status&&this.id&&Object(f["a"])(this.id)},doLikes:_.throttle((function(){Object(f["a"])(this.id)}),2e3),blast:function(){var t=this;this.$refs.likeheart.classList.add("w-heart-animation"),setTimeout((function(){t.$refs.likeheart.classList.remove("w-heart-animation")}),800),this.total++,this.clicks++,this.doLikes()}},mounted:function(){}},b=v,g=(e("44b1"),e("2877")),k=Object(g["a"])(b,p,h,!1,null,null,null),w=k.exports,y=function(){var t=this,a=t._self._c;return a("el-dialog",{staticClass:"m-team-joinpop",attrs:{title:t.title,visible:t.visible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(a){t.visible=a}}},[t.data&&t.data.length?a("div",{staticClass:"m-team-joinpop-form"},[a("div",{staticClass:"u-msg"},[t._v(" 请选择需要加入该团队的角色 ")]),a("el-checkbox",{staticClass:"u-all",attrs:{indeterminate:t.isIndeterminate},on:{change:t.selectAll},model:{value:t.checkAll,callback:function(a){t.checkAll=a},expression:"checkAll"}},[t._v("全选")]),a("el-checkbox-group",{staticClass:"u-list",on:{change:t.checkIsAll},model:{value:t.roles,callback:function(a){t.roles=a},expression:"roles"}},t._l(t.data,(function(e){return a("el-checkbox",{key:e.ID,staticClass:"u-item",attrs:{label:e.ID,border:""}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.note||e.name,placement:"bottom"}},[a("div",[a("img",{staticClass:"u-item-avatar",attrs:{src:t.showAvatar(e.mount)}}),a("span",{staticClass:"u-item-name"},[t._v(t._s(e.name))]),a("span",{staticClass:"u-item-server"},[t._v(t._s(e.server))])])])],1)})),1)],1):a("div",{staticClass:"m-team-joinpop-null"},[a("el-alert",{attrs:{title:"暂无可用角色",type:"warning","show-icon":""}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){t.visible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)])},C=[],x=(e("e9f5"),e("7d54"),e("d3b7"),e("159b"),e("0e81")),j={name:"",props:["title","show","team_id"],data:function(){return{visible:!1,data:[],roles:[],checkAll:!1,isIndeterminate:!1}},model:{prop:"show",event:"switchJoinPop"},watch:{show:function(t){this.visible=t},visible:function(t){var a=this;this.$emit("switchJoinPop",t),t&&Object(x["f"])(this.team_id).then((function(t){a.data=t.data.data||[]}))}},computed:{params:function(){return{roles:this.roles,team_id:this.$route.params.id}},role_ids:function(){var t=[];return this.data.forEach((function(a){t.push(a.ID)})),t}},methods:{confirm:function(){var t=this;this.roles&&this.roles.length&&Object(x["o"])(this.team_id,this.roles).then((function(a){t.$message({message:"申请成功，请等待团队管理审核",type:"success"}),t.visible=!1}))},selectAll:function(t){this.roles=t?this.role_ids:[],this.isIndeterminate=!1},checkIsAll:function(t){this.checkAll=t.length===this.role_ids.length,this.isIndeterminate=t.length>0&&t.length<this.roles.length},showAvatar:function(t,a){return c["__imgPath"]+"image/school/"+t+".png"}},mounted:function(){},components:{}},L=j,A=(e("e795"),Object(g["a"])(L,y,C,!1,null,null,null)),O=A.exports,z=e("9616"),I=e("2746"),T=e("8194"),M={name:"team_panel",props:["team","isRaid","team_id"],data:function(){return{isAdmin:m["a"].isAdmin(),isSuperAdmin:m["a"].isSuperAdmin(),uid:m["a"].getInfo().uid,likes:0,join_pop_visible:!1,assessor:{name:"认证管理员",uid:""}}},computed:{id:function(){return this.team_id},data:function(){return this.team},isLeader:function(){return this.data.super==this.uid},status:function(){return!!this.data.status}},methods:{getAssessor:function(t){var a=this;t&&Object(T["d"])(t).then((function(t){a.assessor=t.data.data}))},verifyTeam:function(t){var a=this;t?Object(I["a"])(this.data.name).then((function(t){return!t.data.data.is_exist||(a.$notify({title:"失败",message:"名称与记录的工作室重名",type:"error"}),!1)})).then((function(t){t&&a.checkTeam(1)})):this.checkTeam(0)},checkTeam:function(t){var a=this;Object(f["c"])(this.team_id,t).then((function(t){200==t.status?(a.$notify({title:"成功",message:"操作成功",type:"success"}),a.data.status=!a.data.status,a.$forceUpdate()):a.$notify({title:"失败",message:"操作失败",type:"error"})}))},editTeam:function(){this.$router.push({name:"edit_org",params:{id:this.team_id}})},openPop:function(){m["a"].isLogin()?this.join_pop_visible=!0:m["a"].toLogin()}},filters:{authorLink:l["a"]},mounted:function(){var t=this;this.team_id&&(this.status&&!this.isRaid&&this.getAssessor(this.data.assessor),Object(z["a"])("team",this.team_id).then((function(a){t.likes=a.data.like})))},components:{Good:w,joinpop:O}},N=M,$=(e("b623"),Object(g["a"])(N,u,d,!1,null,null,null)),q=$.exports,R={name:"team_info",props:["info","isRaid","team_id","isMine"],data:function(){return{tvmap:r,leader:{avatar:c["default_avatar"],name:"团长名称",uid:""},namespace:"",logo:""}},computed:{id:function(){return this.team_id||0},data:function(){return this.info},tv:function(){return this.data.tv_type&&this.data.tv?o[this.data.tv_type](this.data.tv):""},isTeamSuper:function(){return m["a"].getInfo().uid==this.data.super},leaderName:function(){var t,a;return(null===(t=this.data)||void 0===t||null===(a=t.super_info)||void 0===a?void 0:a.display_name)||"未知"}},methods:{onCopy:function(t){this.$notify({title:"复制成功",message:"复制内容 : "+t.text,type:"success"})},onError:function(){this.$notify.error({title:"复制失败",message:"请手动复制"})},getLeader:function(t){var a=this;t&&Object(T["d"])(t).then((function(t){a.leader=t.data.data}))},limitName:function(t){return t.slice(0,12)},authorLink:l["a"],wikiLink:function(t){return Object(l["i"])("knowledge",t)},namespaceLink:function(t){return"https://剑网3.com/"+t},showTeamLogo:function(t){return Object(l["l"])(t,324)}},components:{"team-panel":q}},S=R,E=(e("c858"),Object(g["a"])(S,i,s,!1,null,null,null));a["a"]=E.exports}}]);