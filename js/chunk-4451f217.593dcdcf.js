(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4451f217"],{"38ae":function(t,e,a){"use strict";a("40eb")},"40eb":function(t,e,a){},7494:function(t,e,a){"use strict";a.r(e);a("ac1f"),a("841c");var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-archive-box"},[e("common-header",{attrs:{client:t.client},on:{filterImperceptibly:t.filterImperceptibly,filterMeta:t.filterMeta,search:t.onSearch,wujie:t.onWujieChange}}),t.search||t.subtype?t._e():e("rec-table"),t.data&&t.data.length?e("div",{staticClass:"m-archive-list"},[e("ul",{staticClass:"u-list"},t._l(t.data,(function(a,i){return e("list-item",{key:i+a,attrs:{item:a,order:t.order},on:{loadMacro:t.loadMacro}})})),1)]):e("el-alert",{staticClass:"m-archive-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage}}),e("el-drawer",{staticClass:"m-macro-drawer",attrs:{title:"云端宏",visible:t.drawer,"append-to-body":!0},on:{"update:visible":function(e){t.drawer=e}}},[e("div",{staticClass:"u-box"},[e("h2",{staticClass:"u-title"},[t._v(t._s(t.drawer_title))]),e("macro",{attrs:{ctx:t.drawer_content,name:t.drawer_title,id:t.drawer_id}}),e("a",{staticClass:"u-skip el-button el-button--primary",attrs:{href:t.drawer_link}},[e("i",{staticClass:"el-icon-copy-document"}),t._v(" 查看详情 ")])],1)]),e("design-task",{attrs:{post:t.currentPost},model:{value:t.showDesignTask,callback:function(e){t.showDesignTask=e},expression:"showDesignTask"}})],1)},n=[],r=a("3835"),s=a("ade3"),c=a("c7eb"),o=a("1da1"),l=(a("99af"),a("7db0"),a("caad"),a("a15b"),a("d81d"),a("14d9"),a("b0c0"),a("e9f5"),a("f665"),a("ab43"),a("b64b"),a("d3b7"),a("2c3e"),a("2532"),a("498a"),a("483c")),u=a("fc24"),d=a("e08c"),h=(a("9911"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-index-rec"},[t._m(0),e("div",{staticClass:"u-ac",domProps:{innerHTML:t._s(t.ac)}}),e("el-row",t._l(t.data,(function(a,i){return e("el-col",{key:i,attrs:{span:6}},[e("div",{staticClass:"u-rec"},[e("a",{directives:[{name:"reporter",rawName:"v-reporter",value:{data:{href:t.macroLink(a.link)},caller:"macro_suggest"},expression:"{\n                        data: {\n                            href: macroLink(item.link),\n                        },\n                        caller: 'macro_suggest',\n                    }"}],style:t.highLight(a.color),attrs:{href:a.link,target:"_blank"}},[a.icon?e("img",{attrs:{src:t.iconLink(a.icon),onerror:"this.src='https://img.jx3box.com/image/xf/0.png'"}}):t._e(),t._v(" "+t._s(a.label)+" ")])])])})),1)],1)}),p=[function(){var t=this,e=t._self._c;return e("h5",{staticClass:"u-title"},[e("span",[e("i",{staticClass:"el-icon-star-off"}),t._v("当前版本编辑推荐")])])}],g=a("6796"),f=a("65c2"),m={color:"",label:"",link:"",icon:""},v={name:"rec_table",props:[],components:{},data:function(){return{data:[],ac:""}},computed:{client:function(){return this.$store.state.client}},methods:{macroLink:function(t){var e="std"==this.client?"www":"origin";return"".concat(e,":").concat(t)},init:function(){var t=this,e="origin"==this.client?"-origin":"";Object(g["b"])("macro-rec"+e).then((function(e){t.data=e.data.data.menus||[];var a=t.data.length%4;if(a)for(var i=0;i<4-a;i++)t.data.push(m)})),Object(g["a"])("macro-ac"+e).then((function(e){t.ac=e.data.data.html}))},highLight:function(t){return t?"color:"+t+";font-weight:bold;":""},iconLink:function(t){return f["__imgPath"]+"image/xf/"+t+".png"}},watch:{client:{immediate:!0,handler:function(){this.init()}}}},b=v,w=(a("38ae"),a("2877")),_=Object(w["a"])(b,h,p,!1,null,null,null),k=_.exports,y=a("e635"),j=a("16e5"),x=a("41cb"),C=function(t){return Object(x["a"])().get("/api/cms/design/task/log",{params:t})},q=a("7d14"),O=a("d8ad"),P=a("c9d2"),D="macro",L={name:"Index",props:[],data:function(){return{loading:!1,data:[],page:1,per:10,total:1,pages:1,number_queries:["per","page"],subtype:"",order:"update",mark:"",client:this.$store.state.client,search:"",lang:"",zlp:"",is_wujie:"",drawer:!1,drawer_title:"",drawer_content:"",drawer_link:"",drawer_id:"",langs:{cn:"简体中文",tr:"繁體中文"},showDesignTask:!1,currentPost:{}}},computed:{hasNextPage:function(){return this.pages>1&&this.page<this.total},query:function(){return{subtype:this.subtype,order:this.order,mark:this.mark,client:this.client,search:this.search,lang:this.lang,zlp:this.zlp,is_wujie:this.is_wujie}},pg_queries:function(){return{page:this.page,per:this.per}},reset_queries:function(){return[this.subtype,this.search]}},methods:{buildQuery:function(t){t&&(this.page+=1,this.replaceRoute({page:this.page},!1));var e={per:this.per,page:this.page};for(var a in this.query)void 0!==this.query[a]&&""!==this.query[a]&&null!==this.query[a]&&("search"==a?e.search=this.query.search.trim():e[a]=this.query[a]);return e.subtype&&(e.sticky=1),e},onSearch:function(t){this.search=t},loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.buildQuery(e);return this.loading=!0,Object(l["e"])(a).then(function(){var a=Object(o["a"])(Object(c["a"])().mark((function a(i){var n,r,s,o,l,u,d,h,p,g;return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.data=e?t.data.concat(null===(l=i.data)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.list):null===(d=i.data)||void 0===d||null===(h=d.data)||void 0===h?void 0:h.list,Object(j["b"])({caller:"macro_index_load",data:{aggregate:i.data.data.list.map((function(e){return t.postLink(e.ID)}))}}),t.total=null===(n=i.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.total,t.pages=null===(s=i.data)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.pages,!P["a"].hasPermission("push_banner")||t.isPhone){a.next=10;break}return p=t.data.map((function(t){return t.ID})),a.next=8,C({source_type:"macro",ids:p.join(",")}).then((function(t){return t.data.data}));case 8:g=a.sent,t.data=t.data.map((function(e){var a=g.find((function(t){return t.source_id==e.ID}))||null;return t.$set(e,"log",a),e}));case 10:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).finally((function(){t.loading=!1}))},replaceRoute:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.$router.push({name:this.$route.name,query:Object.assign({},this.$route.query,t)}).then((function(){e&&window.scrollTo(0,0)})).catch((function(t){}))},filterMeta:function(t){this.replaceRoute(Object(s["a"])(Object(s["a"])({},t["type"],t["val"]),"page",1))},filterImperceptibly:function(t){this[t["type"]]=t["val"]},onWujieChange:function(t){this.is_wujie=t,this.replaceRoute({is_wujie:t,page:1})},changePage:function(t){this.loadData(),this.replaceRoute({page:t})},appendPage:function(){this.loadData(!0)},loadMacro:function(t){var e=Object(r["a"])(t,3),a=e[0],i=e[1],n=e[2];this.drawer=!0,this.drawer_title=a+"#"+i.name,this.drawer_content=i.macro,this.drawer_link="/macro/"+n+"?tab="+i.name,this.drawer_id=n},postLink:function(t){var e="std"==this.client?"www":"origin";return"".concat(e,":/").concat(D,"/")+t}},watch:{"$route.query":{deep:!0,immediate:!0,handler:function(t){if(Object.keys(t).length)for(var e in t)this.number_queries.includes(e)?this[e]=~~t[e]:this[e]=t[e]}},reset_queries:{deep:!0,handler:function(){this.page=1}},query:{deep:!0,immediate:!0,handler:function(t){this.loadData()}},is_wujie:function(){this.page=1,this.replaceRoute({page:1})},client:function(t){this.is_wujie=""}},mounted:function(){var t=this;O["a"].on("design-task",(function(e){t.currentPost=e,t.showDesignTask=!0}))},components:{listItem:u["a"],recTable:k,macro:d["a"],CommonHeader:y["a"],DesignTask:q["a"]}},T=L,I=(a("cce1"),Object(w["a"])(T,i,n,!1,null,null,null));e["default"]=I.exports},"77dc":function(t,e,a){},cce1:function(t,e,a){"use strict";a("77dc")}}]);