(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d303095"],{"0b3d":function(t,e,i){},"12d4":function(t){t.exports=JSON.parse('["蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","青梅煮酒","眉间雪","有人赴约","万象长安","山海相逢","傲血戰意","万象长安","山海相逢","有人赴约","眉间雪"]')},"35e3":function(t,e,i){"use strict";i("f49d")},"5d41":function(t,e,i){"use strict";i("0b3d")},8474:function(t){t.exports=JSON.parse('["可教学","固定团","成就团","学生党","上班党","爆肝帝","时差党"]')},a59a:function(t){t.exports=JSON.parse('["缘起稻香","天宝盛世"]')},bd13:function(t,e,i){"use strict";function s(t){var e=Object.prototype.toString.call(t);return e.match(/\[object (.*?)\]/)[1].toLowerCase()}i.d(e,"a",(function(){return n}));var l=s;class a{constructor(t){if("string"!==l(t))throw new Error("[Sterilizer::init] params should be string");this._symbols={"`":"`","~":"~","!":"!","@":"@","#":"#",$:"\\$","%":"%","^":"\\^","&":"&","*":"\\*","-":"\\-",_:"_","=":"=","+":"+","(":"\\(",")":"\\)","[":"\\[","]":"\\]","{":"\\{","}":"\\}","|":"\\|","\\":"\\\\","/":"/","?":"\\?",":":":",";":";","'":"'",'"':'"',">":">","<":"<",",":",",".":"\\."},this.symbols=Object.keys(this._symbols),this.regs=Object.values(this._symbols),this.str=t,this._str=t}toString(){return this._str}_detected(t){let e=l(t),i=["string","array","set"];if(!i.includes(e))throw new Error("[Sterilizer::remove] params should be string|array|set");return t}_sterilize(t){t=[...t].join("");let e=new RegExp(`[${t}]`,"gm");return this._str=this._str.replace(e,""),this}kill(t){let e=null;if(void 0==t)e=new Set(this.regs);else{this._detected(t),e=new Set;let i=new Set(t);for(let t of i)this.symbols.includes(t)&&e.add(this._symbols[t])}return this._sterilize(e)}live(t){this._detected(t);let e=new Set(this.regs);for(let i of t)this.symbols.includes(i)&&e.delete(this._symbols[i]);return this._sterilize(e)}safe(){return this.kill(["&","<",">",'"',"'","+",":","/","?","=","#","%"])}removeHSC(){return this.kill(["&","<",">",'"',"'"])}removeURL(){return this.kill(["+",":","/","?","=","&","#","%"])}removeSpace(){return this._str=this._str.replace(/\s/gm,""),this}remove(t,e){let i=new RegExp(""+t,"gm");return e=void 0!==e?e:"",this._str=this._str.replace(i,e),this}removeHTMLtag(){return this._str=this._str.replace(/<[^>]+>/gm,""),this}isDirty(t){return t?this.str.includes(t):this.symbols.some(t=>this.str.includes(t))}}function n(t){return new a(t)}},f49d:function(t,e,i){},ff5f:function(t,e,i){"use strict";i("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-team-teamform"},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"90px","label-position":t.position}},[e("el-form-item",{attrs:{label:"队徽"}},[e("UploadLogo",{model:{value:t.form.logo,callback:function(e){t.$set(t.form,"logo",e)},expression:"form.logo"}})],1),e("el-form-item",{attrs:{label:"团队名称"}},[e("el-input",{attrs:{placeholder:"请输入团队名称,不能为纯数字","show-word-limit":"",minlength:2,maxlength:12},on:{input:t.checkTeamName},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t.isExist?e("div",{staticClass:"u-warning"},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 本服已有同名团队，请更换名称 ")]):t._e(),t.isNumber?e("div",{staticClass:"u-warning"},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 团队名称不能为纯数字 ")]):t._e()],1),e("el-form-item",{attrs:{label:"服务器"}},[e("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"选择客户端"},on:{change:t.changeClient},model:{value:t.form.client,callback:function(e){t.$set(t.form,"client",e)},expression:"form.client"}},t._l(t.clients,(function(t,i){return e("el-option",{key:i,attrs:{value:i,label:t}})})),1),e("el-select",{attrs:{placeholder:"请选择服务器"},on:{change:t.checkTeamName},model:{value:t.form.server,callback:function(e){t.$set(t.form,"server",e)},expression:"form.server"}},t._l(t.servers,(function(t,i){return e("el-option",{key:i,attrs:{label:t,value:t,"allow-create":"",filterable:""}})})),1)],1),e("el-form-item",{attrs:{label:"团队类型"}},[e("el-select",{staticClass:"u-select-tags",attrs:{multiple:"",placeholder:"请选择（可多选）"},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}},t._l(t.tags,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("el-form-item",{attrs:{label:"团队简介"}},[e("el-input",{attrs:{type:"textarea",placeholder:"可填写团队介绍、福利、平时活动时间等","show-word-limit":"",maxlength:200,rows:5},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),e("el-form-item",{attrs:{label:"招募信息"}},[e("el-input",{attrs:{type:"textarea",placeholder:"可填写团队当前需要招募的职业和联系方式等","show-word-limit":"",maxlength:200,rows:5},model:{value:t.form.recruit,callback:function(e){t.$set(t.form,"recruit",e)},expression:"form.recruit"}})],1),e("el-form-item",{attrs:{label:"YY频道"}},[e("el-input",{attrs:{placeholder:"YY频道（非必填）"},model:{value:t.form.yy_channel,callback:function(e){t.$set(t.form,"yy_channel",e)},expression:"form.yy_channel"}})],1),e("el-form-item",{attrs:{label:"QQ群号"}},[e("el-input",{attrs:{placeholder:"QQ群号（非必填）"},model:{value:t.form.qq_group,callback:function(e){t.$set(t.form,"qq_group",e)},expression:"form.qq_group"}})],1),e("el-form-item",{attrs:{label:"直播间"}},[e("div",{staticClass:"m-tv-list"},[t._l(t.tv_list,(function(i,s){return e("el-row",{key:s+"",staticClass:"m-tv-item"},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"u-type-select"},[e("el-button",{staticClass:"u-main",attrs:{type:i.main?"warning":"",icon:"el-icon-star-off",circle:"",plain:!i.main,size:"mini",title:"在主页显示"},on:{click:function(e){return t.setMain(i)}}}),e("el-select",{staticClass:"u-tv_type",attrs:{placeholder:"请选择直播平台","popper-append-to-body":""},model:{value:i.tv_type,callback:function(e){t.$set(i,"tv_type",e)},expression:"item.tv_type"}},t._l(t.tv_types,(function(t,i){return e("el-option",{key:i,attrs:{label:t,value:i}})})),1)],1)]),e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{"margin-left":"10px"}},[e("el-input",{staticClass:"u-tv",attrs:{placeholder:"房间号"},model:{value:i.tv,callback:function(e){t.$set(i,"tv",e)},expression:"item.tv"}})],1)]),e("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:6}},[e("div",{staticClass:"u-desc"},[e("el-input",{attrs:{placeholder:"角色名"},model:{value:i.role_name,callback:function(e){t.$set(i,"role_name",e)},expression:"item.role_name"}}),e("el-button",{attrs:{type:"info",icon:"el-icon-delete",circle:"",plain:"",title:"移除",size:"mini",disabled:t.tv_list&&1==t.tv_list.length},on:{click:function(e){return t.removeTv(s)}}})],1)])],1)})),e("el-button",{staticClass:"u-add",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addTv}},[t._v("添加直播间")])],2)]),e("el-form-item",{attrs:{label:"团队成员"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.v_member,callback:function(e){t.$set(t.form,"v_member",t._n(e))},expression:"form.v_member"}},t._l(t.vismap,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"团队活动"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.v_activity,callback:function(e){t.$set(t.form,"v_activity",t._n(e))},expression:"form.v_activity"}},t._l(t.vismap,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"团队DKP"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.v_dkp,callback:function(e){t.$set(t.form,"v_dkp",t._n(e))},expression:"form.v_dkp"}},t._l(t.vismap,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"留言板"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.v_comment,callback:function(e){t.$set(t.form,"v_comment",t._n(e))},expression:"form.v_comment"}},t._l(t.vismap,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",[e("el-button",{staticClass:"u-btn",attrs:{type:"primary",disabled:t.building||!t.ready},on:{click:t.submit}},[t._v(t._s(t.btn_txt))])],1)],1)],1)},l=[],a=i("5530"),n=(i("d81d"),i("14d9"),i("a434"),i("e9f5"),i("7d54"),i("ab43"),i("a9e3"),i("d3b7"),i("159b"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-upload-logo"},[t.data?e("div",{staticClass:"u-logo"},[e("img",{attrs:{src:t.preview}}),e("i",{staticClass:"u-logo-mask"}),e("i",{staticClass:"u-logo-delete el-icon-delete",attrs:{title:"移除"},on:{click:t.remove}})]):e("div",{staticClass:"u-upload el-upload el-upload--picture-card",on:{click:t.select}},[e("i",{staticClass:"el-icon-plus"})]),e("input",{ref:"uploadInput",staticClass:"u-upload-input",attrs:{type:"file"},on:{change:t.upload}})])}),r=[],o=i("85e4"),c=i("8194"),u={name:"upload",props:["content"],data:function(){return{data:this.content||""}},model:{prop:"content",event:"update"},watch:{data:function(t){this.$emit("update",t)},content:function(t){this.data=t}},computed:{fileInput:function(){return this.$refs.uploadInput},preview:function(){return Object(o["l"])(this.data,296,!0)}},methods:{select:function(){this.fileInput.dispatchEvent(new MouseEvent("click"))},upload:function(){var t=this,e=new FormData;e.append("avatar",this.fileInput.files[0]),Object(c["e"])(e).then((function(e){t.data=e.data.data[0],t.$message({message:"上传成功",type:"success"})}))},remove:function(){this.data=""}},mounted:function(){},components:{}},m=u,d=(i("5d41"),i("2877")),f=Object(d["a"])(m,n,r,!1,null,null,null),p=f.exports,v=i("12d4"),h=i("a59a"),b=i("65c2"),_=i("acdd"),g=i("97d5"),y=i("8474"),k=i("bd13"),w=i("681e"),x=i("2ef0"),$=i.n(x),C={describe:"",team_id:0,tv:"",tv_type:"",weight:0,main:!0,role_name:""},O={props:["data","btn_txt","processing"],data:function(){return{position:window.innerWidth<768?"top":"left",vismap:g,tags:y,tv_types:_,form:this.data||{name:"",client:this.client,server:"",logo:"",desc:"",recruit:"",tv_type:"",tv:"",v_member:99,v_dkp:99,v_activity:99,v_comment:99,yy_channel:"",qq_group:"",tags:[]},building:this.processing||!1,clients:{},isExist:!1,isNumber:!1,tv_list:[Object(a["a"])(Object(a["a"])({},C),{},{team_id:~~this.id})]}},model:{prop:"data",event:"update"},watch:{data:function(t){this.form=t},form:{deep:!0,handler:function(t){this.$emit("update",t)}},processing:function(t){this.building=t}},computed:{id:function(){return this.$route.params.id},ready:function(){return!this.isExist&&!this.isNumber},client:function(){return this.$store.state.client},servers:function(){return"origin"===this.form.client?h:v}},methods:{submit:function(){this.form.name&&this.form.server?this.$emit("submit"):this.$alert("团队名和服务器不能为空","提醒",{confirmButtonText:"确定"})},checkTeamName:function(){var t=Object(k["a"])(this.form.name).removeSpace();this.form.name=Object(k["a"])(t).kill(),this.isNumber=!isNaN(Number(this.form.name)),this.form.name&&this.form.server&&(this.id||this.requestTeamExist())},requestTeamExist:function(){var t=this;Object(w["t"])(this.form.server,this.form.name).then((function(e){t.isExist=e.data.data.exist}))},changeClient:function(){this.form.server=""},buildClients:function(){var t={};for(var e in b["__clients"])"all"!=e&&(t[e]=b["__clients"][e]);this.clients=t},addTv:function(){this.tv_list.push(Object(a["a"])(Object(a["a"])({},C),{},{team_id:~~this.id,main:!1}))},removeTv:function(t){if(1!=this.tv_list.length){this.tv_list.splice(t,1);var e=$.a.maxBy(this.tv_list,"weight");e&&this.setMain(e)}},submitTv:function(){var t=this.tv_list.map((function(t){return t.main?t.weight=1:t.weight=0,$.a.omit(t,["main"])}));Object(w["e"])(this.id,t).catch((function(t){console.log(t)}))},loadTv:function(){var t=this;this.id&&Object(w["o"])(this.id).then((function(e){var i;t.tv_list=(null===(i=e.data)||void 0===i?void 0:i.data)||[Object(a["a"])(Object(a["a"])({},C),{},{team_id:~~t.id})];var s=$.a.maxBy(t.tv_list,"weight");s&&t.setMain(s)}))},setMain:function(t){var e=this;this.tv_list.forEach((function(i){e.$set(i,"main",!1),i.tv==t.tv&&e.$set(i,"main",!0)}))}},mounted:function(){this.buildClients(),this.loadTv()},components:{UploadLogo:p}},j=O,S=(i("35e3"),Object(d["a"])(j,s,l,!1,null,null,null));e["a"]=S.exports}}]);