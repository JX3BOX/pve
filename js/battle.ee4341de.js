(function(t){function e(e){for(var a,i,c=e[0],s=e[1],u=e[2],l=0,d=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);f&&f(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={battle:0},o={battle:0},r=[];function c(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-06797351":"1de0111f","chunk-18e21e31":"c863e8ff","chunk-2582b1c6":"f7fd071a","chunk-222040de":"cc61ea75","chunk-2285316c":"7dcda6b8","chunk-3c2c3018":"abb07f51","chunk-c7a68638":"a98d8f2a","chunk-59baeed2":"df927326","chunk-cdc76b60":"3817bef4","chunk-2c0bf874":"0fe0dd76","chunk-2d0af0eb":"9bcb5c3a","chunk-38b758b2":"4ee55c20","chunk-6125f4b0":"8a93dfa3"}[t]+".js"}function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-06797351":1,"chunk-18e21e31":1,"chunk-222040de":1,"chunk-2285316c":1,"chunk-3c2c3018":1,"chunk-c7a68638":1,"chunk-59baeed2":1,"chunk-cdc76b60":1,"chunk-2c0bf874":1,"chunk-38b758b2":1,"chunk-6125f4b0":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-06797351":"8fee607b","chunk-18e21e31":"8b260d25","chunk-2582b1c6":"31d6cfe0","chunk-222040de":"d2f6f29f","chunk-2285316c":"68b82e9f","chunk-3c2c3018":"4de457ca","chunk-c7a68638":"7934a243","chunk-59baeed2":"23e3fa4d","chunk-cdc76b60":"2d7168de","chunk-2c0bf874":"3346bdab","chunk-2d0af0eb":"31d6cfe0","chunk-38b758b2":"6ac09022","chunk-6125f4b0":"638022b8"}[t]+".css",o=s.p+a,r=document.getElementsByTagName("link"),c=0;c<r.length;c++){var u=r[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===o))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===a||l===o)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||o,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete i[t],f.parentNode.removeChild(f),n(r)},f.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(f)})).then((function(){i[t]=0})));var a=o[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=o[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",d.name="ChunkLoadError",d.type=a,d.request=i,n[1](d)}o[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="https://cdn.jx3box.com/static/pve/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;r.push([7,"chunk-vendors"]),n()})({"0265":function(t,e,n){},"1cf0":function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"m-battle-form-dialog",attrs:{title:"编辑战斗记录信息",visible:t.editing,width:"60%",center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.editing=e}}},[e("div",{staticClass:"m-battle-edit"},[e("el-form",{attrs:{model:t.editingData,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.editingData.title,callback:function(e){t.$set(t.editingData,"title",e)},expression:"editingData.title"}})],1),e("el-form-item",{attrs:{label:"描述"}},[e("el-input",{attrs:{placeholder:"请输入描述",type:"textarea",rows:4},model:{value:t.editingData.desc,callback:function(e){t.$set(t.editingData,"desc",e)},expression:"editingData.desc"}})],1),e("el-form-item",{attrs:{label:"阅读权限"}},[e("el-radio-group",{model:{value:t.editingData.visible,callback:function(e){t.$set(t.editingData,"visible",e)},expression:"editingData.visible"}},[e("el-radio",{attrs:{label:0}},[t._v("公开")]),e("el-radio",{attrs:{label:1}},[t._v("私有")]),e("el-radio",{attrs:{label:2}},[t._v("仅亲友可见")])],1)],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.editing=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:t.save}},[t._v("确 定")])],1)])},i=[],o=(n("d3b7"),n("5ab5")),r=n("2ef0"),c={name:"battleEdit",props:{data:{type:[Object,String],default:function(){}},value:{type:Boolean,default:!1}},data:function(){return{editing:!1,editingData:{},editLoading:!1}},watch:{data:{handler:function(t){this.editingData=Object(r["cloneDeep"])(t)},immediate:!0},value:{handler:function(t){this.editing=t}},editing:{handler:function(t){this.$emit("input",t)}}},methods:{save:function(){var t=this;this.editLoading=!0,Object(o["j"])(this.editingData.id,{title:this.editingData.title,desc:this.editingData.desc,visible:this.editingData.visible}).then((function(e){0===e.data.code?(t.$emit("update"),t.editing=!1,t.$message.success("编辑成功")):t.$message.error(e.data)})).catch((function(e){console.log(e),t.$message.error("未知错误，请F12打开控制台将报错内容截图反馈！")})).finally((function(){t.editLoading=!1}))}}},s=c,u=n("2877"),l=Object(u["a"])(s,a,i,!1,null,null,null);e["a"]=l.exports},"1dfb":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=n("5c96"),o=n.n(i),r=n("6a69"),c=(n("6b30"),n("c5b4"),n("4eb5")),s=n.n(c),u=n("5c7f"),l=(n("313e"),n("16e5")),d=(n("d3b7"),n("3ca3"),n("2ca0"),n("ddb0"),n("8c4f")),f=function(){return n.e("chunk-18e21e31").then(n.bind(null,"f690"))},m=function(){return Promise.all([n.e("chunk-2582b1c6"),n.e("chunk-222040de"),n.e("chunk-3c2c3018"),n.e("chunk-c7a68638")]).then(n.bind(null,"d972"))},b=function(){return Promise.all([n.e("chunk-2582b1c6"),n.e("chunk-59baeed2"),n.e("chunk-222040de"),n.e("chunk-3c2c3018"),n.e("chunk-cdc76b60")]).then(n.bind(null,"08cf"))},p=function(){return n.e("chunk-6125f4b0").then(n.bind(null,"a4e7f"))},h=function(){return n.e("chunk-2c0bf874").then(n.bind(null,"f32a"))},v=function(){return n.e("chunk-2d0af0eb").then(n.bind(null,"0d67"))},k=function(){return n.e("chunk-06797351").then(n.bind(null,"922b"))},g=function(){return Promise.all([n.e("chunk-2582b1c6"),n.e("chunk-222040de"),n.e("chunk-2285316c")]).then(n.bind(null,"7a78"))},_=function(){return n.e("chunk-38b758b2").then(n.bind(null,"03c4"))};if(a["default"].use(d["a"]),location.pathname.startsWith("/battle/view")){var y=location.pathname.split("/").pop();location.href=location.origin+"/battle/#/combat/"+y}var w=[{name:"root",path:"/",redirect:"/index"},{name:"index",path:"/index",component:f},{name:"upload",path:"/upload",component:m},{name:"combat",path:"/combat/:id?",component:b},{name:"public",path:"/public",component:p},{name:"mine",path:"/mine",component:h},{name:"preferences",path:"/preferences",component:v},{name:"jba",path:"/jba",component:k},{name:"add",path:"/add/:type",component:g},{name:"search",path:"/search",component:_}],x=new d["a"]({routes:w}),j=x,C=n("2e94"),O=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Header"),e("Breadcrumb",{attrs:{name:"战斗统计",slug:"battle",root:"/battle",publishEnable:!1,adminEnable:!1,feedbackEnable:!0,crumbEnable:!0}},[t.isAdmin&&t.id?e("el-dropdown",{staticClass:"m-header-dropmenu",attrs:{slot:"op-append",trigger:"click"},slot:"op-append"},[e("el-button",{attrs:{type:"primary",size:"small"}},[t._v("管理操作"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{staticClass:"m-header-dropmenu__content",attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.rank.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-s-data"}),t._v("天梯")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.edit.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-edit-outline"}),t._v("编辑")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.del.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")])],1)],1):t._e()],1),e("LeftSidebar",[e("Nav")],1),e("Main",{attrs:{withoutRight:!0}},[e("div",{staticClass:"m-main"},[e("router-view")],1),e("Footer")],1),e("EditLogs",{attrs:{data:t.current},model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}}),e("RankRelated",{attrs:{data:t.current},model:{value:t.showRank,callback:function(e){t.showRank=e},expression:"showRank"}})],1)},E=[],$=(n("14d9"),n("c9d2")),D=n("5ab5"),S=(n("b0c0"),function(){var t=this,e=t._self._c;return e("nav",{staticClass:"m-nav"},[e("a",{staticClass:"m-nav-add el-button el-button--primary",on:{click:t.toUpload}},[t._m(0)]),e("ul",{staticClass:"m-battle-route"},t._l(t.navList,(function(n,a){return e("li",{key:a},[e("router-link",{staticClass:"u-item",attrs:{to:n.path}},[e("i",{staticClass:"u-icon",class:n.icon}),e("span",{staticClass:"u-text"},[t._v(t._s(n.name))])])],1)})),0)])}),R=[function(){var t=this,e=t._self._c;return e("span",[e("i",{staticClass:"el-icon-upload"}),t._v(" 上传数据 ")])}],L=n("65c2"),T={name:"Nav",data:function(){return{navList:[{name:"使用说明",key:"index",icon:"el-icon-reading",path:"/index"},{name:"我的数据",key:"mine",icon:"el-icon-folder",path:"/mine"},{name:"数据大厅",key:"public",icon:"el-icon-search",path:"/public"},{name:"魔盒助手",key:"jba",icon:"el-icon-box",path:"/jba"}]}},computed:{},methods:{toUpload:function(){"/upload"!=this.$route.path&&this.$router.push({name:"upload"})}},filters:{mountIcon:function(t){return L["__imgPath"]+"image/xf/"+t+".png"}},mounted:function(){},components:{}},P=T,N=(n("56b4"),n("2877")),A=Object(N["a"])(P,S,R,!1,null,null,null),I=A.exports,B=n("1cf0"),M=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,title:"关联天梯榜"},on:{"update:visible":function(e){t.visible=e},close:t.cancel}},[e("el-form",{attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"赛事"}},[e("el-select",{staticClass:"u-select",attrs:{clearable:"",placeholder:"请选择赛事"},on:{clear:t.rankClear},model:{value:t.form.rank_id,callback:function(e){t.$set(t.form,"rank_id",e)},expression:"form.rank_id"}},t._l(t.ranks,(function(t){return e("el-option",{key:t.ID,attrs:{value:t.ID,label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"首领"}},[e("el-select",{staticClass:"u-select",attrs:{clearable:"",placeholder:"请选择首领",disabled:!t.form.rank_id},model:{value:t.form.boss_id,callback:function(e){t.$set(t.form,"boss_id",e)},expression:"form.boss_id"}},t._l(t.bossMap,(function(t){return e("el-option",{key:t.achievement_id,attrs:{value:t.achievement_id,label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"心法"}},[e("el-select",{staticClass:"u-select",attrs:{clearable:""},model:{value:t.form.mount_id,callback:function(e){t.$set(t.form,"mount_id",e)},expression:"form.mount_id"}},t._l(t.xfid,(function(n,a){return e("el-option",{key:n,attrs:{value:~~a,label:n}},[e("div",{staticClass:"u-mount-item"},[e("img",{staticClass:"u-item-avatar",attrs:{src:t.showAvatar(a)}}),e("span",[t._v(t._s(n))])])])})),1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{loading:t.btnLoading},on:{click:t.cancel}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.confirm}},[t._v("确 定")])],1)],1)},U=[],z=(n("7db0"),n("e9f5"),n("f665"),n("e9c4"),n("b64b"),n("91d4")),F=n("2ef0"),J={name:"rankRelated",props:{value:{type:Boolean,default:!1},data:{type:[Object,String],default:function(){return{}}}},data:function(){return{form:{rank_id:"",boss_id:"",mount_id:""},ranks:[],visible:!1,xfid:z,btnLoading:!1}},computed:{bossMap:function(){var t=this,e=this.ranks.find((function(e){return e.ID===t.form.rank_id}));return e?e.boss_map:[]}},watch:{value:function(t){this.visible=t},visible:function(t){this.$emit("input",t),t&&(this.getRanks(),this.form.rank_id=this.data.rank_id||"",this.form.boss_id=this.data.boss_id||"",this.form.mount_id=this.data.mount_id||"")}},methods:{getRanks:function(){var t=this;try{var e=sessionStorage.getItem("jbRanks");if(e)return void(this.ranks=JSON.parse(e));var n={pageIndex:1,pageSize:100};Object(D["h"])(n).then((function(e){t.ranks=e.data.data.list||[],sessionStorage.setItem("jbRanks",JSON.stringify(t.ranks))}))}catch(a){console.log(a)}},showAvatar:function(t,e){return L["__imgPath"]+"image/xf/"+t+".png"},cancel:function(){this.form=this.$options.data().form,this.visible=!1},confirm:function(){var t=this;this.btnLoading=!0;var e={rank_id:~~this.form.rank_id,boss_id:~~this.form.boss_id,mount_id:~~this.form.mount_id};Object(D["b"])(this.data.id,e).then((function(e){t.$message.success("关联成功"),t.visible=!1;var n=Object(F["cloneDeep"])(t.data);n.rank_id=~~t.form.rank_id,n.boss_id=~~t.form.boss_id,n.mount_id=~~t.form.mount_id,t.$store.commit("SET_CURRENT",n)})).catch((function(e){t.$message.error(e.msg)})).finally((function(){t.btnLoading=!1}))},rankClear:function(){this.form.boss_id=""}}},q=J,H=(n("478b"),Object(N["a"])(q,M,U,!1,null,"5deae968",null)),K=H.exports,W={name:"App",data:function(){return{showEdit:!1,showRank:!1}},computed:{isAdmin:function(){return $["a"].isAdmin()},id:function(){return this.$route.params.id},current:function(){return this.$store.state.current}},methods:{del:function(){var t=this;this.$confirm("确定删除该数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(D["c"])(t.id).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.$router.push({name:"public"})}))}))},edit:function(){this.showEdit=!0},rank:function(){this.showRank=!0}},components:{Nav:I,EditLogs:B["a"],RankRelated:K}},G=W,Q=(n("3e45"),Object(N["a"])(G,O,E,!1,null,null,null)),V=Q.exports;a["default"].config.productionTip=!1,a["default"].use(o.a),a["default"].use(r["a"]),a["default"].use(s.a),a["default"].component("v-echart",u["a"]),l["a"].install(a["default"]),new a["default"]({router:j,store:C["a"],render:function(t){return t(V)}}).$mount("#app")},"2e94":function(t,e,n){"use strict";n("caad"),n("2532");var a=n("2b0e"),i=n("2f62");a["default"].use(i["a"]);var o={state:{file:"",raw:"",data:"",analysis:"",info:{subject:"stat",type:"tinymins",file_name:"",file_size:0},current:"",type:"damage",client:location.href.includes("origin")?"origin":"std"},mutations:{set:function(t,e){t[e["key"]]=e["val"]},setToken:function(t,e){t.stsToken=e},patch:function(t,e){for(var n in e)t[n]=e[n]},SET_INFO:function(t,e){t.info=e},SET_CURRENT:function(t,e){t.current=e},RESET:function(t){t.file="",t.raw="",t.data="",t.analysis="",t.info={subject:"stat",type:"tinymins"}}},getters:{},actions:{},modules:{}};e["a"]=new i["a"].Store(o)},3630:function(t,e,n){},"3e45":function(t,e,n){"use strict";n("3630")},"478b":function(t,e,n){"use strict";n("0265")},"56b4":function(t,e,n){"use strict";n("7dc3")},"5ab5":function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"i",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"j",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return m})),n.d(e,"b",(function(){return b}));var a=n("41cb"),i=Object(a["g"])({mute:!0}),o=function(){return i.get("/api/team/new-token")},r=function(t){return i.get("/api/team/battle/".concat(t))},c=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i.get("/api/team/battle/upload/".concat(t,"/sts-token"),{params:{gzip:e?1:0}})},s=function(t){return i.post("/api/team/battle",t)},u=function(t,e){return i.put("/api/team/battle/".concat(t),e)},l=function(t){return i.delete("/api/team/battle/".concat(t))},d=function(t){return i.get("/api/team/battle/my-list",{params:t})},f=function(t){var e=t.page,n=void 0===e?1:e,a=t.type,o=t.subject,r=t.title,c=t.battle_id;return i.get("/api/team/battle/public-list",{params:{pageIndex:n,type:a,subject:o,title:r,battle_id:c}})},m=function(t){return i.get("/api/team/rank/events",{params:t})},b=function(t,e){return i.put("/api/team/battle/".concat(t,"/rank-info"),e)}},7:function(t,e,n){t.exports=n("1dfb")},"7dc3":function(t,e,n){}});