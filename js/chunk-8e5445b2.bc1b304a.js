(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e5445b2"],{1344:function(t,e,i){"use strict";e["a"]=function(t){return{all:t=t||new Map,on:function(e,i){var a=t.get(e);a?a.push(i):t.set(e,[i])},off:function(e,i){var a=t.get(e);a&&(i?a.splice(a.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var a=t.get(e);a&&a.slice().map((function(t){t(i)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,i)}))}}}},"24bf":function(t){t.exports=JSON.parse('{"bps_pve":["技改详解","基础理论","门派详解","手法循环","配装思路","特效武器","副本实战","试炼之地","浪客行","游戏设置","工具助手","资料资源"],"bps_pvp":["技改详解","竞技技巧","竞技场","战场","吃鸡","小攻防","大攻防","插旗","野外","李渡鬼蜮","列星虚境","飞火论锋","游戏设置","工具助手","资料资源"],"bbs":["萌新指南","节日","活动","外观","同人","家园","红尘侠影","日记","树洞","随感","回忆录"]}')},3852:function(t,e,i){"use strict";i("3a03")},"3a03":function(t,e,i){},"408e":function(t,e,i){"use strict";i.r(e);i("ac1f"),i("841c"),i("498a");var a=function(){var t=this,e=t._self._c;return e("ListLayout",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-archive-box"},[e("div",{staticClass:"m-archive-search",attrs:{slot:"search-before"},slot:"search-before"},[e("a",{staticClass:"u-publish el-button el-button--primary",attrs:{href:t.publish_link}},[t._v("+ 发布作品")]),e("el-input",{attrs:{placeholder:"请输入搜索内容",clearable:""},on:{clear:t.onSearch},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search="string"===typeof e?e.trim():e},expression:"search"}},[e("span",{attrs:{slot:"prepend"},slot:"prepend"},[e("i",{staticClass:"el-icon-search"}),t._v(" "),e("span",{staticClass:"u-search"},[t._v("关键词")])]),e("el-button",{staticClass:"u-btn",attrs:{slot:"append",icon:"el-icon-position"},on:{click:t.onSearch},slot:"append"})],1)],1),e("div",{staticClass:"m-archive-filter"},[e("div",{staticClass:"m-filter--left"},[e("el-radio-group",{staticClass:"u-type",attrs:{size:"mini"},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}},[e("el-radio-button",{attrs:{label:""}},[t._v("全部")]),e("el-radio-button",{attrs:{label:"PVE"}},[t._v("PVE")]),e("el-radio-button",{attrs:{label:"PVP"}},[t._v("PVP")])],1),e("markBy",{attrs:{marks:t.marks},on:{filter:t.filterMeta}}),e("zlpBy",{attrs:{type:"zlp",client:t.client},on:{filter:t.filterMeta}}),e("topicBy",{attrs:{topics:t.topics},model:{value:t.topic,callback:function(e){t.topic=e},expression:"topic"}})],1),e("div",{staticClass:"m-filter--right"},[e("orderBy",{on:{filter:t.filterMeta}})],1)]),t.data&&t.data.length?e("div",{staticClass:"m-archive-list"},[e("ul",{staticClass:"u-list"},[t.isMiniprogram?t._l(t.data,(function(i){return e("list-item-miniprogram",{key:i.ID,attrs:{item:i,order:t.order,caller:"bps_highlights_index_click"}})})):t._l(t.data,(function(i){return e("list-item",{key:i.ID,attrs:{item:i,order:t.order,caller:"bps_highlights_index_click"}})}))],2)]):e("el-alert",{staticClass:"m-archive-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage}})],1)])},n=[],s=i("ade3"),r=i("2909"),o=(i("99af"),i("caad"),i("d81d"),i("14d9"),i("b0c0"),i("e9f5"),i("ab43"),i("b64b"),i("d3b7"),i("2c3e"),i("6062"),i("1e70"),i("79a4"),i("c1a1"),i("8b00"),i("a4e7"),i("1e5a"),i("72c3"),i("2532"),i("3ca3"),i("ddb0"),i("6a2f")),c=i("6472"),l=i("d4a7"),u=i("85e4"),p=i("d8e4"),d=i("24bf"),h=i("16e5"),m="bps",f={recommended:"编辑精选",geek:"骨灰必备"},v={name:"Index",props:[],data:function(){return{loading:!1,data:[],page:1,per:10,total:1,pages:1,number_queries:["per","page"],subtype:"",order:"update",mark:"",client:this.$store.state.client,search:"",zlp:"",tag:"",topic:"",pv_types:["PVE","PVP"],marks:f,isMiniProgram:!1}},computed:{publish_link:function(){return Object(u["r"])(m)},hasNextPage:function(){return this.pages>1&&this.page<this.total},query:function(){return{subtype:this.subtype,order:this.order,mark:this.mark,client:this.client,zlp:this.zlp,tag:this.tag,topic:this.topic,star:1}},pg_queries:function(){return{page:this.page,per:this.per}},reset_queries:function(){return[this.subtype]},topics:function(t){var e=t.tag;return"PVE"===e?d["bps_pve"]:"PVP"===e?d["bps_pvp"]:Object(r["a"])(new Set([].concat(Object(r["a"])(d["bps_pve"]),Object(r["a"])(d["bps_pvp"]))))},aggregate:function(){var t=this;return this.data.map((function(e){return t.postLink(e.ID)}))}},methods:{postLink:function(t){return"/".concat(m,"/")+t},reporterLink:function(t){var e="std"===this.client?"www":"origin";return"".concat(e,":/").concat(m,"/")+t},onSearch:function(){1===this.page?this.loadData():this.page=1},buildQuery:function(t){t&&(this.page+=1);var e={per:this.per,page:this.page};for(var i in this.query)void 0!==this.query[i]&&""!==this.query[i]&&null!==this.query[i]&&("search"==i?e.search=this.query.search.trim():e[i]=this.query[i]);return e.subtype&&(e.sticky=1),this.search&&(e.search=this.search.trim()),e},loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.buildQuery(e);return console.log("[cms-list]","<loading data>",i),this.loading=!0,Object(p["e"])(i).then((function(i){var a,n,s,r,o,c,l,u,p,d;e?t.data=t.data.concat(null===(l=i.data)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.list):t.data=null===(p=i.data)||void 0===p||null===(d=p.data)||void 0===d?void 0:d.list;t.total=null===(a=i.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.total,t.pages=null===(s=i.data)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.pages,Object(h["b"])({caller:"bps_highlight_index_load",data:{aggregate:null===(o=i.data)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.list.map((function(e){return t.reporterLink(e.ID)}))}})})).finally((function(){t.loading=!1}))},replaceRoute:function(t){return this.$router.push({name:this.$route.name,query:Object.assign({},this.$route.query,t)}).then((function(){window.scrollTo(0,0)})).catch((function(t){}))},filterMeta:function(t){this.replaceRoute(Object(s["a"])(Object(s["a"])({},t["type"],t["val"]),"page",1))},filterImperceptibly:function(t){this[t["type"]]=t["val"]},changePage:function(t){this.loadData(),this.replaceRoute({page:t})},appendPage:function(){this.loadData(!0)}},watch:{"$route.query":{deep:!0,immediate:!0,handler:function(t){if(Object.keys(t).length)for(var e in console.log("[cms-list]","<route query change>",t),t)this.number_queries.includes(e)?this[e]=~~t[e]:this[e]=t[e]}},reset_queries:{deep:!0,handler:function(){console.log("[cms-list]","<reset page>"),this.page=1}},query:{deep:!0,immediate:!0,handler:function(t){console.log("[cms-list]","<request query change>",t),this.loadData()}}},mounted:function(){var t;this.isMiniprogram=(null===(t=document.getElementsByClassName("v-miniprogram"))||void 0===t?void 0:t.length)>0},components:{listItem:c["a"],ListLayout:o["a"],listItemMiniprogram:l["a"]}},g=v,_=(i("aebe"),i("2877")),b=Object(_["a"])(g,a,n,!1,null,null,null);e["default"]=b.exports},4941:function(t,e,i){},"498a":function(t,e,i){"use strict";var a=i("23e7"),n=i("58a8").trim,s=i("c8d2");a({target:"String",proto:!0,forced:s("trim")},{trim:function(){return n(this)}})},6472:function(t,e,i){"use strict";i("2c3e");var a=function(){var t=this,e=t._self._c;return e("li",{staticClass:"u-item"},[e("a",{directives:[{name:"reporter",rawName:"v-reporter",value:{data:{href:t.reporterLink(t.item.ID)},caller:t.caller},expression:"{\n            data: {\n                href: reporterLink(item.ID),\n            },\n            caller,\n        }"}],staticClass:"u-banner",attrs:{href:t.postLink(t.item.ID),target:t.target}},[e("img",{key:t.item.ID,attrs:{src:t.getBanner(t.item.post_banner,t.item.post_subtype)}}),e("span",{staticClass:"u-subject",class:t.subject||"ALL"},[t._v(t._s(t.subject||"ALL"))])]),e("h2",{staticClass:"u-post",class:{isSticky:t.item.sticky}},[e("img",{staticClass:"u-icon",attrs:{src:t._f("xficon")(t.item.post_subtype),alt:t.item.post_subtype,title:t.item.post_subtype}}),t.item.zlp?e("span",{staticClass:"u-label u-zlp"},[t._v(t._s(t.item.zlp))]):t._e(),t.item.is_wujie?e("span",{staticClass:"u-label u-zlp u-wujie"},[t._v("无界")]):t._e(),e("a",{directives:[{name:"reporter",rawName:"v-reporter",value:{data:{href:t.reporterLink(t.item.ID)},caller:t.caller},expression:"{\n                data: {\n                    href: reporterLink(item.ID),\n                },\n                caller,\n            }"}],staticClass:"u-title",style:t._f("showHighlight")(t.item.color),attrs:{href:t.postLink(t.item.ID),target:t.target}},[t._v(t._s(t.item.post_title||"无标题"))]),t.item.mark&&t.item.mark.length?e("span",{staticClass:"u-marks"},t._l(t.item.mark,(function(i){return e("i",{key:i,staticClass:"u-mark"},[t._v(t._s(t._f("showMark")(i)))])})),0):t._e(),t.hasPermission?e("span",{staticClass:"u-push"},[t.showPushDate?e("time",{staticClass:"u-push__time",class:{"is-recent":t.isRecent()}},[t._v(t._s(t.pushDate)+" 已推送")]):t._e(),e("el-button",{staticClass:"u-push__btn",attrs:{size:"mini",type:"warning",icon:"el-icon-s-promotion"},on:{click:t.onPush}},[t._v("推送")])],1):t._e()]),e("div",{staticClass:"u-content u-desc"},[e("div",{staticClass:"u-metalist u-collection"},[e("strong",[t._v("小册")]),e("em",[~~t.item.post_collection?[e("a",{attrs:{href:"/collection/".concat(t.item.post_collection),target:"_blank"}},[t._v("《"+t._s(t.item.collection_info&&t.item.collection_info.title)+"》")])]:[t._v("-")]],2)]),e("div",{staticClass:"u-metalist u-topics"},[e("strong",[t._v("主题")]),e("em",[t.item.topics&&t.item.topics.length?t._l(t.item.topics,(function(i){return e("a",{key:i,staticClass:"u-topic",attrs:{href:"/bps?topic=".concat(i)}},[t._v(t._s(i))])})):[t._v("-")]],2)])]),e("div",{staticClass:"u-misc"},[e("img",{staticClass:"u-author-avatar",attrs:{src:t._f("showAvatar")(t.item.author_info),alt:t._f("showNickname")(t.item.author_info)}}),e("a",{staticClass:"u-author-name",attrs:{href:t._f("authorLink")(t.item.post_author),target:"_blank"}},[t._v(t._s(t._f("showNickname")(t.item.author_info)))]),e("span",{staticClass:"u-date"},[t._v(" Updated on "),"update"==t.order?e("time",[t._v(t._s(t._f("dateFormat")(t.item.post_modified)))]):e("time",[t._v(t._s(t._f("dateFormat")(t.item.post_date)))])])])])},n=[],s=(i("99af"),i("caad"),i("8a79"),i("2532"),i("85e4")),r=i("65c2"),o=i("1647"),c=i("e4f1"),l=i("46d4"),u=i("c9d2"),p=i("5a0c"),d=i.n(p),h=i("d8ad"),m="bps",f={name:"ListItem",props:["item","order","caller"],components:{},data:function(){return{target:Object(s["b"])()}},computed:{subject:function(){var t,e,i,a,n="";return null!==(t=this.item.tags)&&void 0!==t&&t.includes("PVE")&&null!==(e=this.item.tags)&&void 0!==e&&e.includes("PVP")?n="ALL":null!==(i=this.item.tags)&&void 0!==i&&i.includes("PVE")?n="PVE":null!==(a=this.item.tags)&&void 0!==a&&a.includes("PVP")&&(n="PVP"),n},client:function(){var t;return null===(t=this.item)||void 0===t?void 0:t.client},hasPermission:function(){return u["a"].hasPermission("push_banner")},pushDate:function(t){var e,i=t.item,a=null===i||void 0===i||null===(e=i.log)||void 0===e?void 0:e.push_at;return Object(c["b"])(new Date(a))},showPushDate:function(){var t;return Boolean(null===(t=this.item)||void 0===t?void 0:t.log)}},methods:{getBanner:function(t,e){if(t)return t.endsWith(".webp")||t.endsWith(".gif")?t:Object(s["u"])(t);var i,a=e&&(null===(i=l[e])||void 0===i?void 0:i["id"])||0;return r["__imgPath"]+"image/bps_thumbnail/"+a+".png"},postLink:function(t){return location.origin+"/".concat(m,"/")+t},reporterLink:function(t){var e="std"===this.client?"www":"origin";return"".concat(e,":/").concat(m,"/")+t},showDate:c["b"],isRecent:function(){var t,e,i=null===(t=this.item)||void 0===t||null===(e=t.log)||void 0===e?void 0:e.push_at;return d()().diff(d()(i),"day")<30},onPush:function(){h["a"].emit("design-task",this.item)}},filters:{authorLink:s["a"],showHighlight:function(t){return t?"color:".concat(t,";font-weight:600;"):""},showMark:function(t){return o["a"][t]||t},showAvatar:function(t){return Object(s["t"])(null===t||void 0===t?void 0:t.user_avatar)},showNickname:function(t){return(null===t||void 0===t?void 0:t.display_name)||"匿名"},dateFormat:function(t){return Object(c["b"])(new Date(t))},xficon:function(t){t&&"其它"!=t||(t="通用");var e=l[t]&&l[t]["id"];return r["__imgPath"]+"image/xf/"+e+".png"}},created:function(){},mounted:function(){}},v=f,g=i("2877"),_=Object(g["a"])(v,a,n,!1,null,null,null);e["a"]=_.exports},"8a79":function(t,e,i){"use strict";var a=i("23e7"),n=i("4625"),s=i("06cf").f,r=i("50c4"),o=i("577e"),c=i("5a34"),l=i("1d80"),u=i("ab13"),p=i("c430"),d=n("".slice),h=Math.min,m=u("endsWith"),f=!p&&!m&&!!function(){var t=s(String.prototype,"endsWith");return t&&!t.writable}();a({target:"String",proto:!0,forced:!f&&!m},{endsWith:function(t){var e=o(l(this));c(t);var i=arguments.length>1?arguments[1]:void 0,a=e.length,n=void 0===i?a:h(r(i),a),s=o(t);return d(e,n-s.length,n)===s}})},aebe:function(t,e,i){"use strict";i("4941")},c8d2:function(t,e,i){"use strict";var a=i("5e77").PROPER,n=i("d039"),s=i("5899"),r="​᠎";t.exports=function(t){return n((function(){return!!s[t]()||r[t]()!==r||a&&s[t].name!==t}))}},d4a7:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("li",{staticClass:"m-list-item--miniprogram",on:{click:function(e){return e.stopPropagation(),t.toItem.apply(null,arguments)}}},[e("a",{staticClass:"m-left",attrs:{href:t.postLink(t.item.ID)}},[e("img",{key:t.item.ID,staticClass:"u-img",attrs:{src:t.getBanner(t.item.post_banner,t.item.post_subtype)}})]),e("div",{staticClass:"m-right m-info"},[e("div",{staticClass:"m-header"},[e("div",{staticClass:"u-title"},[t._v(" "+t._s(t.item.post_title||"无标题")+" ")]),t.item.zlp?e("span",{staticClass:"u-label u-zlp"},[t._v(t._s(t.item.zlp))]):t._e(),t.item.is_wujie?e("span",{staticClass:"u-label u-zlp u-wujie"},[t._v("无界")]):t._e()]),e("div",{staticClass:"m-bottom"},[e("a",{staticClass:"m-auth",attrs:{href:t._f("authorLink")(t.item.post_author)}},[e("img",{staticClass:"u-avatar",attrs:{src:t._f("showAvatar")(t.item.author_info),alt:t._f("showNickname")(t.item.author_info)}}),e("div",{staticClass:"u-name"},[t._v(t._s(t._f("showNickname")(t.item.author_info)))])]),e("div",{staticClass:"u-date"},["update"==t.order?e("time",[t._v(t._s(t._f("dateFormat")(t.item.post_modified)))]):e("time",[t._v(t._s(t._f("dateFormat")(t.item.post_date)))])])])])])},n=[],s=(i("8a79"),i("85e4")),r=i("65c2"),o=i("e4f1"),c=i("46d4"),l="bps",u={name:"ListItemMiniprogram",props:["item","order","caller"],components:{},methods:{getBanner:function(t,e){if(t)return t.endsWith(".webp")||t.endsWith(".gif")?t:Object(s["u"])(t);var i,a=e&&(null===(i=c[e])||void 0===i?void 0:i["id"])||0;return r["__imgPath"]+"image/bps_thumbnail/"+a+".png"},postLink:function(t){return location.origin+"/".concat(l,"/")+t},toItem:function(){window.open(this.postLink(this.item.ID))}},filters:{authorLink:s["a"],showHighlight:function(t){return t?"color:".concat(t,";font-weight:600;"):""},showAvatar:function(t){return Object(s["t"])(null===t||void 0===t?void 0:t.user_avatar)},showNickname:function(t){return(null===t||void 0===t?void 0:t.display_name)||"匿名"},dateFormat:function(t){return Object(o["b"])(new Date(t))},xficon:function(t){t&&"其它"!=t||(t="通用");var e=c[t]&&c[t]["id"];return r["__imgPath"]+"image/xf/"+e+".png"}}},p=u,d=(i("3852"),i("2877")),h=Object(d["a"])(p,a,n,!1,null,null,null);e["a"]=h.exports},d8ad:function(t,e,i){"use strict";var a=i("1344"),n=Object(a["a"])();e["a"]=n}}]);