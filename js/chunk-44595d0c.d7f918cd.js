(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44595d0c"],{"0f41":function(t,o,e){},"13d5":function(t,o,e){"use strict";var i=e("23e7"),n=e("d58f").left,s=e("a640"),a=e("1212"),r=e("9adc"),c=!r&&a>79&&a<83,l=c||!s("reduce");i({target:"Array",proto:!0,forced:l},{reduce:function(t){var o=arguments.length;return n(this,t,o,o>1?arguments[1]:void 0)}})},"164d":function(t,o,e){},"2dad":function(t,o,e){"use strict";e("164d")},3164:function(t,o,e){"use strict";e.d(o,"b",(function(){return n})),e.d(o,"a",(function(){return s}));var i=e("41cb");function n(t){var o={type:"fb"};return t&&(o=Object.assign(o,t)),Object(i["a"])().get("/api/cms/posts",{params:o})}function s(t){return Object(i["a"])().get("/api/cms/post/".concat(t))}},4933:function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t._self._c;return o("SingleLayout",[o("single",{attrs:{id:t.id}})],1)},n=[],s=function(){var t=this,o=t._self._c;return o("singlebox",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{post:t.post,stat:t.stat},on:{extendUpdate:t.updateExtend}},[o("div",{staticClass:"u-meta u-sub-block",attrs:{slot:"single-header"},slot:"single-header"},[o("em",{staticClass:"u-label"},[t._v("副本")]),o("span",{staticClass:"u-value"},[t._v(" "+t._s(t.post_subtype)+" ")])])])},a=[],r=(e("d3b7"),function(){var t=this,o=t._self._c;return o("div",{staticClass:"m-single-box"},[o("PostHeader",{attrs:{post:t.post,stat:t.stat}},[t._t("single-header")],2),o("div",{staticClass:"m-single-prepend"},[o("Creators",{staticClass:"m-single-creators",attrs:{postId:t.id,postType:t.post_type},on:{"load-authors":t.loadAuthors}}),o("Collection",{staticClass:"m-single-collection",attrs:{id:t.collection_id,defaultVisible:t.collection_collapse},on:{collectionUpdate:t.updateCollection}}),t._t("single-prepend")],2),t.visible?o("div",{staticClass:"m-single-post"},[o("el-divider",{attrs:{"content-position":"left"}},[t._v("JX3BOX")]),o("div",{staticClass:"m-single-content"},[t._t("default"),t.isMarkdown?o("ArticleMarkdown",{attrs:{content:t.post_content},on:{directoryRendered:t.updateDirectory}}):o("Article",{attrs:{content:t.post_content},on:{directoryRendered:t.updateDirectory}})],2)],1):o("div",{staticClass:"m-single-null"},[o("el-alert",{attrs:{title:t.null_tip,type:"warning","show-icon":""}})],1),o("div",{staticClass:"m-single-append"},[t._t("single-append"),o("PostGuide",{attrs:{post:t.post}}),o("Thx",{staticClass:"m-single-thx",attrs:{postId:t.id,postType:t.post_type,postTitle:t.post_title,userId:t.author_id,adminBoxcoinEnable:!0,userBoxcoinEnable:!0,authors:t.authors,client:t.post_client,allowGift:t.allow_gift,showRss:"","author-id":t.author_id,banner:t.banner}}),o("div",{ref:"commentView",staticClass:"m-single-comment"},[o("el-divider",{attrs:{"content-position":"left"}},[t._v("评论")]),t.id&&t.allow_comment?o("Comment",{attrs:{id:t.id,category:"post"}}):o("el-alert",{attrs:{title:"作者没有开启评论功能",type:"warning","show-icon":""}})],1)],2),o("footer",{staticClass:"m-single-footer"},[t._t("single-footer")],2),o("right-affix",{attrs:{postId:t.id,postType:t.post_type,postTitle:t.post_title,showComment:t.id&&t.allow_comment},on:{toComment:function(o){return t.toComment(o)}}})],1)}),c=[],l=e("2909"),u=(e("99af"),e("caad"),e("2532"),e("0cf2")),d=e("0016"),p=e("18e2"),f=e("2e26"),h=e("443c"),v=e("a974"),_=e("f305"),m=e("23d8"),b=e("a119"),g=e("65c2"),y=e("85e4"),w=e("c9d2"),C={name:"cms-single",components:{PostHeader:u["a"],Creators:d["a"],Collection:p["a"],Thx:f["a"],Article:v["a"],ArticleMarkdown:_["a"],Comment:m["a"],RightAffix:h["a"],PostGuide:b["a"]},props:["post","stat"],data:function(){return{collection_data:"",directory:!1,other_authors:[],super_author:""}},computed:{id:function(){var t;return~~(null===(t=this.post)||void 0===t?void 0:t.ID)||0},app_type:function(){return Object(y["h"])()},post_type:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.post_type},post_title:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.post_title},author_id:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.post_author},collection_id:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.post_collection},collection_collapse:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.collection_collapse},visible:function(){var t;return!(null===(t=this.post)||void 0===t||!t._check)},null_tip:function(){var t,o="作者设置了【";return o+=g["__visibleMap"][null===(t=this.post)||void 0===t?void 0:t.visible],o+="】",o},post_content:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.post_content)||""},post_mode:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.post_mode)||"tinymce"},isMarkdown:function(){return"markdown"==this.post_mode},allow_comment:function(){var t;return!(null!==(t=this.post)&&void 0!==t&&t.comment)},extend_data:function(){return{collection_data:this.collection_data,directory:this.directory}},authors:function(){return this.other_authors&&this.other_authors.length?[this.super_author].concat(Object(l["a"])(this.other_authors)):[]},post_client:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.client)||"all"},allow_gift:function(){var t;return null===(t=this.post)||void 0===t?void 0:t.allow_gift},isEditor:function(){return w["a"].isEditor()},showComment:function(){var t,o;return null===(t=this.post)||void 0===t||!t.comment_visible||((null===(o=w["a"].getInfo())||void 0===o?void 0:o.uid)==this.author_id||this.isEditor)},community_id:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.community_id)||0},banner:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.post_banner)||""}},methods:{updateCollection:function(t){this.collection_data=t},updateDirectory:function(t){this.directory=t},loadAuthors:function(t){var o=t.super_author,e=t.other_authors;this.super_author=o,this.other_authors=e},toComment:function(){this.$refs.commentView.scrollIntoView({block:"center",behavior:"auto"})}},watch:{extend_data:{deep:!0,immediate:!0,handler:function(t){this.$emit("extendUpdate",t)}},post_type:{deep:!0,immediate:!0,handler:function(t){location.host.includes("localhost")||t&&t!==this.app_type&&(location.href="/".concat(t,"/").concat(this.id))}},community_id:{immediate:!0,handler:function(t){if(t&&0!=t){if(location.href.includes("/community/".concat(t)))return;location.href="/community/".concat(t)}}}}},x=C,O=(e("990e"),e("2877")),j=Object(O["a"])(x,r,c,!1,null,null,null),I=j.exports,k=e("3164"),T=e("9616"),D="fb",S={name:"single",props:["id"],data:function(){return{loading:!1,post:{},stat:{}}},computed:{post_subtype:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.post_subtype)||"其它"}},methods:{updateExtend:function(t){this.$store.state.extend=t}},mounted:function(){var t=this;this.id&&(this.loading=!0,Object(k["a"])(this.id).then((function(o){var e;t.post=t.$store.state.post=o.data.data,t.$store.state.id=t.id,t.$store.state.user_id=null===(e=t.post)||void 0===e?void 0:e.post_author,document.title=t.post.post_title,w["a"].isLogin()&&(Object(T["b"])({source_type:D,source_id:~~t.id,link:location.href,title:t.post.post_title,author_id:t.post.post_author,banner:t.post.post_banner}),t.post.visible>1&&Object(T["c"])({id:t.id,category:"posts",subcategory:"default",visible_type:t.post.visible,author_id:t.post.post_author,banner:t.post.post_banner}))})).finally((function(){t.loading=!1})),Object(T["a"])(D,this.id).then((function(o){t.stat=t.$store.state.stat=o.data})),Object(T["d"])(D,this.id))},components:{singlebox:I}},A=S,$=(e("2dad"),Object(O["a"])(A,s,a,!1,null,null,null)),E=$.exports,P=function(){var t=this,o=t._self._c;return o("div",{attrs:{id:"app"}},[o("Header"),o("Breadcrumb",{attrs:{name:"副本专栏",slug:"fb",publishEnable:!0,feedbackEnable:!0,adminEnable:!0},scopedSlots:t._u([{key:"op-prepend",fn:function(){return[t.isTeammate?o("AdminDrop",{attrs:{post:t.post,"user-id":t.user_id,showMove:!0}}):t._e()]},proxy:!0},{key:"title",fn:function(){return[o("span",[t._v(" "+t._s(t.title)+" ")])]},proxy:!0},{key:"logo",fn:function(){return[o("img",{staticClass:"u-breadcrumb-logo",attrs:{src:t.logo,alt:""}})]},proxy:!0}])}),o("LeftSidebar",{attrs:{uid:t.user_id}},[o("Nav",{staticClass:"m-nav",attrs:{id:t.id}})],1),o("Main",{attrs:{withoutRight:!1}},[t._t("default"),o("RightSidebar",{attrs:{"show-toggle":!0}},[o("Side",{staticClass:"m-extend",attrs:{id:t.id}})],1),o("Footer")],2)],1)},R=[],M=function(){var t=this,o=t._self._c;return o("div",{staticClass:"m-single-nav"},[o("Author",{attrs:{uid:t.uid}})],1)},L=[],B={name:"single_nav",props:[],data:function(){return{}},computed:{uid:function(){return this.$store.state.user_id}},methods:{},mounted:function(){}},N=B,V=Object(O["a"])(N,M,L,!1,null,null,null),Y=V.exports,G=function(){var t=this,o=t._self._c;return o("div",{staticClass:"m-single-side"},[t.id?o("PostTopic",{attrs:{type:"fb",id:~~t.id}}):t._e(),o("PostDirectory",{attrs:{id:"directory"}}),t.showSideCollection?o("PostCollection",{attrs:{store:t.collection_data}}):t._e()],1)},H=[],J=e("6370"),U=e("7221"),X=e("bf34"),F={name:"single_side",props:["id"],data:function(){return{}},components:{PostDirectory:J["a"],PostCollection:U["a"],PostTopic:X["a"]},computed:{hasDirectory:function(){var t;return null===(t=this.$store.state.extend)||void 0===t?void 0:t.directory},showSideCollection:function(){var t,o,e=null===(t=this.$store.state.post)||void 0===t?void 0:t.post_collection,i=!(null!==(o=this.$store.state.post)&&void 0!==o&&o.collection_collapse);return e&&i},collection_data:function(){var t;return null===(t=this.$store.state.extend)||void 0===t?void 0:t.collection_data}}},q=F,z=(e("65bd"),Object(O["a"])(q,G,H,!1,null,null,null)),K=z.exports,Q=e("f175"),W={name:"SingleLayout",props:[],data:function(){return{id:Object(y["f"])(),logo:g["__cdn"]+"logo/logo-light/fb.svg"}},computed:{user_id:function(){return this.$store.state.user_id},post:function(){return this.$store.state.post},title:function(){return this.post.post_title||document.title},isTeammate:function(){return w["a"].isTeammate()}},methods:{getAppIcon:y["g"]},components:{Nav:Y,Side:K,AdminDrop:Q["a"]}},Z=W,tt=(e("9213"),Object(O["a"])(Z,P,R,!1,null,null,null)),ot=tt.exports,et={name:"Single",props:[],components:{single:E,SingleLayout:ot},data:function(){return{id:Object(y["f"])()}},computed:{user_id:function(){return this.$store.state.user_id}},methods:{getAppIcon:y["g"]}},it=et,nt=Object(O["a"])(it,i,n,!1,null,null,null);o["default"]=nt.exports},"58f8":function(t,o,e){"use strict";e("cd6f")},6370:function(t,o,e){"use strict";var i=function(){var t=this,o=t._self._c;return o("div",{staticClass:"m-single-directory"})},n=[],s={name:"PostDirectory",props:[],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},a=s,r=(e("d841"),e("2877")),c=Object(r["a"])(a,i,n,!1,null,null,null);o["a"]=c.exports},"65bd":function(t,o,e){"use strict";e("f19e")},7221:function(t,o,e){"use strict";var i=function(){var t=this,o=t._self._c;return t.list&&t.list.length?o("div",{staticClass:"m-single-collection"},[t._m(0),o("ul",{staticClass:"u-list"},t._l(t.list,(function(e,i){return o("li",{key:i},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.title,placement:"left"}},[o("a",{attrs:{href:t.showLink(e),target:"_blank"}},[o("i",{staticClass:"el-icon-link"}),t._v(" "+t._s(e.title)+" ")])])],1)})),0)]):t._e()},n=[function(){var t=this,o=t._self._c;return o("div",{staticClass:"u-title"},[o("i",{staticClass:"el-icon-connection"}),t._v(" 关联")])}],s=e("85e4"),a=e("65c2"),r=e("1509"),c={name:"PostCollection",props:["id","store"],components:{},data:function(){return{data:{title:"",posts:[]}}},computed:{list:function(){var t,o;return(null===(t=this.store)||void 0===t?void 0:t.posts)||(null===(o=this.data)||void 0===o?void 0:o.posts)}},watch:{id:{immediate:!0,handler:function(t){~~t&&this.loadData()}}},methods:{loadData:function(){var t=this;Object(r["a"])(this.id).then((function(o){var e;t.data=null===(e=o.data)||void 0===e?void 0:e.data}))},showLink:function(t){return"custom"==t.type?t.url:Object(s["i"])(t.type,t.id)},getCover:function(t){return t?Object(s["s"])(t):"".concat(a["__imgPath"],"image/collection/default_cover.png")}}},l=c,u=(e("9140"),e("2877")),d=Object(u["a"])(l,i,n,!1,null,"309a13ae",null);o["a"]=d.exports},"80bb":function(t,o,e){},8111:function(t,o,e){},9140:function(t,o,e){"use strict";e("d3e2")},9213:function(t,o,e){"use strict";e("0f41")},9485:function(t,o,e){"use strict";var i=e("23e7"),n=e("2266"),s=e("59ed"),a=e("825a"),r=e("46c4"),c=TypeError;i({target:"Iterator",proto:!0,real:!0},{reduce:function(t){a(this),s(t);var o=r(this),e=arguments.length<2,i=e?void 0:arguments[1],l=0;if(n(o,(function(o){e?(e=!1,i=o):i=t(i,o,l),l++}),{IS_RECORD:!0}),e)throw new c("Reduce of empty iterator with no initial value");return i}})},"990e":function(t,o,e){"use strict";e("8111")},a5de:function(t,o,e){t.exports=e.p+"img/topic_bg_bps.423bd2a8.svg"},b85c:function(t,o,e){"use strict";e.d(o,"a",(function(){return n}));e("a4d3"),e("e01a"),e("d28b"),e("d9e2"),e("d3b7"),e("3ca3"),e("ddb0");var i=e("06c5");function n(t,o){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Object(i["a"])(t))||o&&t&&"number"==typeof t.length){e&&(t=e);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return r=t.done,t},e:function(t){c=!0,a=t},f:function(){try{r||null==e["return"]||e["return"]()}finally{if(c)throw a}}}}},bf34:function(t,o,e){"use strict";var i=function(){var t=this,o=t._self._c;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.topicInfo,expression:"topicInfo"}],staticClass:"c-post-topic"},[o("div",{staticClass:"c-post-topic__banner"},[o("div",{staticClass:"c-topic-text"},[o("div",{staticClass:"c-topic-text__year"},[t._v(t._s(t.year))]),o("div",{staticClass:"c-topic-text__text"},[t._v(t._s(t.topicText))])]),o("img",{staticClass:"c-topic-bg",attrs:{src:e("a5de"),alt:""}})]),o("div",{staticClass:"c-post-topic__img"},[o("img",{attrs:{src:t.topicImage,alt:""}})])])},n=[],s=(e("caad"),e("a9e3"),e("2532"),e("1509")),a=e("85e4"),r=e("5a0c"),c=e.n(r),l={name:"PostTopic",props:{type:{type:String,default:"bps"},id:{type:Number,default:46917},postBanner:{type:String,default:""}},data:function(){return{topicInfo:null}},computed:{topicText:function(){return this.topicInfo?"".concat(c()(this.topicInfo.created_at).format("MM月DD日"),"荣登头条榜"):""},year:function(){return this.topicInfo?c()(this.topicInfo.created_at).format("YYYY年"):""},topicImage:function(){var t,o=this.postBanner||(null===(t=this.topicInfo)||void 0===t?void 0:t.img);return(null===o||void 0===o?void 0:o.indexOf(".gif"))>-1||(null===o||void 0===o?void 0:o.indexOf(".webp"))>-1?o:Object(a["l"])(o,[520,156])},client:function(){return location.href.includes("origin")?"origin":"std"}},watch:{id:{immediate:!0,handler:function(t){t&&this.loadData()}}},methods:{loadData:function(){var t=this;Object(s["e"])({source_type:this.type,source_id:this.id}).then((function(o){var e;t.topicInfo=null===(e=o.data)||void 0===e?void 0:e.data}))}}},u=l,d=(e("58f8"),e("2877")),p=Object(d["a"])(u,i,n,!1,null,"17c366d6",null);o["a"]=p.exports},cd6f:function(t,o,e){},d3e2:function(t,o,e){},d58f:function(t,o,e){"use strict";var i=e("59ed"),n=e("7b0b"),s=e("44ad"),a=e("07fa"),r=TypeError,c="Reduce of empty array with no initial value",l=function(t){return function(o,e,l,u){var d=n(o),p=s(d),f=a(d);if(i(e),0===f&&l<2)throw new r(c);var h=t?f-1:0,v=t?-1:1;if(l<2)while(1){if(h in p){u=p[h],h+=v;break}if(h+=v,t?h<0:f<=h)throw new r(c)}for(;t?h>=0:f>h;h+=v)h in p&&(u=e(u,p[h],h,d));return u}};t.exports={left:l(!1),right:l(!0)}},d841:function(t,o,e){"use strict";e("80bb")},f19e:function(t,o,e){}}]);