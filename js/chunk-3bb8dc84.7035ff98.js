(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bb8dc84"],{"003d":function(t,n,e){},3835:function(t,n,e){"use strict";function a(t){if(Array.isArray(t))return t}e.d(n,"a",(function(){return c}));e("a4d3"),e("e01a"),e("d28b"),e("14d9"),e("d3b7"),e("3ca3"),e("ddb0");function o(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var a,o,i,s,c=[],r=!0,l=!1;try{if(i=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;r=!1}else for(;!(r=(a=i.call(e)).done)&&(c.push(a.value),c.length!==n);r=!0);}catch(t){l=!0,o=t}finally{try{if(!r&&null!=e["return"]&&(s=e["return"](),Object(s)!==s))return}finally{if(l)throw o}}return c}}var i=e("06c5");e("d9e2");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,n){return a(t)||o(t,n)||Object(i["a"])(t,n)||s()}},"385c":function(t,n,e){"use strict";e("b0c0");var a=function(){var t=this,n=t._self._c;return t.data&&t.data.length?n("div",{staticClass:"m-snapshot-body"},t._l(t.data,(function(e){return n("div",{key:e.name,staticClass:"u-col"},[n("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.name,expression:"item.name",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"u-item"},[n("img",{staticClass:"u-icon",attrs:{src:t._f("showMountIcon")(e.mount)}}),n("span",{staticClass:"u-name"},[t._v(t._s(e.name))])])])})),0):t._e()},o=[],i={name:"SnapshotBody",props:["data"],components:{},data:function(){return{}},computed:{},watch:{},methods:{onCopy:function(t){this.$notify({title:"复制成功",message:"复制内容 : "+t.text,type:"success"})},onError:function(){this.$notify.error({title:"复制失败",message:"请手动复制"})}},filters:{},created:function(){},mounted:function(){}},s=i,c=(e("5357"),e("2877")),r=Object(c["a"])(s,a,o,!1,null,null,null);n["a"]=r.exports},"445e":function(t,n,e){"use strict";e.d(n,"f",(function(){return o})),e.d(n,"a",(function(){return s})),e.d(n,"c",(function(){return c})),e.d(n,"d",(function(){return r})),e.d(n,"b",(function(){return i})),e.d(n,"e",(function(){return l}));var a=e("41cb");function o(t,n){return Object(a["g"])().get("/api/team/snapshot/team/".concat(t),{params:n})}function i(t){return Object(a["g"])().delete("/api/team/snapshot/record/".concat(t))}function s(t,n){return Object(a["g"])().post("/api/team/snapshot/team/".concat(t),n)}function c(t,n){return Object(a["g"])().put("/api/team/snapshot/record/".concat(t),n)}function r(t){return Object(a["g"])().get("/api/team/snapshot/record/".concat(t)).then((function(t){return t.data.data}))}function l(t,n){return Object(a["g"])().get("/api/team/snapshot/team/".concat(t,"/more"),{params:n})}},"46d4":function(t){t.exports=JSON.parse('{"冰心诀":{"name":"冰心诀","id":10081,"force":5,"kungfuId":10,"school":4,"client":["all","std","origin"]},"云裳心经":{"name":"云裳心经","id":10080,"force":5,"kungfuId":9,"school":4,"client":["all","std","origin"]},"花间游":{"name":"花间游","id":10021,"force":2,"kungfuId":5,"school":2,"client":["all","std","origin"]},"离经易道":{"name":"离经易道","id":10028,"force":2,"kungfuId":7,"school":2,"client":["all","std","origin"]},"毒经":{"name":"毒经","id":10175,"force":6,"kungfuId":13,"school":9,"client":["all","std","origin"]},"补天诀":{"name":"补天诀","id":10176,"force":6,"kungfuId":14,"school":9,"client":["all","std","origin"]},"莫问":{"name":"莫问","id":10447,"force":22,"kungfuId":22,"school":19,"client":["all","std"]},"相知":{"name":"相知","id":10448,"force":22,"kungfuId":23,"school":19,"client":["all","std"]},"无方":{"name":"无方","id":10627,"force":212,"kungfuId":29,"school":24,"client":["all","std"]},"灵素":{"name":"灵素","id":10626,"force":212,"kungfuId":28,"school":24,"client":["all","std"]},"傲血战意":{"name":"傲血战意","id":10026,"force":3,"kungfuId":6,"school":1,"client":["all","std","origin"]},"铁牢律":{"name":"铁牢律","id":10062,"force":3,"kungfuId":8,"school":1,"client":["all","std","origin"]},"易筋经":{"name":"易筋经","id":10003,"force":1,"kungfuId":2,"school":5,"client":["all","std","origin"]},"洗髓经":{"name":"洗髓经","id":10002,"force":1,"kungfuId":1,"school":5,"client":["all","std","origin"]},"焚影圣诀":{"name":"焚影圣诀","id":10242,"force":10,"kungfuId":17,"school":8,"client":["all","std","origin"]},"明尊琉璃体":{"name":"明尊琉璃体","id":10243,"force":10,"kungfuId":18,"school":8,"client":["all","std","origin"]},"分山劲":{"name":"分山劲","id":10390,"force":21,"kungfuId":21,"school":18,"client":["all","std","origin"]},"铁骨衣":{"name":"铁骨衣","id":10389,"force":21,"kungfuId":20,"school":18,"client":["all","std","origin"]},"紫霞功":{"name":"紫霞功","id":10014,"force":4,"kungfuId":3,"school":3,"client":["all","std","origin"]},"太虚剑意":{"name":"太虚剑意","id":10015,"force":4,"kungfuId":4,"school":3,"client":["all","std","origin"]},"天罗诡道":{"name":"天罗诡道","id":10225,"force":7,"kungfuId":16,"school":10,"client":["all","std","origin"]},"惊羽诀":{"name":"惊羽诀","id":10224,"force":7,"kungfuId":15,"school":10,"client":["all","std","origin"]},"问水诀":{"name":"问水诀","id":10144,"force":8,"kungfuId":11,"school":6,"client":["all","std","origin"]},"山居剑意":{"name":"山居剑意","id":10145,"force":8,"kungfuId":11,"school":6,"client":["all","std","origin"]},"笑尘诀":{"name":"笑尘诀","id":10268,"force":9,"kungfuId":19,"school":7,"client":["all","std","origin"]},"北傲诀":{"name":"北傲诀","id":10464,"force":23,"kungfuId":24,"school":20,"client":["all","std"]},"凌海诀":{"name":"凌海诀","id":10533,"force":24,"kungfuId":25,"school":21,"client":["all","std"]},"隐龙诀":{"name":"隐龙诀","id":10585,"force":25,"kungfuId":26,"school":22,"client":["all","std"]},"太玄经":{"name":"太玄经","id":10615,"force":211,"kungfuId":27,"school":23,"client":["all","std"]},"孤锋诀":{"name":"孤锋诀","id":10698,"force":213,"kungfuId":30,"school":26,"client":["all","std"]},"山海心诀":{"name":"山海心诀","id":10756,"force":214,"kungfuId":32,"school":29,"client":["all","std"]},"周天功":{"name":"周天功","id":10786,"force":215,"kungfuId":33,"school":38,"client":["all","std"]},"通用":{"name":"通用","id":0,"force":0,"kungfuId":0,"school":0,"client":["all","std","origin"]}}')},5357:function(t,n,e){"use strict";e("003d")},"5feb":function(t,n,e){"use strict";e.d(n,"f",(function(){return o})),e.d(n,"a",(function(){return p})),e.d(n,"i",(function(){return d})),e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return s})),e.d(n,"d",(function(){return c})),e.d(n,"h",(function(){return l})),e.d(n,"e",(function(){return u})),e.d(n,"g",(function(){return r}));var a=e("41cb");function o(t){return Object(a["b"])({proxy:!0}).get("/api/item/search",{params:t})}function i(t){return Object(a["a"])().get("/api/cms/team/dkp/".concat(t))}function s(t,n){return Object(a["a"])().get("/api/cms/team/dkp/".concat(t,"/logs"),{params:n})}function c(t){return Object(a["a"])().get("/api/cms/team/dkp/".concat(t,"/my"))}function r(t,n){return Object(a["g"])().post("/api/team/snapshot/record/".concat(t,"/dkp"),n)}function l(t,n){return Object(a["a"])().put("/api/cms/team/dkp/".concat(t,"/records"),n)}function u(t){return Object(a["a"])().put("/api/cms/team/dkp/".concat(t,"/reset"))}function d(t,n){return Object(a["a"])().put("/api/cms/team/dkp/".concat(t,"/rule"),{rule:n})}function p(t){return Object(a["a"])().get("/api/cms/team/dkp/".concat(t,"/rule"))}},6003:function(t,n,e){"use strict";e("bcee")},6054:function(t,n,e){"use strict";e("996b")},"996b":function(t,n,e){},a755:function(t,n,e){"use strict";e("ac1f"),e("841c");var a=function(){var t=this,n=t._self._c;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-snapshot-box"},[n("div",{staticClass:"m-snapshot-search"},[n("el-input",{attrs:{placeholder:"输入关键词.."},model:{value:t.search,callback:function(n){t.search=n},expression:"search"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"el-icon-search"}),t._v(" 搜索")]),n("el-button",{attrs:{slot:"append",icon:"el-icon-position"},slot:"append"})],2)],1),t.list&&t.list.length?n("div",{staticClass:"m-snapshot-list"},[t._l(t.list,(function(e,a){return n("snapshot-item",{key:e.id,attrs:{data:e,team_id:t.org,readOnly:t.readOnly,supportDkpSync:t.supportDkpSync},on:{dropSnapshot:function(n){return t.dropSnapshot(a)}}})})),n("el-pagination",{staticClass:"m-snapshot-pages",attrs:{background:"",layout:"total, prev, pager, next,jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(n){t.page=n},"update:current-page":function(n){t.page=n},"current-change":t.changePage}})],2):n("el-alert",{staticClass:"m-snapshot-null",attrs:{type:"info","show-icon":""}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 暂无任何记录，点击查看 "),n("a",{attrs:{href:"/tool/23783",target:"_blank"}},[t._v("帮助文档")])])])],1)},o=[],i=(e("a434"),e("d3b7"),function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-snapshot-item",class:{isOpen:t.collapse}},[n("div",{staticClass:"m-snapshot-item-header"},[n("h4",{staticClass:"u-title",on:{click:t.foldItem}},[n("i",{class:t.collapse?"el-icon-caret-top":"el-icon-caret-right"}),t._v(" "+t._s(t.data.title||t.autoname)+" ")]),n("div",{staticClass:"u-meta"},[n("time",{staticClass:"u-meta-item u-time"},[n("i",{staticClass:"el-icon-date"}),n("em",[t._v("上传日期")]),t._v(" "+t._s(t._f("showTime")(t.data.created_at))+" ")]),n("span",{staticClass:"u-meta-item u-reporter"},[n("i",{staticClass:"el-icon-user"}),n("em",[t._v("上传人员")]),n("a",{attrs:{href:t._f("authorLink")(t.data.user_id),target:"_blank"}},[t._v(t._s(t.data.user_data?t.data.user_data.display_name:"未知"))])]),n("div",{staticClass:"u-meta-item u-desc"},[n("i",{staticClass:"el-icon-tickets"}),n("em",[t._v("备注说明")]),t._v(" "+t._s(t.data.desc||"无")+" ")])])]),n("div",{staticClass:"m-snapshot-item-content",class:{isOpen:t.collapse}},[5==t.groups?n("div",{staticClass:"m-snapshot-flags"},t._l(t.groups,(function(e){return n("i",{key:e},[t._v(t._s(e))])})),0):t._e(),n("snapshot-body",{class:"row-"+t.groups,attrs:{data:t.list}}),t.supportDkpSync?n("div",{staticClass:"m-snapshot-dkp"},[n("el-form",{attrs:{inline:!0,model:t.dkpForm}},[n("el-form-item",{attrs:{label:"分值"}},[n("el-input",{attrs:{placeholder:"批量加分值",min:0},model:{value:t.dkpForm.score,callback:function(n){t.$set(t.dkpForm,"score",t._n(n))},expression:"dkpForm.score"}})],1),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{placeholder:"批量备注"},model:{value:t.dkpForm.remark,callback:function(n){t.$set(t.dkpForm,"remark",n)},expression:"dkpForm.remark"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.syncDkp(t.data)}}},[t._v("提交")])],1)],1)],1):t._e()],1),n("div",{staticClass:"m-snapshot-item-op"},[t.supportDkpSync?n("span",{staticClass:"u-dkp-status"},[t._v(t._s(t.data.dkp?"✔️DKP已同步":""))]):t._e(),t.readOnly?t._e():[n("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-edit"},on:{click:function(n){return t.edit(t.data.id)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"info",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(n){return t.del(t.data.id)}}},[t._v("删除")])]],2)])}),s=[],c=(e("14d9"),e("e9f5"),e("7d54"),e("159b"),e("65c2"),e("46d4")),r=e("445e"),l=e("5feb"),u=e("e4f1"),d=e("385c"),p={name:"snapshotItem",props:["data","team_id","readOnly","supportDkpSync"],data:function(){return{xfmap:c,collapse:!1,dkpForm:{score:0,remark:""}}},computed:{list:function(){var t=this.data.teammate.split(";"),n=[];return t.forEach((function(t,e){t=t.split(",");var a={name:t[0],id:t[1],jx3id:t[2],mount:t[3]};n.push(a)})),n},autoname:function(){var t;return Object(u["d"])(this.data.created_at)+"@"+((null===(t=this.data.user_data)||void 0===t?void 0:t.display_name)||"未知")+" 游戏内上传"},groups:function(){return~~Math.ceil(this.list.length/5)}},methods:{edit:function(t){this.$router.push("/snapshot/edit/"+t)},del:function(t){var n=this;this.$alert("确定删除这条记录吗？","消息",{confirmButtonText:"确定",callback:function(e){"confirm"==e&&Object(r["b"])(t).then((function(t){n.$message({type:"success",message:"删除成功"}),n.$emit("dropSnapshot")}))}})},foldItem:function(){this.collapse=!this.collapse},syncDkp:function(t){var n=this;Object(l["g"])(t.id,this.dkpForm).then((function(t){n.$message({message:"批量DKP处理成功",type:"success"}),n.data.dkp=1}))}},mounted:function(){},components:{snapshotBody:d["a"]}},f=p,m=(e("6054"),e("2877")),h=Object(m["a"])(f,i,s,!1,null,null,null),g=h.exports,k={name:"snapshot_list",props:["org","readOnly","supportDkpSync"],components:{"snapshot-item":g},data:function(){return{list:[],page:1,per:10,total:1,loading:!1,search:""}},computed:{params:function(){return{pageIndex:this.page,pageSize:this.per,search:this.search}}},watch:{params:{deep:!0,handler:function(){this.org&&this.loadSnapshots()}},org:{immediate:!0,handler:function(t){t&&this.loadSnapshots()}}},methods:{dropSnapshot:function(t){this.list.splice(t,1)},loadSnapshots:function(){var t=this;return this.loading=!0,Object(r["f"])(this.org,this.params).then((function(n){t.list=n.data.data.list||[],t.total=n.data.data.page.total})).finally((function(){t.loading=!1}))},changePage:function(){window.scrollTo(0,0)}},filters:{},created:function(){},mounted:function(){}},b=k,v=(e("6003"),Object(m["a"])(b,a,o,!1,null,"c623580c",null));n["a"]=v.exports},bcee:function(t,n,e){}}]);