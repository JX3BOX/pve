(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eaafb20e"],{"377a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"p-pkg p-pkg-build"},[t._m(0),e("div",{staticClass:"m-content"},[e("el-form",{ref:"pkgForm",staticClass:"m-basic-form",attrs:{"label-width":"120px","hide-required-asterisk":"","label-position":t.layout,model:t.pkg,rules:t.rules,"status-icon":""}},[e("el-form-item",{attrs:{label:"数据包标题",prop:"title"}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("span",{staticClass:"u-client i-client",class:"i-client-"+t.pkg.client},[t._v(t._s(t.clients[t.pkg.client]))]),t._v("标题")]),e("el-input",{staticClass:"u-title",attrs:{placeholder:"必填",maxlength:50,"show-word-limit":""},model:{value:t.pkg.title,callback:function(e){t.$set(t.pkg,"title",e)},expression:"pkg.title"}})],1),e("pkg-subscribe"),e("pkg-extend",{ref:"extend"}),e("pkg-other")],1)],1),e("div",{staticClass:"m-publish"},[e("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"u-btn",attrs:{type:"primary",icon:"el-icon-check",disabled:!t.isLogin},on:{click:t.publish}},[e("span",{staticClass:"u-txt"},[t._v("创建")])])],1)])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-header"},[e("h1",{staticClass:"u-title"},[t._v(" 创建场景标记 ")]),e("p",{staticClass:"u-desc"},[t._v(" 创建云数据，支持在线浏览数据内容，点击查看"),e("a",{attrs:{href:"/tool/17401",target:"_blank"}},[t._v("「帮助文档」")]),t._v("。 ")])])}],n=a("5530"),l=(a("d9e2"),a("99af"),a("14d9"),a("b0c0"),a("d3b7"),a("c9d2")),c=a("65c2"),r=a("2f62"),o=a("1f7f"),d=a("06fa"),u=a("ef8c"),g=a("1745"),p={name:"MarkCreate",props:[],components:{PkgSubscribe:d["a"],PkgExtend:u["a"],PkgOther:g["a"]},data:function(){return{clients:c["__clients"],isLogin:l["a"].isLogin(),loading:!1,layout:window.innerWidth<1024?"top":"left",rules:{title:[{required:!0,message:"请输入数据包标题",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入订阅名",trigger:"blur"},{trigger:"blur",validator:this.checkPkgName}]}}},computed:Object(n["a"])({},Object(r["c"])({pkg:"pkg",mark_tags:"mark_map"})),mounted:function(){this.init()},methods:{publish:function(){var t=this;this.$refs.pkgForm.validate((function(e){if(e){t.loading=!0;var a=Object(n["a"])(Object(n["a"])({},t.pkg),{},{pkg_tag:t.mark_tags});Object(o["A"])(a).then((function(e){t.$message({message:"提交成功",type:"success"}),t.$router.push({name:"mark_edit",params:{id:e.data.data.id}})})).finally((function(){t.loading=!1}))}}))},init:function(){var t=this;this.$store.commit("RESET_PKG",{is_raw:0,type:3}),Object(o["j"])().then((function(e){e.data.data||t.$store.commit("SET_PKG",Object(n["a"])(Object(n["a"])({},t.pkg),{},{title:"".concat(l["a"].getInfo().name," 的场景标记数据"),name:"默认版"}))}))},checkPkgName:function(t,e,a){var i;e?Object(o["d"])({key:"".concat(null===(i=l["a"].getInfo())||void 0===i?void 0:i.name,"#").concat(e)}).then((function(t){var e;null!==(e=t.data)&&void 0!==e&&e.data?a(new Error("该订阅名已存在")):a()})):a()}}},m=p,k=(a("4331"),a("2877")),b=Object(k["a"])(m,i,s,!1,null,null,null);e["default"]=b.exports},4331:function(t,e,a){"use strict";a("d49d")},d49d:function(t,e,a){}}]);